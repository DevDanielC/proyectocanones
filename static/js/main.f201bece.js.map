{"version":3,"file":"static/js/main.f201bece.js","mappings":"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","sources":["src/screens/DetallesEquipoScreen.js","src/screens/PrincipalAdmin.js","src/components/MenuUsuario.js","src/components/QRScannerModal.js","src/screens/PrincipalPrestamoUsuario.js","src/components/MenuAdmin.js","src/screens/Operations/PrestamosScreen.js","src/screens/Reports/HistorialPrestamosScreen.js","src/screens/Operations/DevolucionesScreen.js","src/screens/Operations/UsuarioPrestamos.js","src/screens/Operations/UsuarioDevoluciones.js","src/screens/Maintenance/AgregarMantenimiento.js","src/screens/Maintenance/DevolverMantenimiento.js","src/screens/Reports/ReporteMantenimiento.js","src/screens/Users/AgregarAdmin.js","src/screens/Users/AgregarUsuarios.js","src/screens/Users/ModificarUsuarios.js","src/screens/Users/VerUsuarios.js","src/screens/Users/PerfilUsuario.js","src/screens/Equipment/AgregarEquipos.js","src/screens/Equipment/ModificarEquipos.js","src/screens/Equipment/VerEquipos.js","src/screens/Categories/AgregarCategorias.js","src/screens/Categories/VerCategorias.js","src/screens/Extras/Sanciones.js","src/screens/Extras/Manual.js","src/screens/App.js","index.js","src/lib/supabase.js","src/screens/Auth/LoginScreen.js","src/screens/Auth/RegisterScreen.js","src/screens/Auth/AuthScreen.js","webpack/bootstrap","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/create fake namespace object","webpack/runtime/define property getters","webpack/runtime/ensure chunk","webpack/runtime/get javascript chunk filename","webpack/runtime/get mini-css chunk filename","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/load script","webpack/runtime/make namespace object","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  Text, \n  StyleSheet, \n  ActivityIndicator, \n  TouchableOpacity, \n  ScrollView, \n  SafeAreaView,\n  Alert,\n  Dimensions\n} from 'react-native';\nimport { supabase } from '../lib/supabase';\nimport { useRoute, useNavigation } from '@react-navigation/native';\nimport { MaterialIcons, MaterialCommunityIcons } from '@expo/vector-icons';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\n\nconst DetallesEquipoScreen = () => {\n  const route = useRoute();\n  const navigation = useNavigation();\n  const [equipo, setEquipo] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [procesando, setProcesando] = useState(false);\n  const [prestamoActivo, setPrestamoActivo] = useState(null);\n  \n  // Extracción segura de parámetros con valores por defecto\n  const { equipoId, equipo: equipoFromParams } = route.params || {};\n\n  useEffect(() => {\n    const cargarDatos = async () => {\n      try {\n        setLoading(true);\n        \n        // Si ya tenemos los datos del equipo desde los parámetros, los usamos\n        if (equipoFromParams) {\n          setEquipo(equipoFromParams);\n        } else {\n          // Validación del equipoId\n          if (!equipoId || isNaN(equipoId)) {\n            throw new Error('ID de equipo no válido');\n          }\n\n          const { data, error } = await supabase\n            .from('equipos')\n            .select(`\n              idequipo,\n              nombreequipo,\n              estado,\n              descripcion,\n              fechacreacion,\n              fechabaja,\n              fechaactualizacion,\n              categoriasequipos: idcategoria (nombrecategoria, descripcion)\n            `)\n            .eq('idequipo', equipoId)\n            .single();\n\n          if (error) throw error;\n          if (!data) throw new Error('Equipo no encontrado');\n          \n          setEquipo(data);\n        }\n\n        // Verificar si el equipo tiene un préstamo activo\n        const { data: prestamoData, error: prestamoError } = await supabase\n          .from('prestamos')\n          .select(`\n            idprestamo,\n            fechaprestamo,\n            fechadevolucion_prevista,\n            personal: idpersonal (nombre_completo)\n          `)\n          .eq('idequipo', equipoFromParams?.idequipo || equipoId)\n          .eq('estado', 'Prestado')\n          .single();\n\n        if (!prestamoError && prestamoData) {\n          setPrestamoActivo(prestamoData);\n        }\n      } catch (error) {\n        console.error('Error al cargar datos:', error);\n        Alert.alert(\n          'Error', \n          error.message || 'No se pudo cargar la información del equipo',\n          [{ text: 'OK', onPress: () => navigation.goBack() }]\n        );\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    cargarDatos();\n  }, [equipoId, equipoFromParams]);\n\n  const handlePrestamoDevolucion = async () => {\n    if (!equipo) return;\n    \n    setProcesando(true);\n    \n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      \n      if (!user) {\n        throw new Error('Usuario no autenticado');\n      }\n\n      if (equipo.estado === 'disponible') {\n        // Lógica para prestar el equipo\n        const { error } = await supabase.rpc('realizar_prestamo', {\n          p_id_usuario: user.id,\n          p_id_equipo: equipo.idequipo,\n          p_nombre_equipo: equipo.nombreequipo\n        });\n\n        if (error) throw error;\n\n        Alert.alert(\n          'Préstamo registrado',\n          `El préstamo del equipo ${equipo.nombreequipo} ha sido registrado correctamente.`,\n          [{ text: 'Aceptar', onPress: () => navigation.goBack() }]\n        );\n      } else if (equipo.estado === 'prestado') {\n        // Lógica para devolver el equipo\n        if (!prestamoActivo) {\n          throw new Error('No se encontró información del préstamo activo');\n        }\n\n        const { error } = await supabase.rpc('registrar_devolucion_app', {\n          p_idprestamo: prestamoActivo.idprestamo\n        });\n\n        if (error) throw error;\n\n        Alert.alert(\n          'Devolución registrada',\n          `El equipo ${equipo.nombreequipo} ha sido devuelto correctamente.`,\n          [{ text: 'Aceptar', onPress: () => navigation.goBack() }]\n        );\n      }\n    } catch (error) {\n      console.error('Error al procesar:', error);\n      Alert.alert(\n        'Error', \n        error.message || 'No se pudo completar la operación'\n      );\n    } finally {\n      setProcesando(false);\n    }\n  };\n\n  // Pantalla de carga\n  if (loading) {\n    return (\n      <SafeAreaView style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\n        <Text style={styles.loadingText}>Cargando información del equipo...</Text>\n      </SafeAreaView>\n    );\n  }\n\n  // Pantalla de error si no hay equipo\n  if (!equipo) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <Text style={styles.errorText}>No se encontró información del equipo</Text>\n        <TouchableOpacity \n          style={styles.backButton}\n          onPress={() => navigation.goBack()}\n        >\n          <Text style={styles.backButtonText}>Volver</Text>\n        </TouchableOpacity>\n      </SafeAreaView>\n    );\n  }\n\n  // Pantalla principal con detalles del equipo\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <ScrollView \n        contentContainerStyle={styles.scrollContainer}\n        showsVerticalScrollIndicator={false}\n      >\n        <View style={styles.card}>\n          {/* Encabezado con icono, nombre y estado */}\n          <View style={styles.cardHeader}>\n            <MaterialCommunityIcons \n              name=\"desktop-classic\" \n              size={32} \n              color=\"#4a6da7\" \n              style={styles.equipoIcon}\n            />\n            <Text style={styles.cardTitle}>{equipo.nombreequipo}</Text>\n            <View style={[\n              styles.statusBadge,\n              equipo.estado === 'disponible' ? styles.statusAvailable :\n              equipo.estado === 'prestado' ? styles.statusReserved :\n              equipo.estado === 'mantenimiento' ? styles.statusMaintenance :\n              styles.statusUnavailable\n            ]}>\n              <Text style={styles.statusText}>\n                {equipo.estado.toUpperCase()}\n              </Text>\n            </View>\n          </View>\n\n          {/* Detalles del equipo */}\n          <View style={styles.detailsContainer}>\n            <View style={styles.detailItem}>\n              <MaterialIcons name=\"category\" size={20} color=\"#6c757d\" />\n              <Text style={styles.detailText}>\n                Categoría: {equipo.categoriasequipos?.nombrecategoria || 'No especificada'}\n              </Text>\n            </View>\n\n            <View style={styles.detailItem}>\n              <MaterialIcons name=\"event\" size={20} color=\"#6c757d\" />\n              <Text style={styles.detailText}>\n                Fecha de creación: {new Date(equipo.fechacreacion).toLocaleDateString()}\n              </Text>\n            </View>\n\n            {equipo.fechaactualizacion && (\n              <View style={styles.detailItem}>\n                <MaterialIcons name=\"update\" size={20} color=\"#6c757d\" />\n                <Text style={styles.detailText}>\n                  Última actualización: {new Date(equipo.fechaactualizacion).toLocaleDateString()}\n                </Text>\n              </View>\n            )}\n\n            {prestamoActivo && (\n              <>\n                <View style={styles.detailItem}>\n                  <MaterialIcons name=\"person\" size={20} color=\"#6c757d\" />\n                  <Text style={styles.detailText}>\n                    Prestado a: {prestamoActivo.personal?.nombre_completo || 'No especificado'}\n                  </Text>\n                </View>\n                <View style={styles.detailItem}>\n                  <MaterialIcons name=\"date-range\" size={20} color=\"#6c757d\" />\n                  <Text style={styles.detailText}>\n                    Fecha préstamo: {new Date(prestamoActivo.fechaprestamo).toLocaleDateString()}\n                  </Text>\n                </View>\n                {prestamoActivo.fechadevolucion_prevista && (\n                  <View style={styles.detailItem}>\n                    <MaterialIcons name=\"event-available\" size={20} color=\"#6c757d\" />\n                    <Text style={styles.detailText}>\n                      Devolución prevista: {new Date(prestamoActivo.fechadevolucion_prevista).toLocaleDateString()}\n                    </Text>\n                  </View>\n                )}\n              </>\n            )}\n\n            {equipo.descripcion && (\n              <View style={styles.descriptionContainer}>\n                <Text style={styles.sectionTitle}>Descripción</Text>\n                <Text style={styles.descriptionText}>{equipo.descripcion}</Text>\n              </View>\n            )}\n\n            {equipo.categoriasequipos?.descripcion && (\n              <View style={styles.descriptionContainer}>\n                <Text style={styles.sectionTitle}>Descripción de la categoría</Text>\n                <Text style={styles.descriptionText}>{equipo.categoriasequipos.descripcion}</Text>\n              </View>\n            )}\n          </View>\n\n          {/* Botón de acción según estado */}\n          <View style={styles.actionsContainer}>\n            <TouchableOpacity \n              style={[\n                styles.button,\n                procesando && styles.buttonDisabled,\n                equipo.estado === 'mantenimiento' && styles.buttonDisabled\n              ]}\n              onPress={handlePrestamoDevolucion}\n              disabled={procesando || equipo.estado === 'mantenimiento'}\n            >\n              {procesando ? (\n                <ActivityIndicator color=\"white\" />\n              ) : (\n                <>\n                  <MaterialIcons \n                    name={equipo.estado === 'disponible' ? \"send\" : \"assignment-return\"} \n                    size={20} \n                    color=\"white\" \n                  />\n                  <Text style={styles.buttonText}>\n                    {equipo.estado === 'disponible' ? 'Solicitar Préstamo' : 'Registrar Devolución'}\n                  </Text>\n                </>\n              )}\n            </TouchableOpacity>\n\n            {equipo.estado === 'mantenimiento' && (\n              <Text style={styles.notAvailableText}>\n                Este equipo está en mantenimiento y no está disponible\n              </Text>\n            )}\n          </View>\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n};\n\n// Los estilos se mantienen igual que en tu código original\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa',\n    padding: 20,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa',\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#6c757d',\n  },\n  errorText: {\n    fontSize: 18,\n    color: '#dc3545',\n    textAlign: 'center',\n    marginBottom: 20,\n  },\n  backButton: {\n    padding: 15,\n    borderRadius: 8,\n    backgroundColor: '#4a6da7',\n  },\n  backButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  scrollContainer: {\n    padding: isMobile ? 16 : 24,\n    paddingBottom: 40,\n  },\n  card: {\n    backgroundColor: 'white',\n    borderRadius: 12,\n    padding: 20,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 6,\n    elevation: 3,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 20,\n    flexWrap: 'wrap',\n  },\n  equipoIcon: {\n    marginRight: 12,\n  },\n  cardTitle: {\n    fontSize: 22,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginRight: 12,\n    flexShrink: 1,\n  },\n  detailsContainer: {\n    marginTop: 10,\n  },\n  statusBadge: {\n    paddingHorizontal: 10,\n    paddingVertical: 6,\n    borderRadius: 12,\n    alignSelf: 'flex-start',\n  },\n  statusAvailable: {\n    backgroundColor: '#e6f7ee',\n  },\n  statusReserved: {\n    backgroundColor: '#fff8e1',\n  },\n  statusMaintenance: {\n    backgroundColor: '#fff0f0',\n  },\n  statusUnavailable: {\n    backgroundColor: '#f0f0f0',\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '600',\n  },\n  detailItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  detailText: {\n    fontSize: 16,\n    color: '#495057',\n    marginLeft: 8,\n    flexShrink: 1,\n  },\n  descriptionContainer: {\n    marginTop: 20,\n    paddingTop: 20,\n    borderTopWidth: 1,\n    borderTopColor: '#e9ecef',\n  },\n  sectionTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginBottom: 8,\n  },\n  descriptionText: {\n    fontSize: 14,\n    color: '#6c757d',\n    lineHeight: 22,\n  },\n  actionsContainer: {\n    marginTop: 24,\n  },\n  button: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#4a6da7',\n    padding: 14,\n    borderRadius: 8,\n  },\n  buttonDisabled: {\n    opacity: 0.7,\n  },\n  buttonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: '600',\n    marginLeft: 8,\n  },\n  notAvailableText: {\n    fontSize: 16,\n    color: '#dc3545',\n    textAlign: 'center',\n    paddingVertical: 12,\n  },\n});\n\nexport default DetallesEquipoScreen;","import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  Text, \n  StyleSheet, \n  ScrollView, \n  TouchableOpacity, \n  ActivityIndicator,\n  Dimensions,\n  SafeAreaView\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../lib/supabase';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst MAX_CONTENT_WIDTH = 1200;\n\nconst PrincipalAdminScreen = () => {\n  const navigation = useNavigation();\n  const [stats, setStats] = useState({\n    usuarios: 0,\n    equipos: 0,\n    prestamos: 0,\n    mantenimientos: 0\n  });\n  const [loading, setLoading] = useState(true);\n\n  const fetchStats = async () => {\n    try {\n      // Contar usuarios totales\n      const { count: usuarios } = await supabase\n        .from('usuarios')\n        .select('*', { count: 'exact' });\n      \n      // Contar equipos totales\n      const { count: equipos } = await supabase\n        .from('equipos')\n        .select('*', { count: 'exact' });\n      \n      // Contar préstamos/reservas activos\n      const { count: prestamos } = await supabase\n        .from('prestamos')\n        .select('*', { count: 'exact' })\n        .or('estado.eq.Prestado,estado.eq.Reservado');\n      \n      // Contar mantenimientos pendientes (basado en horadevolucion NULL)\n      const { count: mantenimientos } = await supabase\n        .from('historial_mantenimiento')\n        .select('*', { count: 'exact' })\n        .is('horadevolucion', null);\n  \n      setStats({\n        usuarios: usuarios || 0,\n        equipos: equipos || 0,\n        prestamos: prestamos || 0,\n        mantenimientos: mantenimientos || 0\n      });\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching stats:', error);\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchStats();\n  }, []);\n\n  if (loading) {\n    return (\n      <SafeAreaView style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\n        <Text style={styles.loadingText}>Cargando estadísticas...</Text>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <View style={styles.container}>\n        {/* Header */}\n        <View style={styles.header}>\n          <TouchableOpacity \n            onPress={() => navigation.openDrawer()}\n            style={styles.menuButton}\n            hitSlop={{top: 20, bottom: 20, left: 20, right: 20}}\n          >\n            <Icon name=\"menu\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Panel de Administración</Text>\n        </View>\n        \n        {/* Contenido principal */}\n        <ScrollView \n          contentContainerStyle={styles.scrollContent}\n          showsVerticalScrollIndicator={false}\n        >\n          <View style={styles.content}>\n            {/* Estadísticas */}\n            <View style={styles.statsContainer}>\n              <View style={styles.statCard}>\n                <View style={[styles.statIconContainer, {backgroundColor: '#e3f2fd'}]}>\n                  <MaterialCommunityIcons name=\"account-group\" size={24} color=\"#1976d2\" />\n                </View>\n                <Text style={styles.statTitle}>Usuarios</Text>\n                <Text style={styles.statValue}>{stats.usuarios}</Text>\n                <Text style={styles.statSubtitle}>Registrados</Text>\n              </View>\n              \n              <View style={styles.statCard}>\n                <View style={[styles.statIconContainer, {backgroundColor: '#e8f5e9'}]}>\n                  <MaterialCommunityIcons name=\"desktop-classic\" size={24} color=\"#388e3c\" />\n                </View>\n                <Text style={styles.statTitle}>Equipos</Text>\n                <Text style={styles.statValue}>{stats.equipos}</Text>\n                <Text style={styles.statSubtitle}>Disponibles</Text>\n              </View>\n              \n              <View style={styles.statCard}>\n                <View style={[styles.statIconContainer, {backgroundColor: '#fff8e1'}]}>\n                  <MaterialCommunityIcons name=\"book-clock\" size={24} color=\"#ffa000\" />\n                </View>\n                <Text style={styles.statTitle}>Préstamos</Text>\n                <Text style={styles.statValue}>{stats.prestamos}</Text>\n                <Text style={styles.statSubtitle}>Activos</Text>\n              </View>\n              \n              <View style={styles.statCard}>\n                <View style={[styles.statIconContainer, {backgroundColor: '#ffebee'}]}>\n                  <MaterialCommunityIcons name=\"toolbox\" size={24} color=\"#d32f2f\" />\n                </View>\n                <Text style={styles.statTitle}>Mantenimientos</Text>\n                <Text style={styles.statValue}>{stats.mantenimientos}</Text>\n                <Text style={styles.statSubtitle}>Pendientes</Text>\n              </View>\n            </View>\n            \n            {/* Acciones rápidas */}\n            <View style={styles.section}>\n              <Text style={styles.sectionTitle}>Acciones Rápidas</Text>\n              <View style={styles.quickActions}>\n                <TouchableOpacity \n                  style={styles.quickAction}\n                  onPress={() => navigation.navigate('AgregarUsuarios')}\n                  activeOpacity={0.7}\n                >\n                  <View style={styles.quickActionIcon}>\n                    <Icon name=\"person-add\" size={20} color=\"#1976d2\" />\n                  </View>\n                  <View>\n                    <Text style={styles.quickActionText}>Agregar Usuario</Text>\n                    <Text style={styles.quickActionSubtext}>Registrar nuevo usuario</Text>\n                  </View>\n                </TouchableOpacity>\n                \n                <TouchableOpacity \n                  style={styles.quickAction}\n                  onPress={() => navigation.navigate('AgregarEquipos')}\n                  activeOpacity={0.7}\n                >\n                  <View style={styles.quickActionIcon}>\n                    <Icon name=\"add-box\" size={20} color=\"#1976d2\" />\n                  </View>\n                  <View>\n                    <Text style={styles.quickActionText}>Agregar Equipo</Text>\n                    <Text style={styles.quickActionSubtext}>Nuevo equipo al inventario</Text>\n                  </View>\n                </TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </ScrollView>\n      </View>\n    </SafeAreaView>\n  );\n};\n\n// Los estilos permanecen igual que en tu código original\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa',\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#6c757d',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#ffffff',\n    paddingVertical: 16, \n    paddingHorizontal: isMobile ? 16 : 24,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  menuButton: {\n    marginRight: 16,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 18 : 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n  },\n  scrollContent: {\n    flexGrow: 1,\n    paddingBottom: 24,\n  },\n  content: {\n    width: '100%',\n    maxWidth: MAX_CONTENT_WIDTH,\n    alignSelf: 'center',\n    paddingHorizontal: isMobile ? 16 : 24,\n  },\n  statsContainer: {\n    flexDirection: isMobile ? 'column' : 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    marginTop: 24,\n    marginBottom: 32,\n  },\n  statCard: {\n    width: isMobile ? '100%' : '23%',\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    padding: 20,\n    marginBottom: isMobile ? 16 : 0,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n    alignItems: 'center',\n  },\n  statIconContainer: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  statTitle: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginBottom: 4,\n    fontWeight: '500',\n  },\n  statValue: {\n    fontSize: 28,\n    fontWeight: '700',\n    color: '#2c3e50',\n    marginBottom: 4,\n  },\n  statSubtitle: {\n    fontSize: 12,\n    color: '#95a5a6',\n    fontWeight: '400',\n  },\n  section: {\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    padding: isMobile ? 16 : 20,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n  },\n  sectionTitle: {\n    fontSize: isMobile ? 16 : 18,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginBottom: 16,\n  },\n  quickActions: {\n    flexDirection: isMobile ? 'column' : 'row',\n    justifyContent: 'space-between',\n  },\n  quickAction: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa',\n    borderRadius: 8,\n    padding: isMobile ? 14 : 16,\n    marginBottom: isMobile ? 12 : 0,\n    width: isMobile ? '100%' : '48%',\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n  },\n  quickActionIcon: {\n    marginRight: 16,\n  },\n  quickActionText: {\n    fontSize: 14,\n    color: '#2c3e50',\n    fontWeight: '500',\n  },\n  quickActionSubtext: {\n    fontSize: 12,\n    color: '#95a5a6',\n    marginTop: 2,\n  },\n});\n\nexport default PrincipalAdminScreen;","import React, { useState, useEffect, useRef } from 'react';\nimport { \n  View, \n  Text, \n  TouchableOpacity, \n  StyleSheet, \n  Dimensions,\n  Alert,\n  Animated,\n  ScrollView,\n  Platform,\n  BackHandler,\n  I18nManager\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport { useNavigation } from '@react-navigation/native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\n// CONSTANTES\nconst { width, height } = Dimensions.get('window');\nconst MENU_WIDTH = Math.min(width * 0.75, 400); // 75% del ancho o máximo 400px\nconst COLOR_PRIMARIO = '#0062cc';\nconst COLOR_TEXTO = '#333333';\nconst COLOR_TEXTO_SECUNDARIO = '#666666';\nconst IS_RTL = I18nManager.isRTL;\n\nconst menuItems = [\n  {\n    title: 'Equipos',\n    icon: 'devices-other',\n    subItems: [\n      { title: 'Solicitar Préstamo', icon: 'add', route: 'SolicitarPrestamo' },\n      { title: 'Mis Devoluciones', icon: 'assignment-return', route: 'DevolucionesUsuarios' }\n    ]\n  },\n];\n\nconst MenuUsuario = ({ navigation, onClose }) => {\n  const insets = useSafeAreaInsets();\n  const [expandedItem, setExpandedItem] = useState(null);\n  const backPressCount = useRef(0);\n  const menuRef = useRef(null);\n\n  // Animaciones\n  const [animationValues] = useState(() => {\n    const values = {};\n    menuItems.forEach(item => {\n      if (item.subItems) {\n        values[item.title] = new Animated.Value(0);\n      }\n    });\n    return values;\n  });\n\n  // Manejador del botón de retroceso\n  useEffect(() => {\n    const backAction = () => {\n      if (navigation.isFocused()) {\n        if (backPressCount.current === 0) {\n          backPressCount.current += 1;\n          Alert.alert(\n            'Salir',\n            'Presiona nuevamente para salir de la aplicación',\n            [\n              {\n                text: 'Cancelar',\n                onPress: () => (backPressCount.current = 0),\n                style: 'cancel',\n              },\n            ],\n            { cancelable: true }\n          );\n          \n          setTimeout(() => (backPressCount.current = 0), 2000);\n          return true;\n        }\n        BackHandler.exitApp();\n        return true;\n      }\n      return false;\n    };\n\n    const backHandler = BackHandler.addEventListener('hardwareBackPress', backAction);\n    return () => backHandler.remove();\n  }, [navigation]);\n\n  // Control de animaciones\n  useEffect(() => {\n    menuItems.forEach(item => {\n      if (item.subItems) {\n        Animated.timing(animationValues[item.title], {\n          toValue: expandedItem === item.title ? 1 : 0,\n          duration: 250,\n          useNativeDriver: false,\n        }).start();\n      }\n    });\n  }, [expandedItem]);\n\n  const toggleItem = (title) => {\n    setExpandedItem(prev => prev === title ? null : title);\n  };\n\n  const navigateTo = (route) => {\n    if (!route) return;\n    \n    const availableRoutes = navigation.getState()?.routeNames || [];\n    if (availableRoutes.includes(route)) {\n      navigation.navigate(route);\n      if (onClose) onClose();\n    } else {\n      Alert.alert('Ruta no disponible', `La pantalla \"${route}\" no está configurada`);\n    }\n  };\n\n  const handleExitApp = () => {\n    Alert.alert(\n      'Salir de la aplicación',\n      '¿Estás seguro que quieres salir de la aplicación?',\n      [\n        { text: 'Cancelar', style: 'cancel' },\n        { text: 'Salir', onPress: () => BackHandler.exitApp() },\n      ],\n      { cancelable: false }\n    );\n  };\n\n  const renderMenuItem = (item, level = 0) => {\n    const hasSubItems = item.subItems && item.subItems.length > 0;\n    const isExpanded = expandedItem === item.title;\n    const heightAnim = hasSubItems \n      ? animationValues[item.title]?.interpolate({\n          inputRange: [0, 1],\n          outputRange: [0, item.subItems.length * (Platform.OS === 'ios' ? 48 : 46)]\n        })\n      : 0;\n\n    return (\n      <View key={`${item.title}-${level}`} style={[\n        styles.menuItemContainer, \n        level > 0 && styles.subMenuItemContainer,\n        level > 0 && { marginLeft: IS_RTL ? 0 : 20, marginRight: IS_RTL ? 20 : 0 }\n      ]}>\n        <TouchableOpacity\n          style={[\n            styles.menuItem,\n            level > 0 && styles.subMenuItem,\n            isExpanded && !level && styles.activeMenuItem,\n          ]}\n          onPress={() => hasSubItems ? toggleItem(item.title) : navigateTo(item.route)}\n          activeOpacity={0.7}\n        >\n          <Icon \n            name={item.icon} \n            size={22} \n            color={level > 0 ? COLOR_PRIMARIO : isExpanded ? COLOR_PRIMARIO : COLOR_TEXTO} \n            style={[styles.icon, IS_RTL && { transform: [{ scaleX: -1 }] }]} \n          />\n          <Text style={[\n            styles.menuItemText,\n            level > 0 && styles.subMenuItemText,\n            isExpanded && !level && styles.activeMenuItemText,\n          ]}>\n            {item.title}\n          </Text>\n          {hasSubItems && (\n            <Icon \n              name={isExpanded ? 'expand-less' : 'expand-more'} \n              size={22} \n              color={isExpanded ? COLOR_PRIMARIO : COLOR_TEXTO_SECUNDARIO} \n              style={IS_RTL && { transform: [{ scaleX: -1 }] }}\n            />\n          )}\n        </TouchableOpacity>\n\n        {hasSubItems && (\n          <Animated.View style={[styles.subItemsContainer, { height: heightAnim }]}>\n            {item.subItems.map((subItem) => renderMenuItem(subItem, level + 1))}\n          </Animated.View>\n        )}\n      </View>\n    );\n  };\n\n  return (\n    <>\n      {/* Fondo semitransparente para cerrar el menú */}\n      <TouchableOpacity\n        style={styles.overlay}\n        activeOpacity={1}\n        onPress={onClose}\n      />\n      \n      {/* Menú (75% de la pantalla) */}\n      <View \n        ref={menuRef}\n        style={[\n          styles.container, \n          { \n            width: MENU_WIDTH,\n            paddingTop: insets.top, \n            paddingBottom: insets.bottom,\n            [IS_RTL ? 'right' : 'left']: 0,\n          }\n        ]}\n        onStartShouldSetResponder={() => true}\n      >\n        {/* Perfil del usuario */}\n        <View style={styles.profileContainer}>\n          <View style={styles.avatarPlaceholder}>\n            <Icon name=\"person\" size={24} color=\"#fff\" />\n          </View>\n          <View style={styles.profileInfo}>\n            <Text style={styles.userName} numberOfLines={1}>Usuario</Text>\n            <Text style={styles.userRole}>Usuario</Text>\n          </View>\n        </View>\n\n        {/* Menú principal */}\n        <ScrollView \n          style={styles.menuScroll}\n          showsVerticalScrollIndicator={false}\n          contentContainerStyle={styles.menuScrollContent}\n          keyboardShouldPersistTaps=\"handled\"\n        >\n          <View style={styles.menuItems}>\n            {menuItems.map((item) => renderMenuItem(item))}\n          </View>\n        </ScrollView>\n\n        {/* Botón para salir */}\n        <TouchableOpacity \n          style={styles.logoutButton}\n          onPress={handleExitApp}\n          activeOpacity={0.8}\n        >\n          <Icon name=\"exit-to-app\" size={20} color=\"#e53935\" />\n          <Text style={styles.logoutText}>Salir de la aplicación</Text>\n        </TouchableOpacity>\n      </View>\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    zIndex: 99,\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    shadowColor: '#000',\n    shadowOffset: { width: 2, height: 0 },\n    shadowOpacity: 0.2,\n    shadowRadius: 8,\n    elevation: 20,\n    zIndex: 100,\n  },\n  profileContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 20,\n    borderBottomWidth: StyleSheet.hairlineWidth,\n    borderBottomColor: '#e0e0e0',\n  },\n  avatarPlaceholder: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: COLOR_PRIMARIO,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 15,\n  },\n  profileInfo: {\n    flex: 1,\n  },\n  userName: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: COLOR_TEXTO,\n    marginBottom: 3,\n  },\n  userRole: {\n    fontSize: 13,\n    color: COLOR_PRIMARIO,\n    fontWeight: '500',\n  },\n  menuScroll: {\n    flex: 1,\n  },\n  menuScrollContent: {\n    paddingBottom: 10,\n  },\n  menuItems: {\n    paddingVertical: 5,\n  },\n  menuItemContainer: {\n    overflow: 'hidden',\n  },\n  subMenuItemContainer: {\n    backgroundColor: 'rgba(0, 98, 204, 0.05)',\n    borderLeftWidth: IS_RTL ? 0 : 2,\n    borderRightWidth: IS_RTL ? 2 : 0,\n    borderLeftColor: IS_RTL ? 'transparent' : 'rgba(0, 98, 204, 0.2)',\n    borderRightColor: IS_RTL ? 'rgba(0, 98, 204, 0.2)' : 'transparent',\n  },\n  menuItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: Platform.select({ ios: 14, android: 12 }),\n    paddingHorizontal: 20,\n  },\n  subMenuItem: {\n    paddingVertical: Platform.select({ ios: 12, android: 10 }),\n    paddingLeft: IS_RTL ? 20 : 15,\n    paddingRight: IS_RTL ? 15 : 20,\n  },\n  activeMenuItem: {\n    backgroundColor: 'rgba(0, 98, 204, 0.1)',\n  },\n  menuItemText: {\n    flex: 1,\n    fontSize: 15,\n    fontWeight: '500',\n    color: COLOR_TEXTO,\n    marginLeft: 15,\n    textAlign: IS_RTL ? 'right' : 'left',\n  },\n  subMenuItemText: {\n    fontWeight: '400',\n    color: COLOR_TEXTO_SECUNDARIO,\n  },\n  activeMenuItemText: {\n    color: COLOR_PRIMARIO,\n  },\n  icon: {\n    width: 24,\n    textAlign: 'center',\n  },\n  subItemsContainer: {\n    overflow: 'hidden',\n  },\n  logoutButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 18,\n    borderTopWidth: StyleSheet.hairlineWidth,\n    borderTopColor: '#e0e0e0',\n  },\n  logoutText: {\n    fontSize: 15,\n    fontWeight: '500',\n    color: '#e53935',\n    marginLeft: 10,\n  },\n});\n\nexport default MenuUsuario;","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  TouchableOpacity,\r\n  Modal,\r\n  ActivityIndicator,\r\n  Linking,\r\n  StyleSheet,\r\n  Platform,\r\n  SafeAreaView,\r\n} from \"react-native\";\r\nimport { Camera, CameraView } from \"expo-camera\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\n\r\nconst QRScannerModal = ({ visible, onClose, onScan }) => {\r\n  const [hasPermission, setHasPermission] = useState(null);\r\n  const [scanned, setScanned] = useState(false);\r\n  const [cameraReady, setCameraReady] = useState(false);\r\n  const [facing, setFacing] = useState(\"back\");\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    const requestCameraPermission = async () => {\r\n      try {\r\n        // Primero verifica si ya tenemos permisos\r\n        const { status } = await Camera.getCameraPermissionsAsync();\r\n        \r\n        if (status !== 'granted') {\r\n          // Si no tenemos permisos, los solicitamos\r\n          const { status: newStatus } = await Camera.requestCameraPermissionsAsync();\r\n          if (isMounted) setHasPermission(newStatus === 'granted');\r\n        } else {\r\n          if (isMounted) setHasPermission(true);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error al solicitar permisos:\", error);\r\n        if (isMounted) setHasPermission(false);\r\n      }\r\n    };\r\n\r\n    if (visible) {\r\n      requestCameraPermission();\r\n    } else {\r\n      setScanned(false);\r\n    }\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [visible]);\r\n\r\n  const handleBarCodeScanned = ({ data }) => {\r\n    if (!cameraReady || scanned || !data) return;\r\n  \r\n    try {\r\n      // Extraer solo el ID numérico de la URL (si viene en formato URL)\r\n      let equipoId = data;\r\n      \r\n      // Si es una URL, extraemos el ID\r\n      if (data.startsWith('equipos://detalles/')) {\r\n        equipoId = data.split('/').pop(); // Obtiene el último segmento de la URL\r\n      }\r\n  \r\n      // Validar que sea un número\r\n      if (!/^\\d+$/.test(equipoId)) {\r\n        throw new Error('Formato de ID inválido');\r\n      }\r\n  \r\n      setScanned(true);\r\n      onScan(equipoId); // Enviamos solo el ID numérico\r\n      onClose();\r\n    } catch (error) {\r\n      console.error(\"Error al procesar código QR:\", error);\r\n      Alert.alert(\"Error\", \"El código QR escaneado no es válido\");\r\n      setScanned(false); // Permite volver a escanear\r\n    }\r\n  };\r\n\r\n  const handleOpenSettings = async () => {\r\n    await Linking.openSettings();\r\n    onClose();\r\n  };\r\n\r\n  const toggleCameraFacing = () => {\r\n    setFacing(current => (current === \"back\" ? \"front\" : \"back\"));\r\n  };\r\n\r\n  if (!visible) return null;\r\n\r\n  if (hasPermission === null) {\r\n    return (\r\n      <Modal transparent={true} visible={true} onRequestClose={onClose}>\r\n        <View style={styles.permissionContainer}>\r\n          <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\r\n          <Text style={styles.loadingText}>\r\n            Solicitando permiso para la cámara...\r\n          </Text>\r\n        </View>\r\n      </Modal>\r\n    );\r\n  }\r\n\r\n  if (hasPermission === false) {\r\n    return (\r\n      <Modal transparent={true} visible={true} onRequestClose={onClose}>\r\n        <View style={styles.permissionContainer}>\r\n          <MaterialIcons name=\"no-photography\" size={50} color=\"#dc3545\" />\r\n          <Text style={styles.permissionText}>Acceso a la cámara denegado</Text>\r\n          <Text style={styles.permissionHint}>\r\n            Por favor habilita los permisos de cámara en la configuración de tu\r\n            dispositivo\r\n          </Text>\r\n          <TouchableOpacity style={styles.button} onPress={handleOpenSettings}>\r\n            <Text style={styles.buttonText}>Abrir Configuración</Text>\r\n          </TouchableOpacity>\r\n          <TouchableOpacity style={styles.cancelButton} onPress={onClose}>\r\n            <Text style={styles.cancelButtonText}>Cancelar</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </Modal>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      animationType=\"slide\"\r\n      transparent={false}\r\n      visible={visible}\r\n      onRequestClose={onClose}\r\n      statusBarTranslucent={true}\r\n    >\r\n      <SafeAreaView style={styles.container}>\r\n        <CameraView\r\n          style={StyleSheet.absoluteFillObject}\r\n          facing={facing}\r\n          onBarcodeScanned={scanned ? undefined : handleBarCodeScanned}\r\n          onCameraReady={() => setCameraReady(true)}\r\n          barcodeScannerSettings={{\r\n            barcodeTypes: [\"qr\"],\r\n          }}\r\n        >\r\n          <View style={styles.overlay}>\r\n            <View style={styles.frame}>\r\n              <View style={styles.cornerTopLeft} />\r\n              <View style={styles.cornerTopRight} />\r\n              <View style={styles.cornerBottomLeft} />\r\n              <View style={styles.cornerBottomRight} />\r\n            </View>\r\n            <Text style={styles.scanText}>Escanea el código QR del equipo</Text>\r\n          </View>\r\n        </CameraView>\r\n\r\n        <TouchableOpacity style={styles.closeButton} onPress={onClose}>\r\n          <MaterialIcons name=\"close\" size={30} color=\"white\" />\r\n        </TouchableOpacity>\r\n\r\n        <TouchableOpacity\r\n          style={styles.flipButton}\r\n          onPress={toggleCameraFacing}\r\n        >\r\n          <MaterialIcons name=\"flip-camera-ios\" size={30} color=\"white\" />\r\n        </TouchableOpacity>\r\n      </SafeAreaView>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"black\",\r\n  },\r\n  permissionContainer: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"rgba(0,0,0,0.7)\",\r\n    padding: 20,\r\n  },\r\n  loadingText: {\r\n    color: \"white\",\r\n    marginTop: 20,\r\n    fontSize: 16,\r\n  },\r\n  permissionText: {\r\n    color: \"white\",\r\n    fontSize: 20,\r\n    fontWeight: \"bold\",\r\n    marginTop: 20,\r\n    textAlign: \"center\",\r\n  },\r\n  permissionHint: {\r\n    color: \"white\",\r\n    fontSize: 16,\r\n    marginTop: 10,\r\n    textAlign: \"center\",\r\n    paddingHorizontal: 30,\r\n  },\r\n  button: {\r\n    backgroundColor: \"#4a6da7\",\r\n    padding: 15,\r\n    borderRadius: 10,\r\n    marginTop: 30,\r\n    width: \"80%\",\r\n    alignItems: \"center\",\r\n  },\r\n  buttonText: {\r\n    color: \"white\",\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n  },\r\n  cancelButton: {\r\n    padding: 15,\r\n    marginTop: 15,\r\n    width: \"80%\",\r\n    alignItems: \"center\",\r\n  },\r\n  cancelButtonText: {\r\n    color: \"white\",\r\n    fontSize: 16,\r\n  },\r\n  overlay: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"rgba(0,0,0,0.5)\",\r\n  },\r\n  frame: {\r\n    width: 250,\r\n    height: 250,\r\n    position: \"relative\",\r\n    marginBottom: 30,\r\n  },\r\n  cornerTopLeft: {\r\n    position: \"absolute\",\r\n    top: 0,\r\n    left: 0,\r\n    width: 50,\r\n    height: 50,\r\n    borderLeftWidth: 4,\r\n    borderTopWidth: 4,\r\n    borderColor: \"white\",\r\n  },\r\n  cornerTopRight: {\r\n    position: \"absolute\",\r\n    top: 0,\r\n    right: 0,\r\n    width: 50,\r\n    height: 50,\r\n    borderRightWidth: 4,\r\n    borderTopWidth: 4,\r\n    borderColor: \"white\",\r\n  },\r\n  cornerBottomLeft: {\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    left: 0,\r\n    width: 50,\r\n    height: 50,\r\n    borderLeftWidth: 4,\r\n    borderBottomWidth: 4,\r\n    borderColor: \"white\",\r\n  },\r\n  cornerBottomRight: {\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    right: 0,\r\n    width: 50,\r\n    height: 50,\r\n    borderRightWidth: 4,\r\n    borderBottomWidth: 4,\r\n    borderColor: \"white\",\r\n  },\r\n  scanText: {\r\n    color: \"white\",\r\n    fontSize: 16,\r\n    marginTop: 20,\r\n  },\r\n  closeButton: {\r\n    position: \"absolute\",\r\n    top: Platform.OS === \"ios\" ? 50 : 30,\r\n    right: 20,\r\n    backgroundColor: \"rgba(0,0,0,0.5)\",\r\n    borderRadius: 20,\r\n    padding: 10,\r\n  },\r\n  flipButton: {\r\n    position: \"absolute\",\r\n    top: Platform.OS === \"ios\" ? 50 : 30,\r\n    left: 20,\r\n    backgroundColor: \"rgba(0,0,0,0.5)\",\r\n    borderRadius: 20,\r\n    padding: 10,\r\n  },\r\n});\r\n\r\nexport default QRScannerModal;","import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  Text, \n  StyleSheet, \n  TouchableOpacity, \n  Modal, \n  FlatList, \n  TextInput, \n  ActivityIndicator, \n  Alert, \n  ScrollView,\n  SafeAreaView,\n  StatusBar,\n  Platform\n} from 'react-native';\nimport { MaterialIcons, FontAwesome } from '@expo/vector-icons';\nimport { supabase } from '../lib/supabase';\nimport MenuUsuario from '../components/MenuUsuario';\nimport QRScannerModal from '../components/QRScannerModal';\n\nconst SolicitarPrestamoUsuario = ({ navigation }) => {\n  // Estados para datos y carga\n  const [categorias, setCategorias] = useState([]);\n  const [equiposDisponibles, setEquiposDisponibles] = useState([]);\n  const [personalDisponible, setPersonalDisponible] = useState([]);\n  const [loading, setLoading] = useState(true);\n  \n  // Estados para modales y selecciones\n  const [modalEquiposVisible, setModalEquiposVisible] = useState(false);\n  const [modalPersonalVisible, setModalPersonalVisible] = useState(false);\n  const [scannerVisible, setScannerVisible] = useState(false);\n  const [menuVisible, setMenuVisible] = useState(false);\n  \n  // Estados para búsqueda y selección\n  const [searchTerm, setSearchTerm] = useState('');\n  const [categoriaSeleccionada, setCategoriaSeleccionada] = useState(null);\n  const [equipoSeleccionado, setEquipoSeleccionado] = useState(null);\n  const [personalSeleccionado, setPersonalSeleccionado] = useState(null);\n  const [equipoPreseleccionado, setEquipoPreseleccionado] = useState(null);\n  const [personalPreseleccionado, setPersonalPreseleccionado] = useState(null);\n\n  // Cargar datos iniciales\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        \n        // Obtener categorías\n        const { data: categoriasData, error: errorCategorias } = await supabase\n          .from('categoriasequipos')\n          .select('*')\n          .eq('estado', 'activo')\n          .order('nombrecategoria', { ascending: true });\n        \n        if (errorCategorias) throw errorCategorias;\n        setCategorias(categoriasData || []);\n        \n        // Obtener personal\n        const { data: personalData, error: errorPersonal } = await supabase\n          .from('personal')\n          .select('idpersonal, nombre_completo, tipo_persona, estado')\n          .eq('estado', 'activo')\n          .order('nombre_completo', { ascending: true });\n        \n        if (errorPersonal) throw errorPersonal;\n        setPersonalDisponible(personalData || []);\n        \n      } catch (error) {\n        console.error('Error cargando datos:', error);\n        Alert.alert('Error', 'No se pudieron cargar los datos iniciales');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    const unsubscribe = navigation.addListener('focus', fetchData);\n    return unsubscribe;\n  }, [navigation]);\n\n  // Manejar selección de categoría\n  const handleCategoriaPress = async (categoria) => {\n    try {\n      setLoading(true);\n      setEquipoPreseleccionado(null);\n      \n      const { data: equiposData, error } = await supabase\n        .from('equipos')\n        .select(`\n          idequipo, \n          nombreequipo, \n          estado, \n          idcategoria, \n          descripcion,\n          categoriasequipos(nombrecategoria)\n        `)\n        .eq('idcategoria', categoria.idcategoria)\n        .order('nombreequipo', { ascending: true });\n  \n      if (error) throw error;\n  \n      if (!equiposData || equiposData.length === 0) {\n        Alert.alert(\n          'Sin equipos', \n          `No hay equipos registrados en la categoría \"${categoria.nombrecategoria}\"`\n        );\n        return;\n      }\n  \n      setEquiposDisponibles(equiposData);\n      setCategoriaSeleccionada(categoria);\n      setModalEquiposVisible(true);\n  \n    } catch (error) {\n      console.error('Error:', error);\n      Alert.alert('Error', 'Falló al cargar equipos');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Manejar selección de equipo\n  const handleEquipoSeleccionado = (equipo) => {\n    if (!equipo) return;\n    \n    setEquipoSeleccionado(equipo);\n    setEquipoPreseleccionado(null);\n    setModalEquiposVisible(false);\n    setPersonalPreseleccionado(null);\n    setModalPersonalVisible(true);\n  };\n\n  // Manejar selección de personal\n  const handlePersonalSeleccionado = (persona) => {\n    if (!persona) return;\n    \n    setPersonalSeleccionado(persona);\n    setPersonalPreseleccionado(null);\n    setModalPersonalVisible(false);\n    confirmarPrestamo();\n  };\n\n  // Manejar escaneo QR\n  const handleScan = async (qrData) => {\n    try {\n      setLoading(true);\n      setScannerVisible(false);\n      \n      const equipoId = qrData.split('/').pop();\n      \n      const { data: equipoData, error } = await supabase\n        .from('equipos')\n        .select('*, categoriasequipos(*)')\n        .eq('idequipo', equipoId)\n        .single();\n      \n      if (error || !equipoData) {\n        throw error || new Error('Equipo no encontrado');\n      }\n      \n      navigation.navigate('DetallesEquipo', { \n        equipoId: equipoData.idequipo,\n        equipo: equipoData,\n        categoria: equipoData.categoriasequipos \n      });\n      \n    } catch (error) {\n      console.error('Error al buscar equipo:', error);\n      Alert.alert('Error', 'No se pudo encontrar el equipo escaneado');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Confirmar préstamo\n  const confirmarPrestamo = () => {\n    if (!equipoSeleccionado || !personalSeleccionado) {\n      Alert.alert('Error', 'Debe seleccionar tanto el equipo como el personal');\n      return;\n    }\n\n    Alert.alert(\n      'Confirmar préstamo',\n      `¿Desea registrar el préstamo de:\\n\\nEquipo: ${equipoSeleccionado.nombreequipo}\\nA: ${personalSeleccionado.nombre_completo}?`,\n      [\n        { text: 'Cancelar', style: 'cancel' },\n        { text: 'Confirmar', onPress: registrarPrestamo }\n      ]\n    );\n  };\n\n  // Registrar préstamo en Supabase\n  const registrarPrestamo = async () => {\n    if (!equipoSeleccionado || !personalSeleccionado) return;\n    \n    setLoading(true);\n    try {\n      // Verificar estado del equipo\n      const { data: equipoVerificado, error: errorVerificacion } = await supabase\n        .from('equipos')\n        .select('estado')\n        .eq('idequipo', equipoSeleccionado.idequipo)\n        .single();\n  \n      if (errorVerificacion || !equipoVerificado) {\n        throw new Error('No se pudo verificar el estado del equipo');\n      }\n  \n      if (equipoVerificado.estado !== 'disponible') {\n        throw new Error(`El equipo no está disponible (Estado actual: ${equipoVerificado.estado})`);\n      }\n  \n      // Registrar préstamo\n      const { data: newPrestamo, error: errorPrestamo } = await supabase\n        .from('prestamos')\n        .insert({\n          idpersonal: personalSeleccionado.idpersonal,\n          idequipo: equipoSeleccionado.idequipo,\n          estado: 'Prestado',\n          fechaprestamo: new Date().toISOString(),\n          fechadevolucion_prevista: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString()\n        })\n        .select('*')\n        .single();\n  \n      if (errorPrestamo || !newPrestamo) {\n        throw errorPrestamo || new Error('No se pudo crear el préstamo');\n      }\n  \n      // Actualizar estado del equipo\n      const { error: errorEquipo } = await supabase\n        .from('equipos')\n        .update({ \n          estado: 'prestado',\n          fechaactualizacion: new Date().toISOString() \n        })\n        .eq('idequipo', equipoSeleccionado.idequipo);\n  \n      if (errorEquipo) throw errorEquipo;\n  \n      // Registrar en historial\n      const { error: errorHistorial } = await supabase\n        .from('historial_prestamos')\n        .insert({\n          idprestamo: newPrestamo.idprestamo,\n          idpersonal: personalSeleccionado.idpersonal,\n          accion: 'Préstamo',\n          fechaaccion: new Date().toISOString(),\n          detalles: `Préstamo del equipo ${equipoSeleccionado.nombreequipo} a ${personalSeleccionado.nombre_completo}`\n        });\n  \n      if (errorHistorial) throw errorHistorial;\n  \n      Alert.alert(\n        'Éxito', \n        `Préstamo registrado:\\n\\nEquipo: ${equipoSeleccionado.nombreequipo}\\nPersona: ${personalSeleccionado.nombre_completo}`,\n        [{ text: 'OK', onPress: resetForm }]\n      );\n      \n    } catch (error) {\n      console.error('Error registrando préstamo:', error);\n      Alert.alert(\n        'Error', \n        error.message || 'No se pudo registrar el préstamo'\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Resetear formulario\n  const resetForm = () => {\n    setEquipoSeleccionado(null);\n    setPersonalSeleccionado(null);\n    setCategoriaSeleccionada(null);\n    setSearchTerm('');\n    setEquipoPreseleccionado(null);\n    setPersonalPreseleccionado(null);\n  };\n\n  // Filtrar personal según búsqueda\n  const filteredPersonal = personalDisponible.filter(persona =>\n    persona.nombre_completo.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  // Renderizar categorías\n  const renderCategoriaCard = ({ item }) => (\n    <TouchableOpacity \n      style={styles.card} \n      onPress={() => handleCategoriaPress(item)}\n      disabled={loading}\n      activeOpacity={0.7}\n    >\n      <View style={styles.cardHeader}>\n        <MaterialIcons \n          name=\"category\" \n          size={24} \n          color={item.estado === 'activo' ? '#4a6da7' : '#6c757d'} \n        />\n        <Text style={styles.cardTitle}>{item.nombrecategoria}</Text>\n      </View>\n      <Text style={styles.cardDescription}>{item.descripcion}</Text>\n      <View style={styles.cardFooter}>\n        <Text style={styles.disponibleText}>\n          {item.estado === 'activo' ? 'Categoría activa' : 'Categoría inactiva'}\n        </Text>\n        <FontAwesome name=\"chevron-right\" size={16} color=\"#4a6da7\" />\n      </View>\n    </TouchableOpacity>\n  );\n\n  // Renderizar equipos\n  const renderEquipoItem = ({ item }) => (\n    <TouchableOpacity \n      style={[\n        styles.listItem,\n        item.estado !== 'disponible' && styles.itemDisabled,\n        equipoPreseleccionado?.idequipo === item.idequipo && styles.itemPreselected\n      ]}\n      onPress={() => {\n        if (item.estado === 'disponible') {\n          setEquipoPreseleccionado(item);\n        }\n      }}\n      onLongPress={() => {\n        if (item.estado === 'disponible') {\n          handleEquipoSeleccionado(item);\n        }\n      }}\n      disabled={item.estado !== 'disponible'}\n      activeOpacity={0.7}\n    >\n      <View style={styles.equipoInfo}>\n        <Text style={[\n          styles.listItemTitle,\n          equipoPreseleccionado?.idequipo === item.idequipo && styles.selectedText\n        ]}>\n          {item.nombreequipo}\n        </Text>\n        <Text style={styles.listItemText}>\n          <Text style={styles.label}>Categoría: </Text>\n          {item.categoriasequipos?.nombrecategoria || 'General'}\n        </Text>\n        {item.descripcion && (\n          <Text style={styles.listItemText}>{item.descripcion}</Text>\n        )}\n      </View>\n      \n      <View style={[\n        styles.statusBadge,\n        { backgroundColor: item.estado === 'disponible' ? '#e6f7ee' : '#fff0f0' }\n      ]}>\n        <Text style={[\n          styles.statusText,\n          { color: item.estado === 'disponible' ? '#28a745' : '#dc3545' }\n        ]}>\n          {item.estado.toUpperCase()}\n        </Text>\n      </View>\n    </TouchableOpacity>\n  );\n\n  // Renderizar personal\n  const renderPersonalItem = ({ item }) => (\n    <TouchableOpacity \n      style={[\n        styles.listItem,\n        personalPreseleccionado?.idpersonal === item.idpersonal && styles.itemPreselected,\n        personalSeleccionado?.idpersonal === item.idpersonal && styles.itemSelected,\n        item.estado === 'inactivo' && styles.itemDisabled\n      ]} \n      onPress={() => {\n        if (item.estado === 'activo') {\n          setPersonalPreseleccionado(item);\n        }\n      }}\n      onLongPress={() => {\n        if (item.estado === 'activo') {\n          handlePersonalSeleccionado(item);\n        }\n      }}\n      disabled={item.estado === 'inactivo'}\n      activeOpacity={0.7}\n    >\n      <View>\n        <Text style={[\n          styles.listItemText,\n          (personalPreseleccionado?.idpersonal === item.idpersonal || \n           personalSeleccionado?.idpersonal === item.idpersonal) && styles.selectedText\n        ]}>\n          {item.nombre_completo}\n        </Text>\n        <Text style={styles.listItemSubText}>{item.tipo_persona}</Text>\n      </View>\n      <MaterialIcons \n        name=\"person\" \n        size={24} \n        color={\n          item.estado === 'inactivo' ? '#ced4da' :\n          (personalPreseleccionado?.idpersonal === item.idpersonal ||\n           personalSeleccionado?.idpersonal === item.idpersonal) ? '#4a6da7' : '#adb5bd'\n        } \n      />\n    </TouchableOpacity>\n  );\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <StatusBar barStyle=\"dark-content\" backgroundColor=\"#f8f9fa\" />\n      \n      {/* Menú lateral con overlay */}\n      {menuVisible && (\n        <MenuUsuario \n          navigation={navigation} \n          onClose={() => setMenuVisible(false)} \n        />\n      )}\n\n      {/* Contenido principal */}\n      <View style={[\n        styles.container,\n        menuVisible && styles.contentWithMenuOpen\n      ]}>\n        {/* Header */}\n        <View style={styles.header}>\n          <TouchableOpacity \n            onPress={() => setMenuVisible(true)} \n            style={styles.menuButton} \n            activeOpacity={0.7}\n          >\n            <MaterialIcons name=\"menu\" size={28} color=\"#4a6da7\" />\n          </TouchableOpacity>\n          \n          <Text style={styles.headerTitle}>Préstamos Directos</Text>\n          \n          <TouchableOpacity \n            onPress={() => setScannerVisible(true)}\n            style={styles.scanButton}\n            disabled={loading}\n            activeOpacity={0.7}\n          >\n            <MaterialIcons \n              name=\"qr-code-scanner\" \n              size={28} \n              color={loading ? '#adb5bd' : '#4a6da7'} \n            />\n          </TouchableOpacity>\n        </View>\n\n        {/* Listado de categorías */}\n        <ScrollView contentContainerStyle={styles.listContainer}>\n          {loading && categorias.length === 0 ? (\n            <View style={styles.loadingContainer}>\n              <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\n              <Text style={styles.loadingText}>Cargando datos...</Text>\n            </View>\n          ) : categorias.length === 0 ? (\n            <View style={styles.emptyContainer}>\n              <MaterialIcons name=\"error-outline\" size={50} color=\"#6c757d\" />\n              <Text style={styles.emptyText}>No hay categorías disponibles</Text>\n            </View>\n          ) : (\n            <>\n              <Text style={styles.sectionTitle}>Seleccione una categoría:</Text>\n              <FlatList\n                data={categorias}\n                renderItem={renderCategoriaCard}\n                keyExtractor={(item) => item.idcategoria.toString()}\n                scrollEnabled={false}\n              />\n            </>\n          )}\n        </ScrollView>\n\n        {/* Modal para selección de equipos */}\n        <Modal\n          animationType=\"slide\"\n          transparent={false}\n          visible={modalEquiposVisible}\n          onRequestClose={() => {\n            setEquipoPreseleccionado(null);\n            setModalEquiposVisible(false);\n          }}\n        >\n          <View style={styles.modalContainer}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>Seleccionar equipo</Text>\n              <Text style={styles.modalSubtitle}>{categoriaSeleccionada?.nombrecategoria || 'Categoría no especificada'}</Text>\n            </View>\n            \n            {loading ? (\n              <View style={styles.loadingContainer}>\n                <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\n                <Text style={styles.loadingText}>Buscando equipos...</Text>\n              </View>\n            ) : equiposDisponibles.length === 0 ? (\n              <View style={styles.emptyContainer}>\n                <MaterialIcons name=\"error-outline\" size={50} color=\"#6c757d\" />\n                <Text style={styles.emptyText}>No hay equipos disponibles en esta categoría</Text>\n              </View>\n            ) : (\n              <>\n                <FlatList\n                  data={equiposDisponibles}\n                  renderItem={renderEquipoItem}\n                  keyExtractor={(item) => item.idequipo.toString()}\n                  contentContainerStyle={{ paddingBottom: 15 }}\n                />\n                <View style={styles.confirmationContainer}>\n                  <TouchableOpacity \n                    style={[\n                      styles.confirmButton,\n                      !equipoPreseleccionado && styles.buttonDisabled\n                    ]}\n                    onPress={() => equipoPreseleccionado && handleEquipoSeleccionado(equipoPreseleccionado)}\n                    disabled={!equipoPreseleccionado}\n                    activeOpacity={0.7}\n                  >\n                    <Text style={styles.confirmButtonText}>\n                      {equipoPreseleccionado ? `Confirmar ${equipoPreseleccionado.nombreequipo}` : 'Seleccione un equipo'}\n                    </Text>\n                  </TouchableOpacity>\n                </View>\n              </>\n            )}\n            \n            <TouchableOpacity \n              style={styles.cancelButton}\n              onPress={() => {\n                setEquipoPreseleccionado(null);\n                setModalEquiposVisible(false);\n              }}\n              activeOpacity={0.7}\n            >\n              <Text style={styles.cancelButtonText}>Volver a categorías</Text>\n            </TouchableOpacity>\n          </View>\n        </Modal>\n\n        {/* Modal para selección de personal */}\n        <Modal\n          animationType=\"slide\"\n          transparent={false}\n          visible={modalPersonalVisible}\n          onRequestClose={() => {\n            setPersonalPreseleccionado(null);\n            setModalPersonalVisible(false);\n          }}\n        >\n          <View style={styles.modalContainer}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>Asignar a persona</Text>\n              <Text style={styles.modalSubtitle}>Seleccione el beneficiario</Text>\n              {equipoSeleccionado && (\n                <Text style={styles.modalSubtitle}>Equipo: {equipoSeleccionado.nombreequipo}</Text>\n              )}\n            </View>\n            \n            <TextInput\n              style={styles.searchInput}\n              placeholder=\"Buscar personal...\"\n              placeholderTextColor=\"#6c757d\"\n              value={searchTerm}\n              onChangeText={setSearchTerm}\n            />\n            \n            {loading ? (\n              <View style={styles.loadingContainer}>\n                <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\n                <Text style={styles.loadingText}>Cargando personal...</Text>\n              </View>\n            ) : filteredPersonal.length === 0 ? (\n              <View style={styles.emptyContainer}>\n                <MaterialIcons name=\"person-off\" size={50} color=\"#6c757d\" />\n                <Text style={styles.emptyText}>\n                  {searchTerm ? 'No se encontraron coincidencias' : 'No hay personal disponible'}\n                </Text>\n              </View>\n            ) : (\n              <>\n                <FlatList\n                  data={filteredPersonal}\n                  renderItem={renderPersonalItem}\n                  keyExtractor={(item) => item.idpersonal.toString()}\n                  contentContainerStyle={{ paddingBottom: 15 }}\n                />\n                <View style={styles.confirmationContainer}>\n                  <TouchableOpacity \n                    style={[\n                      styles.confirmButton,\n                      !personalPreseleccionado && styles.buttonDisabled\n                    ]}\n                    onPress={() => personalPreseleccionado && handlePersonalSeleccionado(personalPreseleccionado)}\n                    disabled={!personalPreseleccionado}\n                    activeOpacity={0.7}\n                  >\n                    <Text style={styles.confirmButtonText}>\n                      {personalPreseleccionado ? `Confirmar ${personalPreseleccionado.nombre_completo}` : 'Seleccione una persona'}\n                    </Text>\n                  </TouchableOpacity>\n                </View>\n              </>\n            )}\n            \n            <TouchableOpacity \n              style={styles.cancelButton}\n              onPress={() => {\n                setPersonalPreseleccionado(null);\n                setModalPersonalVisible(false);\n              }}\n              activeOpacity={0.7}\n            >\n              <Text style={styles.cancelButtonText}>Cancelar préstamo</Text>\n            </TouchableOpacity>\n          </View>\n        </Modal>\n\n        {/* Modal para escanear QR */}\n        <QRScannerModal\n          visible={scannerVisible}\n          onClose={() => setScannerVisible(false)}\n          onScan={handleScan}\n        />\n\n        {/* Overlay de carga */}\n        {loading && (\n          <View style={styles.loadingOverlay}>\n            <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\n            <Text style={styles.loadingText}>Procesando...</Text>\n          </View>\n        )}\n      </View>\n    </SafeAreaView>\n  );\n};\n\n// Estilos\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  contentWithMenuOpen: {\n    opacity: 0.8,\n    transform: [{ scale: 0.95 }],\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 15,\n    backgroundColor: 'white',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    zIndex: 1,\n  },\n  menuButton: {\n    padding: 8,\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: '#343a40',\n  },\n  scanButton: {\n    padding: 8,\n  },\n  sectionTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#4a6da7',\n    marginBottom: 10,\n    paddingHorizontal: 15,\n  },\n  listContainer: {\n    padding: 15,\n    flexGrow: 1,\n  },\n  card: {\n    backgroundColor: 'white',\n    borderRadius: 10,\n    padding: 20,\n    marginBottom: 15,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 10,\n  },\n  cardTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#495057',\n    marginLeft: 10,\n  },\n  cardDescription: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginBottom: 15,\n  },\n  cardFooter: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    borderTopWidth: 1,\n    borderTopColor: '#e9ecef',\n    paddingTop: 15,\n  },\n  disponibleText: {\n    fontSize: 14,\n    color: '#28a745',\n    fontWeight: '500',\n  },\n  modalContainer: {\n    flex: 1,\n    backgroundColor: 'white',\n    paddingHorizontal: 15,\n    paddingTop: 20,\n  },\n  modalHeader: {\n    marginBottom: 20,\n    paddingBottom: 10,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e9ecef',\n  },\n  modalTitle: {\n    fontSize: 22,\n    fontWeight: '600',\n    color: '#343a40',\n  },\n  modalSubtitle: {\n    fontSize: 16,\n    color: '#6c757d',\n    marginTop: 5,\n  },\n  listItem: {\n    padding: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e9ecef',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    backgroundColor: 'white',\n  },\n  itemSelected: {\n    backgroundColor: '#f0f7ff',\n    borderLeftWidth: 4,\n    borderLeftColor: '#4a6da7',\n  },\n  itemPreselected: {\n    backgroundColor: '#e6f3ff',\n    borderLeftWidth: 4,\n    borderLeftColor: '#8ab6f9',\n  },\n  itemDisabled: {\n    opacity: 0.6,\n  },\n  listItemText: {\n    fontSize: 16,\n    color: '#495057',\n    fontWeight: '500',\n  },\n  selectedText: {\n    fontWeight: 'bold',\n    color: '#2c5282',\n  },\n  listItemSubText: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginTop: 3,\n  },\n  listItemTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#343a40',\n    marginBottom: 5,\n  },\n  label: {\n    color: '#6c757d',\n    fontWeight: 'normal',\n  },\n  equipoInfo: {\n    flex: 1,\n  },\n  statusBadge: {\n    paddingHorizontal: 10,\n    paddingVertical: 5,\n    borderRadius: 15,\n    alignSelf: 'flex-start',\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: 'bold',\n  },\n  searchInput: {\n    height: 50,\n    borderColor: '#ced4da',\n    borderWidth: 1,\n    borderRadius: 8,\n    paddingHorizontal: 15,\n    marginBottom: 15,\n    fontSize: 16,\n    color: '#495057',\n    backgroundColor: 'white',\n  },\n  cancelButton: {\n    backgroundColor: '#e9ecef',\n    padding: 15,\n    borderRadius: 8,\n    alignItems: 'center',\n    marginVertical: 15,\n  },\n  cancelButtonText: {\n    color: '#495057',\n    fontSize: 16,\n    fontWeight: '500',\n  },\n  confirmationContainer: {\n    paddingVertical: 15,\n    borderTopWidth: 1,\n    borderTopColor: '#e2e8f0',\n  },\n  confirmButton: {\n    backgroundColor: '#4299e1',\n    padding: 15,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  buttonDisabled: {\n    backgroundColor: '#a0aec0',\n  },\n  confirmButtonText: {\n    color: 'white',\n    fontWeight: 'bold',\n    fontSize: 16,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: '#6c757d',\n    marginTop: 15,\n    textAlign: 'center',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: 10,\n    fontSize: 16,\n    color: '#6c757d',\n  },\n  loadingOverlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: 'rgba(255, 255, 255, 0.9)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 10,\n  },\n});\n\nexport default SolicitarPrestamoUsuario;","import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  Text, \n  TouchableOpacity, \n  StyleSheet, \n  Dimensions,\n  Alert,\n  ActivityIndicator,\n  Image,\n  Animated,\n  ScrollView,\n  Platform\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../lib/supabase';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst COLOR_PRIMARIO = '#0062cc';\nconst COLOR_SECUNDARIO = '#004ba0';\nconst COLOR_TEXTO = '#333333';\nconst COLOR_TEXTO_SECUNDARIO = '#666666';\n\nconst menuItems = [\n  {\n    title: 'Inicio',\n    icon: 'home',\n    route: 'PrincipalAdmin'\n  },\n  {\n    title: 'Gestión de Equipos',\n    icon: 'inventory',\n    subItems: [\n      { title: 'Préstamos', icon: 'assignment', route: 'Prestamos' },\n      { title: 'Reporte de préstamos', icon: 'history', route: 'HistorialPrestamos' },\n      { title: 'Devoluciones', icon: 'keyboard-return', route: 'Devoluciones' }\n    ]\n  },\n  {\n    title: 'Mantenimiento',\n    icon: 'build',\n    subItems: [\n      { title: 'Registrar mantenimiento', icon: 'add-task', route: 'AgregarMantenimiento' },\n      { title: 'Devolver del mantenimiento', icon: 'refresh', route: 'DevolverMantenimiento' },\n      { title: 'Reporte de mantenimiento', icon: 'description', route: 'ReporteMantenimiento' }\n    ]\n  },\n  {\n    title: 'Usuarios',\n    icon: 'people',\n    subItems: [\n      {title: 'Agregar admin', icon: 'person-add-alt', route: 'AgregarAdmin'},\n      { title: 'Agregar usuarios', icon: 'person-add', route: 'AgregarUsuarios' },\n      { title: 'Modificar usuarios', icon: 'edit', route: 'ModificarUsuarios' },\n      { title: 'Ver usuarios', icon: 'list', route: 'VerUsuarios' }\n    ]\n  },\n  {\n    title: 'Control de Equipos',\n    icon: 'devices-other',\n    subItems: [\n      { title: 'Agregar Equipos', icon: 'add', route: 'AgregarEquipos' },\n      { title: 'Modificar Equipos', icon: 'edit', route: 'ModificarEquipos' },\n      { title: 'Ver Equipos', icon: 'search', route: 'VerEquipos' }\n    ]\n  },\n  {\n    title: 'Categorías',\n    icon: 'category',\n    subItems: [\n      { title: 'Agregar Categorías', icon: 'settings', route: 'AgregarCategorias' },\n      { title: 'Ver categorías', icon: 'visibility', route: 'VerCategorias' }\n    ]\n  },\n  {\n    title: 'Extras',\n    icon: 'extension',\n    subItems: [\n      { title: 'Sanciones', icon: 'warning', route: 'Sanciones' },\n      { title: 'Manual Administrador', icon: 'menu-book', route: 'Manual' }\n    ]\n  }\n];\n\nconst MenuAdmin = ({ navigation }) => {\n  const insets = useSafeAreaInsets();\n  const [expandedItem, setExpandedItem] = useState(null);\n  const [userData, setUserData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [animationValues] = useState(() => {\n    const values = {};\n    menuItems.forEach(item => {\n      if (item.subItems) {\n        values[item.title] = new Animated.Value(0);\n      }\n    });\n    return values;\n  });\n\n  useEffect(() => {\n    const fetchUserData = async () => {\n      try {\n        const { data: { session }, error: sessionError } = await supabase.auth.getSession();\n        \n        if (sessionError || !session) {\n          navigation.reset({\n            index: 0,\n            routes: [{ name: 'Login' }],\n          });\n          return;\n        }\n        \n        const { data, error } = await supabase\n          .from('usuarios')\n          .select('nombreusuario, email, rol, fotoperfil')\n          .eq('idusuario', session.user.id)\n          .single();\n          \n        if (error) throw error;\n        \n        setUserData({\n          name: data?.nombreusuario || session.user.email,\n          email: data?.email || session.user.email,\n          role: data?.rol || 'usuario',\n          avatar: data?.fotoperfil || null\n        });\n        \n      } catch (error) {\n        Alert.alert(\n          'Error', \n          'No se pudieron cargar los datos del usuario. Por favor, reinicie la aplicación.'\n        );\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchUserData();\n\n    return () => {\n      console.log('Componente MenuAdmin desmontado');\n    };\n  }, []);\n\n  const toggleItem = (title) => {\n    setExpandedItem(prev => prev === title ? null : title);\n  };\n\n  const animateItem = (title, toValue) => {\n    if (animationValues[title]) {\n      Animated.timing(animationValues[title], {\n        toValue,\n        duration: 250,\n        useNativeDriver: false,\n      }).start();\n    }\n  };\n\n  useEffect(() => {\n    menuItems.forEach(item => {\n      if (item.subItems) {\n        animateItem(item.title, expandedItem === item.title ? 1 : 0);\n      }\n    });\n  }, [expandedItem]);\n\n  const navigateTo = (route) => {\n    if (!route) return;\n    \n    try {\n      const availableRoutes = navigation.getState()?.routeNames || [];\n      \n      if (availableRoutes.includes(route)) {\n        navigation.navigate(route);\n        navigation.closeDrawer();\n      } else {\n        Alert.alert(\n          'Ruta no disponible',\n          `La pantalla \"${route}\" no está configurada en la aplicación.`\n        );\n      }\n    } catch (error) {\n      console.error('Error al navegar:', error);\n      Alert.alert('Error', 'Ocurrió un problema al intentar navegar');\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      const { error } = await supabase.auth.signOut();\n      if (error) throw error;\n      \n      // Solución universal para navegación post-logout\n      if (Platform.OS === 'web') {\n        // Para web, redirigimos directamente a la página de login\n        window.location.href = '/login';\n      } else {\n        // Para móvil, usamos la navegación de React Navigation\n        let rootNavigation = navigation;\n        while (rootNavigation.getParent()) {\n          rootNavigation = rootNavigation.getParent();\n        }\n        \n        rootNavigation.reset({\n          index: 0,\n          routes: [{ name: 'Login' }],\n        });\n      }\n      \n    } catch (error) {\n      Alert.alert('Error', 'No se pudo cerrar la sesión');\n      console.error('Error al cerrar sesión:', error);\n    }\n  };\n\n  const renderMenuItem = (item, level = 0) => {\n    const hasSubItems = item.subItems && item.subItems.length > 0;\n    const isExpanded = expandedItem === item.title;\n    const heightAnim = hasSubItems \n      ? animationValues[item.title]?.interpolate({\n          inputRange: [0, 1],\n          outputRange: [0, item.subItems.length * (Platform.OS === 'ios' ? 48 : 46)]\n        })\n      : 0;\n\n    return (\n      <View key={`${item.title}-${level}`} style={[\n        styles.menuItemContainer, \n        level > 0 && styles.subMenuItemContainer\n      ]}>\n        <TouchableOpacity\n          style={[\n            styles.menuItem,\n            level > 0 && styles.subMenuItem,\n            isExpanded && !level && styles.activeMenuItem,\n            Platform.OS === 'android' && styles.androidMenuItem\n          ]}\n          onPress={() => {\n            if (hasSubItems) {\n              toggleItem(item.title);\n            } else {\n              navigateTo(item.route);\n            }\n          }}\n          activeOpacity={0.7}\n        >\n          <Icon \n            name={item.icon} \n            size={22} \n            color={\n              level > 0 ? COLOR_PRIMARIO : \n              isExpanded ? COLOR_PRIMARIO : COLOR_TEXTO\n            } \n            style={styles.icon} \n          />\n          <Text style={[\n            styles.menuItemText,\n            level > 0 && styles.subMenuItemText,\n            isExpanded && !level && styles.activeMenuItemText,\n            Platform.OS === 'android' && styles.androidText\n          ]}>\n            {item.title}\n          </Text>\n          {hasSubItems && (\n            <Icon \n              name={isExpanded ? 'expand-less' : 'expand-more'} \n              size={22} \n              color={isExpanded ? COLOR_PRIMARIO : COLOR_TEXTO_SECUNDARIO} \n            />\n          )}\n        </TouchableOpacity>\n\n        {hasSubItems && (\n          <Animated.View style={[styles.subItemsContainer, { height: heightAnim }]}>\n            {item.subItems.map((subItem, index) => \n              renderMenuItem(subItem, level + 1)\n            )}\n          </Animated.View>\n        )}\n      </View>\n    );\n  };\n\n  if (loading) {\n    return (\n      <View style={[\n        styles.loadingContainer, \n        { paddingTop: insets.top, paddingBottom: insets.bottom }\n      ]}>\n        <ActivityIndicator \n          size=\"large\" \n          color={COLOR_PRIMARIO} \n          style={Platform.OS === 'android' ? { marginTop: 10 } : null}\n        />\n        <Text style={styles.loadingText}>Cargando información...</Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={[\n      styles.container, \n      { \n        paddingTop: insets.top, \n        paddingBottom: insets.bottom,\n        paddingLeft: insets.left,\n        paddingRight: insets.right\n      }\n    ]}>\n      {/* Perfil del usuario */}\n      <TouchableOpacity \n        style={styles.profileContainer}\n        onPress={() => navigateTo('PerfilUsuario')}\n        activeOpacity={0.8}\n      >\n        {userData?.avatar ? (\n          <Image \n            source={{ uri: userData.avatar }} \n            style={styles.avatarImage} \n          />\n        ) : (\n          <View style={styles.avatarPlaceholder}>\n            <Icon name=\"person\" size={24} color=\"#fff\" />\n          </View>\n        )}\n        \n        <View style={styles.profileInfo}>\n          <Text style={styles.userName} numberOfLines={1}>\n            {userData?.name || 'Usuario'}\n          </Text>\n          <Text style={styles.userRole}>\n            {userData?.role ? userData.role.charAt(0).toUpperCase() + userData.role.slice(1) : 'Administrador'}\n          </Text>\n        </View>\n        \n        <Icon name=\"edit\" size={20} color={COLOR_PRIMARIO} />\n      </TouchableOpacity>\n\n      {/* Menú principal */}\n      <ScrollView \n        style={styles.menuScroll}\n        showsVerticalScrollIndicator={false}\n        contentContainerStyle={styles.menuScrollContent}\n      >\n        <View style={styles.menuItems}>\n          {menuItems.map((item) => renderMenuItem(item))}\n        </View>\n      </ScrollView>\n\n      {/* Cerrar sesión */}\n      <TouchableOpacity \n        style={[\n          styles.logoutButton,\n          Platform.OS === 'android' && styles.androidLogoutButton\n        ]}\n        onPress={handleLogout}\n        activeOpacity={0.8}\n      >\n        <Icon name=\"logout\" size={20} color=\"#e53935\" />\n        <Text style={styles.logoutText}>Cerrar sesión</Text>\n      </TouchableOpacity>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    width: '100%',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa'\n  },\n  loadingText: {\n    marginTop: 15,\n    color: COLOR_TEXTO_SECUNDARIO,\n    fontSize: 16\n  },\n  profileContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    backgroundColor: '#fff',\n    ...Platform.select({\n      ios: {\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 1 },\n        shadowOpacity: 0.1,\n        shadowRadius: 2,\n      },\n      android: {\n        elevation: 2,\n      },\n    }),\n  },\n  avatarImage: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginRight: 15,\n    backgroundColor: '#f0f0f0'\n  },\n  avatarPlaceholder: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: COLOR_PRIMARIO,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 15,\n  },\n  profileInfo: {\n    flex: 1,\n  },\n  userName: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: COLOR_TEXTO,\n    marginBottom: 3,\n    ...Platform.select({\n      android: {\n        fontFamily: 'sans-serif-medium',\n      },\n    }),\n  },\n  userRole: {\n    fontSize: 13,\n    color: COLOR_PRIMARIO,\n    fontWeight: '500',\n    ...Platform.select({\n      android: {\n        fontFamily: 'sans-serif',\n      },\n    }),\n  },\n  menuScroll: {\n    flex: 1,\n  },\n  menuScrollContent: {\n    paddingBottom: 10,\n  },\n  menuItems: {\n    paddingVertical: 5,\n  },\n  menuItemContainer: {\n    overflow: 'hidden',\n  },\n  subMenuItemContainer: {\n    backgroundColor: 'rgba(0, 98, 204, 0.05)',\n    marginLeft: 20,\n    borderLeftWidth: 2,\n    borderLeftColor: 'rgba(0, 98, 204, 0.2)',\n  },\n  menuItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: Platform.OS === 'ios' ? 14 : 12,\n    paddingHorizontal: 20,\n  },\n  androidMenuItem: {\n    paddingVertical: 10,\n  },\n  subMenuItem: {\n    paddingVertical: Platform.OS === 'ios' ? 12 : 10,\n    paddingLeft: 15,\n  },\n  activeMenuItem: {\n    backgroundColor: 'rgba(0, 98, 204, 0.1)',\n  },\n  menuItemText: {\n    flex: 1,\n    fontSize: 15,\n    fontWeight: '500',\n    color: COLOR_TEXTO,\n    marginLeft: 15,\n    ...Platform.select({\n      android: {\n        fontFamily: 'sans-serif-medium',\n      },\n    }),\n  },\n  androidText: {\n    fontSize: 14,\n  },\n  subMenuItemText: {\n    fontWeight: '400',\n    color: COLOR_TEXTO_SECUNDARIO,\n  },\n  activeMenuItemText: {\n    color: COLOR_PRIMARIO,\n  },\n  icon: {\n    width: 24,\n    textAlign: 'center',\n  },\n  subItemsContainer: {\n    overflow: 'hidden',\n  },\n  logoutButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 18,\n    borderTopWidth: 1,\n    borderTopColor: '#e0e0e0',\n    backgroundColor: '#fff',\n    ...Platform.select({\n      ios: {\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: -1 },\n        shadowOpacity: 0.1,\n        shadowRadius: 2,\n      },\n      android: {\n        elevation: 2,\n      },\n    }),\n  },\n  androidLogoutButton: {\n    paddingVertical: 15,\n  },\n  logoutText: {\n    fontSize: 15,\n    fontWeight: '500',\n    color: '#e53935',\n    marginLeft: 10,\n    ...Platform.select({\n      android: {\n        fontFamily: 'sans-serif-medium',\n      },\n    }),\n  },\n});\n\nexport default MenuAdmin;","import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  Text,\n  StyleSheet, \n  TouchableOpacity,\n  ActivityIndicator,\n  Dimensions,\n  SafeAreaView,\n  RefreshControl,\n  Modal,\n  TextInput,\n  FlatList,\n  Platform,\n  ScrollView\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../../lib/supabase';\nimport { format, parseISO } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport Toast from 'react-native-toast-message';\nimport DateTimePicker from '@react-native-community/datetimepicker';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst MAX_CONTENT_WIDTH = 1200;\n\n// Paleta de colores moderna\nconst COLORS = {\n  primary: '#4361ee',         // Azul vibrante\n  secondary: '#3f37c9',       // Azul oscuro\n  accent: '#4895ef',          // Azul claro\n  success: '#4cc9f0',         // Turquesa\n  danger: '#f72585',          // Rosado\n  warning: '#f8961e',         // Naranja\n  light: '#f8f9fa',           // Gris muy claro\n  dark: '#212529',            // Gris oscuro\n  background: '#ffffff',      // Blanco\n  cardBackground: '#ffffff',  // Blanco\n  text: '#2b2d42',            // Azul grisáceo oscuro\n  textSecondary: '#8d99ae',   // Gris azulado\n  border: '#e9ecef',          // Gris claro\n};\n\nconst PrestamosScreen = () => {\n  const navigation = useNavigation();\n  const [equipos, setEquipos] = useState([]);\n  const [prestamos, setPrestamos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [modalPrestamoVisible, setModalPrestamoVisible] = useState(false);\n  const [modalReservaVisible, setModalReservaVisible] = useState(false);\n  const [modalAccionVisible, setModalAccionVisible] = useState(false);\n  const [selectedEquipo, setSelectedEquipo] = useState(null);\n  const [selectedPrestamo, setSelectedPrestamo] = useState(null);\n  const [action, setAction] = useState('devolver');\n  const [filter, setFilter] = useState('activos');\n  const [fechaReserva, setFechaReserva] = useState(new Date());\n  const [horaReserva, setHoraReserva] = useState(new Date());\n  const [showDatePicker, setShowDatePicker] = useState(false);\n  const [showTimePicker, setShowTimePicker] = useState(false);\n  const [activeTab, setActiveTab] = useState('equipos');\n\n  // Cargar equipos disponibles\n  const fetchEquipos = async () => {\n    try {\n      setLoading(true);\n      let query = supabase\n        .from('equipos')\n        .select('*')\n        .or('estado.eq.disponible,estado.eq.reservado')\n        .order('nombreequipo', { ascending: true });\n\n      if (searchQuery) {\n        query = query.ilike('nombreequipo', `%${searchQuery}%`);\n      }\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n      setEquipos(data || []);\n    } catch (error) {\n      console.error('Error al cargar equipos:', error);\n      Toast.show({\n        type: 'error',\n        text1: 'Error',\n        text2: 'No se pudieron cargar los equipos',\n      });\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  // Cargar préstamos activos\n  const fetchPrestamos = async () => {\n    try {\n      setLoading(true);\n      \n      let query = supabase\n        .from('prestamos')\n        .select(`\n          idprestamo,\n          fechaprestamo,\n          fechareserva,\n          horasreserva,\n          estado,\n          equipos: idequipo (nombreequipo, modelo, numero_serie),\n          usuarios: idusuario (nombreusuario, email),\n          horaprestamo\n        `)\n        .or('estado.eq.Prestado,estado.eq.Reservado')\n        .order('fechaprestamo', { ascending: false });\n\n      if (searchQuery) {\n        query = query.or(\n          `equipos.nombreequipo.ilike.%${searchQuery}%,usuarios.nombreusuario.ilike.%${searchQuery}%,equipos.numero_serie.ilike.%${searchQuery}%`\n        );\n      }\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n\n      const processedData = data.map(item => ({\n        ...item,\n        fechaCompleta: item.estado === 'Prestado' ? \n          (item.fechaprestamo ? \n            `${format(parseISO(item.fechaprestamo), 'PPP', { locale: es })} a las ${item.horaprestamo}` : \n            'No especificado') :\n          (item.fechareserva ? \n            `${format(parseISO(item.fechareserva), 'PPP', { locale: es })} a las ${item.horasreserva}` : \n            'No especificado'),\n        idequipo: item.equipos?.idequipo\n      }));\n\n      setPrestamos(processedData || []);\n    } catch (error) {\n      console.error('Error al cargar préstamos:', error);\n      Toast.show({\n        type: 'error',\n        text1: 'Error',\n        text2: 'No se pudieron cargar los préstamos',\n      });\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  useEffect(() => {\n    if (activeTab === 'equipos') {\n      fetchEquipos();\n    } else {\n      fetchPrestamos();\n    }\n  }, [activeTab, searchQuery]);\n\n  const handleRefresh = () => {\n    setRefreshing(true);\n    if (activeTab === 'equipos') {\n      fetchEquipos();\n    } else {\n      fetchPrestamos();\n    }\n  };\n\n  // Manejar préstamo de equipo\n  const handlePrestamo = async () => {\n    if (!selectedEquipo) return;\n\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session) {\n        navigation.navigate('Login');\n        return;\n      }\n\n      const { error } = await supabase\n        .from('prestamos')\n        .insert([{\n          idusuario: session.user.id,\n          idequipo: selectedEquipo.idequipo,\n          estado: 'Prestado',\n          fechaprestamo: new Date().toISOString(),\n          horaprestamo: format(horaReserva, 'HH:mm')\n        }]);\n\n      if (error) throw error;\n\n      // Actualizar estado del equipo\n      await supabase\n        .from('equipos')\n        .update({ estado: 'prestado' })\n        .eq('idequipo', selectedEquipo.idequipo);\n\n      setModalPrestamoVisible(false);\n      fetchEquipos();\n      Toast.show({\n        type: 'success',\n        text1: 'Préstamo registrado',\n        text2: `El equipo ${selectedEquipo.nombreequipo} ha sido prestado correctamente`,\n      });\n    } catch (error) {\n      console.error('Error al registrar préstamo:', error);\n      Toast.show({\n        type: 'error',\n        text1: 'Error',\n        text2: 'No se pudo registrar el préstamo',\n      });\n    }\n  };\n\n  // Manejar reserva de equipo\n  const handleReserva = async () => {\n    if (!selectedEquipo) return;\n\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session) {\n        navigation.navigate('Login');\n        return;\n      }\n\n      const { error } = await supabase\n        .from('prestamos')\n        .insert([{\n          idusuario: session.user.id,\n          idequipo: selectedEquipo.idequipo,\n          estado: 'Reservado',\n          fechareserva: fechaReserva.toISOString().split('T')[0],\n          horasreserva: format(horaReserva, 'HH:mm')\n        }]);\n\n      if (error) throw error;\n\n      // Actualizar estado del equipo\n      await supabase\n        .from('equipos')\n        .update({ estado: 'reservado' })\n        .eq('idequipo', selectedEquipo.idequipo);\n\n      setModalReservaVisible(false);\n      fetchEquipos();\n      Toast.show({\n        type: 'success',\n        text1: 'Reserva registrada',\n        text2: `El equipo ${selectedEquipo.nombreequipo} ha sido reservado para el ${format(fechaReserva, 'PPP', { locale: es })} a las ${format(horaReserva, 'HH:mm')}`,\n      });\n    } catch (error) {\n      console.error('Error al registrar reserva:', error);\n      Toast.show({\n        type: 'error',\n        text1: 'Error',\n        text2: 'No se pudo registrar la reserva',\n      });\n    }\n  };\n\n  // Manejar devolución\n  const handleAccionPrestamo = async () => {\n    if (!selectedPrestamo) return;\n\n    try {\n      const { error } = await supabase\n        .from('prestamos')\n        .update({ \n          estado: 'Devuelto',\n          fechadevolucion: new Date().toISOString()\n        })\n        .eq('idprestamo', selectedPrestamo.idprestamo);\n\n      if (error) throw error;\n\n      // Actualizar estado del equipo a disponible\n      await supabase\n        .from('equipos')\n        .update({ estado: 'disponible' })\n        .eq('idequipo', selectedPrestamo.idequipo);\n\n      setModalAccionVisible(false);\n      fetchPrestamos();\n      Toast.show({\n        type: 'success',\n        text1: 'Devolución registrada',\n        text2: `El equipo ha sido marcado como devuelto`,\n      });\n    } catch (error) {\n      console.error('Error al realizar acción:', error);\n      Toast.show({\n        type: 'error',\n        text1: 'Error',\n        text2: 'No se pudo completar la acción',\n      });\n    }\n  };\n\n  const formatHora = (date) => {\n    return format(date, 'HH:mm');\n  };\n\n  const formatFecha = (date) => {\n    return format(date, 'PPP', { locale: es });\n  };\n\n  // Renderizar cada equipo\n  const renderEquipo = ({ item }) => (\n    <View style={styles.card}>\n      <View style={styles.cardHeader}>\n        <View style={styles.cardTitleContainer}>\n          <MaterialCommunityIcons \n            name=\"devices\" \n            size={24} \n            color={item.estado === 'disponible' ? COLORS.success : COLORS.warning} \n          />\n          <Text style={styles.cardTitle}>{item.nombreequipo}</Text>\n        </View>\n        <View style={[\n          styles.statusBadge,\n          item.estado === 'disponible' ? styles.badgeAvailable : \n          item.estado === 'reservado' ? styles.badgeReserved : \n          styles.badgeUnavailable\n        ]}>\n          <Text style={styles.statusText}>\n            {item.estado === 'disponible' ? 'Disponible' : 'Reservado'}\n          </Text>\n        </View>\n      </View>\n\n      <View style={styles.cardBody}>\n        {item.modelo && (\n          <View style={styles.cardRow}>\n            <Icon name=\"info\" size={20} color={COLORS.textSecondary} />\n            <Text style={styles.cardText}>Modelo: {item.modelo}</Text>\n          </View>\n        )}\n        {item.numero_serie && (\n          <View style={styles.cardRow}>\n            <Icon name=\"tag\" size={20} color={COLORS.textSecondary} />\n            <Text style={styles.cardText}>Serie: {item.numero_serie}</Text>\n          </View>\n        )}\n      </View>\n\n      <View style={styles.cardFooter}>\n        <TouchableOpacity\n          style={[styles.actionButton, item.estado !== 'disponible' && styles.disabledButton]}\n          onPress={() => {\n            setSelectedEquipo(item);\n            setHoraReserva(new Date());\n            setModalPrestamoVisible(true);\n          }}\n          disabled={item.estado !== 'disponible'}\n        >\n          <Icon name=\"check-circle\" size={20} color={COLORS.background} />\n          <Text style={styles.actionButtonText}>Prestar</Text>\n        </TouchableOpacity>\n        \n        <TouchableOpacity\n          style={[styles.actionButton, styles.reserveButton, item.estado !== 'disponible' && styles.disabledButton]}\n          onPress={() => {\n            setSelectedEquipo(item);\n            setFechaReserva(new Date());\n            setHoraReserva(new Date());\n            setModalReservaVisible(true);\n          }}\n          disabled={item.estado !== 'disponible'}\n        >\n          <Icon name=\"event-available\" size={20} color={COLORS.background} />\n          <Text style={styles.actionButtonText}>Reservar</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n\n  // Renderizar cada préstamo\n  const renderPrestamo = ({ item }) => (\n    <View style={styles.card}>\n      <View style={styles.cardHeader}>\n        <View style={styles.cardTitleContainer}>\n          <MaterialCommunityIcons \n            name={item.estado === 'Prestado' ? 'devices' : 'calendar-clock'} \n            size={24} \n            color={item.estado === 'Prestado' ? COLORS.primary : COLORS.warning} \n          />\n          <Text style={styles.cardTitle}>{item.equipos?.nombreequipo || 'Equipo desconocido'}</Text>\n        </View>\n        <View style={[\n          styles.statusBadge,\n          item.estado === 'Prestado' ? styles.badgeActive : styles.badgeReserved\n        ]}>\n          <Text style={styles.statusText}>{item.estado}</Text>\n        </View>\n      </View>\n\n      <View style={styles.cardBody}>\n        <View style={styles.cardRow}>\n          <Icon name=\"person\" size={20} color={COLORS.textSecondary} />\n          <Text style={styles.cardText}>{item.usuarios?.nombreusuario || 'Usuario desconocido'}</Text>\n        </View>\n\n        <View style={styles.cardRow}>\n          <Icon name=\"email\" size={20} color={COLORS.textSecondary} />\n          <Text style={styles.cardText}>{item.usuarios?.email || 'No especificado'}</Text>\n        </View>\n\n        <View style={styles.cardRow}>\n          <Icon name=\"date-range\" size={20} color={COLORS.textSecondary} />\n          <Text style={styles.cardText}>\n            {item.estado === 'Prestado' ? 'Préstamo: ' : 'Reserva: '}\n            {item.fechaCompleta}\n          </Text>\n        </View>\n\n        {item.equipos?.modelo && (\n          <View style={styles.cardRow}>\n            <Icon name=\"info\" size={20} color={COLORS.textSecondary} />\n            <Text style={styles.cardText}>Modelo: {item.equipos.modelo}</Text>\n          </View>\n        )}\n\n        {item.equipos?.numero_serie && (\n          <View style={styles.cardRow}>\n            <Icon name=\"tag\" size={20} color={COLORS.textSecondary} />\n            <Text style={styles.cardText}>Serie: {item.equipos.numero_serie}</Text>\n          </View>\n        )}\n      </View>\n\n      <View style={styles.cardFooter}>\n        <TouchableOpacity\n          style={[styles.actionButton, item.estado !== 'Prestado' && styles.disabledButton]}\n          onPress={() => {\n            setSelectedPrestamo(item);\n            setAction('devolver');\n            setModalAccionVisible(true);\n          }}\n          disabled={item.estado !== 'Prestado'}\n        >\n          <Icon name=\"assignment-return\" size={20} color={COLORS.background} />\n          <Text style={styles.actionButtonText}>Devolver</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n\n  if (loading && ((activeTab === 'equipos' && equipos.length === 0) || (activeTab === 'prestamos' && prestamos.length === 0))) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={COLORS.primary} />\n          <Text style={styles.loadingText}>Cargando...</Text>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.container}>\n      {/* Header con menú */}\n      <View style={styles.header}>\n        <TouchableOpacity \n          onPress={() => navigation.openDrawer()}\n          style={styles.menuButton}\n          hitSlop={{top: 20, bottom: 20, left: 20, right: 20}}\n        >\n          <Icon name=\"menu\" size={24} color={COLORS.text} />\n        </TouchableOpacity>\n        <Text style={styles.headerTitle}>\n          {activeTab === 'equipos' ? 'Gestión de Equipos' : 'Préstamos Activos'}\n        </Text>\n      </View>\n\n      <View style={[styles.content, { maxWidth: MAX_CONTENT_WIDTH }]}>\n        {/* Tabs */}\n        <View style={styles.tabsContainer}>\n          <TouchableOpacity\n            style={[styles.tabButton, activeTab === 'equipos' && styles.activeTab]}\n            onPress={() => setActiveTab('equipos')}\n          >\n            <MaterialCommunityIcons \n              name=\"devices\" \n              size={20} \n              color={activeTab === 'equipos' ? COLORS.primary : COLORS.textSecondary} \n            />\n            <Text style={[styles.tabText, activeTab === 'equipos' && styles.activeTabText]}>Equipos</Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[styles.tabButton, activeTab === 'prestamos' && styles.activeTab]}\n            onPress={() => setActiveTab('prestamos')}\n          >\n            <MaterialCommunityIcons \n              name=\"history\" \n              size={20} \n              color={activeTab === 'prestamos' ? COLORS.primary : COLORS.textSecondary} \n            />\n            <Text style={[styles.tabText, activeTab === 'prestamos' && styles.activeTabText]}>Préstamos</Text>\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.searchContainer}>\n          <Icon name=\"search\" size={20} color={COLORS.textSecondary} style={styles.searchIcon} />\n          <TextInput\n            style={styles.searchInput}\n            placeholder={`Buscar ${activeTab === 'equipos' ? 'equipos...' : 'préstamos...'}`}\n            value={searchQuery}\n            onChangeText={setSearchQuery}\n            placeholderTextColor={COLORS.textSecondary}\n          />\n        </View>\n\n        {/* Lista de Equipos */}\n        {activeTab === 'equipos' ? (\n          <FlatList\n            data={equipos}\n            renderItem={renderEquipo}\n            keyExtractor={(item) => item.idequipo.toString()}\n            refreshControl={\n              <RefreshControl\n                refreshing={refreshing}\n                onRefresh={handleRefresh}\n                colors={[COLORS.primary]}\n              />\n            }\n            contentContainerStyle={styles.listContent}\n            ListEmptyComponent={\n              <View style={styles.emptyContainer}>\n                <MaterialCommunityIcons name=\"devices\" size={60} color={COLORS.border} />\n                <Text style={styles.emptyText}>No se encontraron equipos</Text>\n                <Text style={styles.emptySubtext}>\n                  {searchQuery \n                    ? 'Prueba con otros términos de búsqueda' \n                    : 'No hay equipos disponibles en este momento'}\n                </Text>\n              </View>\n            }\n          />\n        ) : (\n          <FlatList\n            data={prestamos}\n            renderItem={renderPrestamo}\n            keyExtractor={(item) => item.idprestamo.toString()}\n            refreshControl={\n              <RefreshControl\n                refreshing={refreshing}\n                onRefresh={handleRefresh}\n                colors={[COLORS.primary]}\n              />\n            }\n            contentContainerStyle={styles.listContent}\n            ListEmptyComponent={\n              <View style={styles.emptyContainer}>\n                <MaterialCommunityIcons name=\"history\" size={60} color={COLORS.border} />\n                <Text style={styles.emptyText}>No se encontraron préstamos</Text>\n                <Text style={styles.emptySubtext}>\n                  {searchQuery \n                    ? 'Prueba con otros términos de búsqueda' \n                    : 'No hay préstamos activos registrados'}\n                </Text>\n              </View>\n            }\n          />\n        )}\n\n        {/* Modal para Préstamo */}\n        <Modal\n          visible={modalPrestamoVisible}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setModalPrestamoVisible(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <View style={styles.modalContainer}>\n              {selectedEquipo && (\n                <>\n                  <Text style={styles.modalTitle}>Registrar Préstamo</Text>\n                  \n                  <Text style={styles.modalText}>\n                    <Text style={styles.modalLabel}>Equipo: </Text>\n                    {selectedEquipo.nombreequipo}\n                  </Text>\n                  \n                  <Text style={styles.modalText}>\n                    <Text style={styles.modalLabel}>Hora del préstamo: </Text>\n                    {formatHora(horaReserva)}\n                  </Text>\n\n                  <TouchableOpacity \n                    style={styles.timeInput}\n                    onPress={() => setShowTimePicker(true)}\n                  >\n                    <Icon name=\"access-time\" size={20} color={COLORS.textSecondary} />\n                    <Text style={styles.timeInputText}>Cambiar hora: {formatHora(horaReserva)}</Text>\n                  </TouchableOpacity>\n\n                  {showTimePicker && (\n                    <DateTimePicker\n                      value={horaReserva}\n                      mode=\"time\"\n                      is24Hour={true}\n                      display={Platform.OS === 'ios' ? 'spinner' : 'default'}\n                      onChange={(event, selectedTime) => {\n                        setShowTimePicker(Platform.OS === 'ios');\n                        if (selectedTime) {\n                          setHoraReserva(selectedTime);\n                        }\n                      }}\n                      style={styles.picker}\n                    />\n                  )}\n\n                  <View style={styles.modalButtons}>\n                    <TouchableOpacity\n                      style={[styles.modalButton, styles.cancelButton]}\n                      onPress={() => setModalPrestamoVisible(false)}\n                    >\n                      <Text style={styles.modalButtonText}>Cancelar</Text>\n                    </TouchableOpacity>\n                    <TouchableOpacity\n                      style={[styles.modalButton, styles.confirmButton]}\n                      onPress={handlePrestamo}\n                    >\n                      <Text style={[styles.modalButtonText, styles.confirmButtonText]}>Confirmar Préstamo</Text>\n                    </TouchableOpacity>\n                  </View>\n                </>\n              )}\n            </View>\n          </View>\n        </Modal>\n\n        {/* Modal para Reserva */}\n        <Modal\n          visible={modalReservaVisible}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setModalReservaVisible(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <View style={styles.modalContainer}>\n              {selectedEquipo && (\n                <>\n                  <Text style={styles.modalTitle}>Registrar Reserva</Text>\n                  \n                  <Text style={styles.modalText}>\n                    <Text style={styles.modalLabel}>Equipo: </Text>\n                    {selectedEquipo.nombreequipo}\n                  </Text>\n                  \n                  <TouchableOpacity \n                    style={styles.dateInput}\n                    onPress={() => setShowDatePicker(true)}\n                  >\n                    <Icon name=\"calendar-today\" size={20} color={COLORS.textSecondary} />\n                    <Text style={styles.dateInputText}>Fecha: {formatFecha(fechaReserva)}</Text>\n                  </TouchableOpacity>\n\n                  <TouchableOpacity \n                    style={styles.timeInput}\n                    onPress={() => setShowTimePicker(true)}\n                  >\n                    <Icon name=\"access-time\" size={20} color={COLORS.textSecondary} />\n                    <Text style={styles.timeInputText}>Hora: {formatHora(horaReserva)}</Text>\n                  </TouchableOpacity>\n\n                  {showDatePicker && (\n                    <DateTimePicker\n                      value={fechaReserva}\n                      mode=\"date\"\n                      display={Platform.OS === 'ios' ? 'spinner' : 'default'}\n                      minimumDate={new Date()}\n                      onChange={(event, selectedDate) => {\n                        setShowDatePicker(Platform.OS === 'ios');\n                        if (selectedDate) {\n                          setFechaReserva(selectedDate);\n                        }\n                      }}\n                      style={styles.picker}\n                    />\n                  )}\n\n                  {showTimePicker && (\n                    <DateTimePicker\n                      value={horaReserva}\n                      mode=\"time\"\n                      is24Hour={true}\n                      display={Platform.OS === 'ios' ? 'spinner' : 'default'}\n                      onChange={(event, selectedTime) => {\n                        setShowTimePicker(Platform.OS === 'ios');\n                        if (selectedTime) {\n                          setHoraReserva(selectedTime);\n                        }\n                      }}\n                      style={styles.picker}\n                    />\n                  )}\n\n                  <View style={styles.modalButtons}>\n                    <TouchableOpacity\n                      style={[styles.modalButton, styles.cancelButton]}\n                      onPress={() => setModalReservaVisible(false)}\n                    >\n                      <Text style={styles.modalButtonText}>Cancelar</Text>\n                    </TouchableOpacity>\n                    <TouchableOpacity\n                      style={[styles.modalButton, styles.confirmButton]}\n                      onPress={handleReserva}\n                    >\n                      <Text style={[styles.modalButtonText, styles.confirmButtonText]}>Confirmar Reserva</Text>\n                    </TouchableOpacity>\n                  </View>\n                </>\n              )}\n            </View>\n          </View>\n        </Modal>\n\n        {/* Modal para Devolución */}\n        <Modal\n          visible={modalAccionVisible}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setModalAccionVisible(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <View style={styles.modalContainer}>\n              {selectedPrestamo && (\n                <>\n                  <Text style={styles.modalTitle}>Registrar Devolución</Text>\n                  \n                  <Text style={styles.modalText}>\n                    <Text style={styles.modalLabel}>Equipo: </Text>\n                    {selectedPrestamo.equipos?.nombreequipo || 'Desconocido'}\n                  </Text>\n                  \n                  <Text style={styles.modalText}>\n                    <Text style={styles.modalLabel}>Usuario: </Text>\n                    {selectedPrestamo.usuarios?.nombreusuario || 'Usuario desconocido'}\n                  </Text>\n                  \n                  <Text style={styles.modalText}>\n                    <Text style={styles.modalLabel}>Fecha: </Text>\n                    {selectedPrestamo.fechaCompleta}\n                  </Text>\n\n                  <View style={styles.modalButtons}>\n                    <TouchableOpacity\n                      style={[styles.modalButton, styles.cancelButton]}\n                      onPress={() => setModalAccionVisible(false)}\n                    >\n                      <Text style={styles.modalButtonText}>Cancelar</Text>\n                    </TouchableOpacity>\n                    <TouchableOpacity\n                      style={[styles.modalButton, styles.confirmButton]}\n                      onPress={handleAccionPrestamo}\n                    >\n                      <Text style={[styles.modalButtonText, styles.confirmButtonText]}>Confirmar Devolución</Text>\n                    </TouchableOpacity>\n                  </View>\n                </>\n              )}\n            </View>\n          </View>\n        </Modal>\n      </View>\n      <Toast />\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: COLORS.light,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: COLORS.background,\n    paddingVertical: 16,\n    paddingHorizontal: isMobile ? 20 : 30,\n    borderBottomWidth: 1,\n    borderBottomColor: COLORS.border,\n    shadowColor: COLORS.dark,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 10,\n    elevation: 3,\n    zIndex: 10,\n  },\n  menuButton: {\n    marginRight: 16,\n    padding: 8,\n    borderRadius: 20,\n    backgroundColor: COLORS.light,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 20 : 22,\n    fontWeight: '700',\n    color: COLORS.dark,\n    letterSpacing: 0.5,\n  },\n  content: {\n    flex: 1,\n    width: '100%',\n    alignSelf: 'center',\n    padding: isMobile ? 16 : 24,\n  },\n  tabsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 24,\n    backgroundColor: COLORS.background,\n    borderRadius: 12,\n    padding: 6,\n    shadowColor: COLORS.dark,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 8,\n    elevation: 2,\n  },\n  tabButton: {\n    flex: 1,\n    alignItems: 'center',\n    padding: 12,\n    borderRadius: 10,\n    flexDirection: 'row',\n    justifyContent: 'center',\n  },\n  activeTab: {\n    backgroundColor: COLORS.primary + '15', // 15% de opacidad\n  },\n  tabText: {\n    fontSize: 16,\n    color: COLORS.textSecondary,\n    marginLeft: 8,\n    fontWeight: '500',\n  },\n  activeTabText: {\n    color: COLORS.primary,\n    fontWeight: '600',\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: COLORS.background,\n    borderRadius: 12,\n    paddingHorizontal: 20,\n    paddingVertical: 8,\n    marginBottom: 20,\n    shadowColor: COLORS.dark,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 8,\n    elevation: 2,\n  },\n  searchIcon: {\n    marginRight: 12,\n    color: COLORS.textSecondary,\n  },\n  searchInput: {\n    flex: 1,\n    height: 48,\n    fontSize: 16,\n    color: COLORS.text,\n    fontFamily: Platform.OS === 'ios' ? 'System' : 'Roboto',\n  },\n  listContent: {\n    paddingBottom: 20,\n  },\n  card: {\n    backgroundColor: COLORS.cardBackground,\n    borderRadius: 16,\n    padding: 20,\n    marginBottom: 16,\n    shadowColor: COLORS.dark,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.05,\n    shadowRadius: 12,\n    elevation: 3,\n    borderWidth: 1,\n    borderColor: COLORS.border,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  cardTitleContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  cardTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: COLORS.text,\n    marginLeft: 12,\n  },\n  cardBody: {\n    marginBottom: 16,\n  },\n  cardRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  cardText: {\n    marginLeft: 12,\n    color: COLORS.textSecondary,\n    fontSize: 15,\n    flex: 1,\n    lineHeight: 22,\n  },\n  cardFooter: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 12,\n  },\n  actionButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 10,\n    backgroundColor: COLORS.primary,\n    flex: 1,\n    marginHorizontal: 6,\n    shadowColor: COLORS.primary,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.2,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  actionButtonText: {\n    color: COLORS.background,\n    marginLeft: 8,\n    fontWeight: '500',\n    fontSize: 15,\n  },\n  reserveButton: {\n    backgroundColor: COLORS.accent,\n    shadowColor: COLORS.accent,\n  },\n  deleteButton: {\n    backgroundColor: COLORS.danger,\n    shadowColor: COLORS.danger,\n  },\n  disabledButton: {\n    opacity: 0.6,\n  },\n  statusBadge: {\n    paddingHorizontal: 14,\n    paddingVertical: 6,\n    borderRadius: 14,\n    alignSelf: 'flex-start',\n  },\n  badgeAvailable: {\n    backgroundColor: COLORS.success,\n  },\n  badgeReserved: {\n    backgroundColor: COLORS.warning,\n  },\n  badgeUnavailable: {\n    backgroundColor: COLORS.danger,\n  },\n  badgeActive: {\n    backgroundColor: COLORS.primary,\n  },\n  badgeReturned: {\n    backgroundColor: COLORS.textSecondary,\n  },\n  statusText: {\n    color: COLORS.background,\n    fontWeight: '600',\n    fontSize: 12,\n    textTransform: 'uppercase',\n    letterSpacing: 0.5,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 40,\n  },\n  emptyText: {\n    fontSize: 18,\n    marginTop: 20,\n    color: COLORS.text,\n    textAlign: 'center',\n    fontWeight: '500',\n  },\n  emptySubtext: {\n    fontSize: 15,\n    marginTop: 10,\n    color: COLORS.textSecondary,\n    textAlign: 'center',\n    lineHeight: 22,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: 20,\n    fontSize: 16,\n    color: COLORS.textSecondary,\n  },\n  modalOverlay: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.4)',\n  },\n  modalContainer: {\n    width: isMobile ? '90%' : '70%',\n    maxWidth: 500,\n    backgroundColor: COLORS.background,\n    borderRadius: 16,\n    padding: 24,\n    shadowColor: COLORS.dark,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 20,\n    elevation: 5,\n  },\n  modalTitle: {\n    fontSize: 22,\n    fontWeight: '600',\n    marginBottom: 24,\n    color: COLORS.text,\n    textAlign: 'center',\n  },\n  modalText: {\n    marginBottom: 16,\n    fontSize: 16,\n    lineHeight: 24,\n    color: COLORS.text,\n  },\n  modalLabel: {\n    fontWeight: '600',\n    color: COLORS.text,\n  },\n  dateInput: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderWidth: 1,\n    borderColor: COLORS.border,\n    borderRadius: 12,\n    marginBottom: 16,\n    backgroundColor: COLORS.background,\n  },\n  timeInput: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderWidth: 1,\n    borderColor: COLORS.border,\n    borderRadius: 12,\n    marginBottom: 20,\n    backgroundColor: COLORS.background,\n  },\n  dateInputText: {\n    marginLeft: 12,\n    fontSize: 16,\n    color: COLORS.text,\n  },\n  timeInputText: {\n    marginLeft: 12,\n    fontSize: 16,\n    color: COLORS.text,\n  },\n  picker: {\n    width: '100%',\n    backgroundColor: COLORS.background,\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    marginTop: 24,\n  },\n  modalButton: {\n    paddingVertical: 14,\n    paddingHorizontal: 24,\n    borderRadius: 12,\n    marginLeft: 16,\n    minWidth: 120,\n    alignItems: 'center',\n  },\n  cancelButton: {\n    backgroundColor: COLORS.light,\n    borderWidth: 1,\n    borderColor: COLORS.border,\n  },\n  confirmButton: {\n    backgroundColor: COLORS.primary,\n    shadowColor: COLORS.primary,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.2,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  modalButtonText: {\n    fontWeight: '500',\n    fontSize: 16,\n  },\n  confirmButtonText: {\n    color: COLORS.background,\n  },\n});\n\nexport default PrestamosScreen;","import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Alert,\n  ActivityIndicator,\n  Dimensions,\n  SafeAreaView,\n  Platform,\n  FlatList,\n  RefreshControl,\n  Modal,\n  TextInput,\n  Linking\n} from 'react-native';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../../lib/supabase';\nimport MaterialIcons from 'react-native-vector-icons/MaterialIcons';\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Button } from 'react-native-paper';\nimport DateTimePicker from '@react-native-community/datetimepicker';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst MAX_CONTENT_WIDTH = 1200;\nconst isWeb = Platform.OS === 'web';\n\nconst HistorialPrestamosScreen = () => {\n  const navigation = useNavigation();\n  const [historial, setHistorial] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [directorNombre, setDirectorNombre] = useState('Lic. Juan Pérez');\n  const [modalVisible, setModalVisible] = useState(false);\n  const [nuevoNombre, setNuevoNombre] = useState('');\n  const [fechaInicio, setFechaInicio] = useState(new Date());\n  const [fechaFin, setFechaFin] = useState(new Date());\n  const [showDatePickerInicio, setShowDatePickerInicio] = useState(false);\n  const [showDatePickerFin, setShowDatePickerFin] = useState(false);\n  const [filtroAccion, setFiltroAccion] = useState('Todos');\n  const [detalleModalVisible, setDetalleModalVisible] = useState(false);\n  const [detalleSeleccionado, setDetalleSeleccionado] = useState(null);\n\n  const formatDateForInput = (date) => {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  };\n\n  const handleWebDateChange = (dateString, setDateFunction) => {\n    const dateParts = dateString.split('-');\n    const newDate = new Date(dateParts[0], dateParts[1] - 1, dateParts[2]);\n    setDateFunction(newDate);\n    fetchHistorial();\n  };\n\n  useEffect(() => {\n    const loadDirectorName = async () => {\n      try {\n        const savedName = await AsyncStorage.getItem('@director_name');\n        if (savedName) setDirectorNombre(savedName);\n      } catch (error) {\n        console.error('Error al cargar nombre:', error);\n      }\n    };\n    loadDirectorName();\n    fetchHistorial();\n  }, []);\n\n  const saveDirectorName = async () => {\n    if (!nuevoNombre.trim()) {\n      Alert.alert('Error', 'Por favor ingrese un nombre válido');\n      return;\n    }\n\n    try {\n      await AsyncStorage.setItem('@director_name', nuevoNombre);\n      setDirectorNombre(nuevoNombre);\n      setModalVisible(false);\n      Alert.alert('Éxito', 'Nombre actualizado correctamente');\n    } catch (error) {\n      Alert.alert('Error', 'No se pudo actualizar el nombre');\n    }\n  };\n\n  const fetchHistorial = async () => {\n    setLoading(true);\n    setRefreshing(true);\n    \n    try {\n      let query = supabase\n        .from('historial_prestamos')\n        .select(`\n          idhistorial,\n          idprestamo,\n          accion,\n          fechaaccion,\n          detalles,\n          usuarios:usuarios!idusuario(\n            nombreusuario,\n            email,\n            rol\n          ),\n          personal:personal!idpersonal(\n            nombre_completo,\n            tipo_persona,\n            estado\n          ),\n          prestamos:prestamos!idprestamo(\n            idprestamo,\n            estado,\n            fechaprestamo,\n            fechadevolucion_real,\n            equipos:equipos!idequipo(\n              nombreequipo,\n              estado,\n              descripcion\n            )\n          )\n        `)\n        .gte('fechaaccion', fechaInicio.toISOString())\n        .lte('fechaaccion', fechaFin.toISOString())\n        .order('fechaaccion', { ascending: false });\n  \n      // Aplicar filtro por acción si no es \"Todos\"\n      if (filtroAccion !== 'Todos') {\n        query = query.eq('accion', filtroAccion);\n      }\n  \n      const { data, error } = await query;\n  \n      if (error) throw error;\n  \n      const historialFormateado = data?.map(item => ({\n        idhistorial: item.idhistorial,\n        idprestamo: item.idprestamo,\n        accion: item.accion,\n        fechaaccion: item.fechaaccion,\n        detalles: item.detalles,\n        nombreUsuario: item.usuarios?.nombreusuario || item.personal?.nombre_completo || 'Usuario no registrado',\n        emailUsuario: item.usuarios?.email || '',\n        tipoPersona: item.personal?.tipo_persona || item.usuarios?.rol || '',\n        estadoPrestamo: item.prestamos?.estado || 'N/A',\n        nombreEquipo: item.prestamos?.equipos?.nombreequipo || 'Equipo no encontrado',\n        descripcionEquipo: item.prestamos?.equipos?.descripcion || '',\n        fechaPrestamo: item.prestamos?.fechaprestamo,\n        fechaDevolucion: item.prestamos?.fechadevolucion_real\n      })) || [];\n  \n      setHistorial(historialFormateado);\n      \n    } catch (error) {\n      console.error('Error al cargar historial:', error);\n      Alert.alert('Error', 'No se pudieron cargar los registros del historial');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  const handleDateChange = (date, setDate, setShowPicker) => {\n    setShowPicker(false);\n    if (date) {\n      setDate(date);\n      fetchHistorial();\n    }\n  };\n\n  const mostrarDetallesCompletos = (item) => {\n    setDetalleSeleccionado(item);\n    setDetalleModalVisible(true);\n  };\n\n  const generatePrintDocument = async () => {\n    try {\n      const htmlContent = `\n        <html>\n          <head>\n            <meta charset=\"UTF-8\">\n            <style>\n              body { font-family: Arial; padding: 20px; margin: 0; }\n              .header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #eee; }\n              .logo { max-width: 200px; max-height: 100px; margin-bottom: 15px; }\n              h1 { color: #2c3e50; margin: 5px 0; font-size: 24px; }\n              .subtitle { color: #7f8c8d; font-size: 14px; }\n              .date-range { margin: 10px 0; font-size: 14px; color: #34495e; }\n              .filter-info { margin: 10px 0; font-size: 14px; font-style: italic; }\n              table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 14px; }\n              th, td { padding: 12px 8px; border: 1px solid #ddd; text-align: left; }\n              th { background-color: #f8f9fa; font-weight: bold; color: #34495e; }\n              .accion-prestamo { color: #2980b9; }\n              .accion-devolucion { color: #27ae60; }\n              .accion-otro { color: #e67e22; }\n              .firma-container { margin-top: 60px; text-align: center; }\n              .linea-firma { width: 300px; border-top: 1px solid #000; margin: 10px auto; }\n              .nombre-director { font-weight: bold; margin-top: 5px; font-size: 16px; }\n              .cargo-director { font-style: italic; color: #7f8c8d; }\n              .footer { margin-top: 40px; text-align: center; font-size: 12px; color: #95a5a6; border-top: 1px solid #eee; padding-top: 15px; }\n              @media print { body { padding: 0; } .no-print { display: none; } }\n            </style>\n          </head>\n          <body>\n            <div class=\"header\">\n              <img src=\"https://utregionaldelsur.sidci.mx/img/logo.png\" class=\"logo\" alt=\"Logo de la escuela\">\n              <h1>Reporte de Historial de Préstamos</h1>\n              <p class=\"subtitle\">Generado el: ${new Date().toLocaleDateString('es-ES', { \n                weekday: 'long', \n                year: 'numeric', \n                month: 'long', \n                day: 'numeric' \n              })}</p>\n              <p class=\"date-range\">\n                Período: ${fechaInicio.toLocaleDateString('es-ES')} - ${fechaFin.toLocaleDateString('es-ES')}\n              </p>\n              <p class=\"filter-info\">\n                Filtro: ${filtroAccion === 'Todos' ? 'Todas las acciones' : `Solo acciones de tipo: ${filtroAccion}`}\n              </p>\n            </div>\n            \n            <table>\n              <thead>\n                <tr>\n                  <th>Equipo</th>\n                  <th>Acción</th>\n                  <th>Fecha/Hora</th>\n                  <th>Responsable</th>\n                  <th>Estado</th>\n                  <th>Detalles</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${historial.map(item => `\n                  <tr>\n                    <td>${item.nombreEquipo}</td>\n                    <td class=\"${item.accion === 'Préstamo' ? 'accion-prestamo' : \n                               item.accion === 'Devolución' ? 'accion-devolucion' : 'accion-otro'}\">\n                      ${item.accion}\n                    </td>\n                    <td>${new Date(item.fechaaccion).toLocaleString('es-ES')}</td>\n                    <td>${item.nombreUsuario}${item.departamento ? ` (${item.departamento})` : ''}</td>\n                    <td>${item.estadoPrestamo}</td>\n                    <td>${item.detalles || 'N/A'}</td>\n                  </tr>\n                `).join('')}\n              </tbody>\n            </table>\n            \n            <div class=\"firma-container\">\n              <div class=\"linea-firma\"></div>\n              <div class=\"nombre-director\">${directorNombre}</div>\n              <div class=\"cargo-director\">Director de Carrera</div>\n            </div>\n            \n            <div class=\"footer\">\n              <p>Sistema de Gestión de Préstamos - ${new Date().getFullYear()}</p>\n              <p>Documento generado automáticamente - Válido sin firma manuscrita</p>\n            </div>\n          </body>\n        </html>\n      `;\n\n      if (isWeb) {\n        const printWindow = window.open('', '_blank');\n        printWindow.document.write(htmlContent);\n        printWindow.document.close();\n        printWindow.focus();\n        setTimeout(() => printWindow.print(), 500);\n      } else {\n        Alert.alert(\n          'Documento Listo',\n          Platform.OS === 'android' \n            ? 'Se abrirá en el navegador para imprimir' \n            : 'Para imprimir: 1. Abre en Safari 2. Usa Compartir → Imprimir',\n          [\n            { text: 'Cancelar', style: 'cancel' },\n            { \n              text: 'Abrir Documento', \n              onPress: () => Linking.openURL(`data:text/html;charset=utf-8,${encodeURIComponent(htmlContent)}`)\n            }\n          ]\n        );\n      }\n    } catch (error) {\n      Alert.alert('Error', 'No se pudo generar el documento');\n      console.error('Error generating document:', error);\n    }\n  };\n\n  const renderItem = ({ item }) => (\n    <TouchableOpacity \n      style={styles.card}\n      onPress={() => mostrarDetallesCompletos(item)}\n    >\n      <View style={styles.cardHeader}>\n        <View>\n          <Text style={styles.cardTitle}>{item.nombreEquipo}</Text>\n          <Text style={[\n            styles.cardSubtitle,\n            item.accion === 'Préstamo' && styles.subtitlePrestamo,\n            item.accion === 'Devolución' && styles.subtitleDevolucion\n          ]}>\n            {item.accion} • {new Date(item.fechaaccion).toLocaleDateString('es-ES')}\n          </Text>\n        </View>\n        <View style={[\n          styles.statusBadge,\n          item.estadoPrestamo === 'Prestado' ? styles.statusActive : \n          item.estadoPrestamo === 'Devuelto' ? styles.statusCompleted : \n          styles.statusOther\n        ]}>\n          <Text style={styles.statusText}>\n            {item.estadoPrestamo}\n          </Text>\n        </View>\n      </View>\n      \n      <View style={styles.detailRow}>\n        <MaterialCommunityIcons name=\"account-circle-outline\" size={16} color=\"#4a6da7\" />\n        <Text style={styles.detailText}>\n          {item.nombreUsuario}\n          {item.tipoPersona ? ` (${item.tipoPersona})` : ''}\n          </Text>\n      </View>\n      \n      {item.detalles && (\n        <View style={styles.detailRow}>\n          <MaterialIcons name=\"notes\" size={16} color=\"#4a6da7\" />\n          <Text \n            style={styles.detailText}\n            numberOfLines={1}\n            ellipsizeMode=\"tail\"\n          >\n            {item.detalles}\n          </Text>\n        </View>\n      )}\n      \n      <View style={styles.detailRow}>\n        <MaterialCommunityIcons name=\"clock-outline\" size={16} color=\"#4a6da7\" />\n        <Text style={styles.detailText}>\n          {new Date(item.fechaaccion).toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' })}\n        </Text>\n      </View>\n    </TouchableOpacity>\n  );\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <View style={[styles.container, isWeb && { maxWidth: MAX_CONTENT_WIDTH }]}>\n        <View style={styles.header}>\n          <TouchableOpacity \n            onPress={() => navigation.openDrawer()}\n            style={styles.menuButton}\n            hitSlop={{top: 20, bottom: 20, left: 20, right: 20}}\n          >\n            <MaterialIcons name=\"menu\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n          \n          <Text style={styles.headerTitle}>Historial de Préstamos y Devoluciones</Text>\n          \n          <View style={styles.buttonGroup}>\n            <Button \n              mode=\"contained\" \n              onPress={() => {\n                setNuevoNombre(directorNombre);\n                setModalVisible(true);\n              }}\n              style={styles.directorButton}\n              labelStyle={styles.buttonLabel}\n            >\n              <MaterialIcons name=\"edit\" size={18} color=\"#FFF\" />\n            </Button>\n            \n            <Button \n              mode=\"contained\" \n              onPress={generatePrintDocument}\n              style={styles.printButton}\n              labelStyle={styles.buttonLabel}\n            >\n              <MaterialIcons name=\"print\" size={18} color=\"#FFF\" />\n            </Button>\n          </View>\n        </View>\n\n        <View style={styles.filterContainer}>\n          <View style={styles.filterRow}>\n            <Text style={styles.filterLabel}>Filtrar por:</Text>\n            \n            <View style={styles.filterOptions}>\n              <TouchableOpacity \n                style={[\n                  styles.filterOption, \n                  filtroAccion === 'Todos' && styles.filterOptionActive\n                ]}\n                onPress={() => {\n                  setFiltroAccion('Todos');\n                  fetchHistorial();\n                }}\n              >\n                <Text style={[\n                  styles.filterOptionText,\n                  filtroAccion === 'Todos' && styles.filterOptionTextActive\n                ]}>\n                  Todos\n                </Text>\n              </TouchableOpacity>\n              \n              <TouchableOpacity \n                style={[\n                  styles.filterOption, \n                  filtroAccion === 'Préstamo' && styles.filterOptionActive\n                ]}\n                onPress={() => {\n                  setFiltroAccion('Préstamo');\n                  fetchHistorial();\n                }}\n              >\n                <Text style={[\n                  styles.filterOptionText,\n                  filtroAccion === 'Préstamo' && styles.filterOptionTextActive\n                ]}>\n                  Préstamos\n                </Text>\n              </TouchableOpacity>\n              \n              <TouchableOpacity \n                style={[\n                  styles.filterOption, \n                  filtroAccion === 'Devolución' && styles.filterOptionActive\n                ]}\n                onPress={() => {\n                  setFiltroAccion('Devolución');\n                  fetchHistorial();\n                }}\n              >\n                <Text style={[\n                  styles.filterOptionText,\n                  filtroAccion === 'Devolución' && styles.filterOptionTextActive\n                ]}>\n                  Devoluciones\n                </Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n          \n          <View style={styles.dateFilterContainer}>\n            {isWeb ? (\n              <>\n                <View style={styles.dateInput}>\n                  <MaterialIcons name=\"calendar-today\" size={16} color=\"#4a6da7\" />\n                  <input \n                    type=\"date\"\n                    value={formatDateForInput(fechaInicio)}\n                    onChange={(e) => handleWebDateChange(e.target.value, setFechaInicio)}\n                    style={styles.webDateInput}\n                    max={formatDateForInput(new Date())}\n                  />\n                </View>\n                \n                <Text style={styles.dateSeparator}>a</Text>\n                \n                <View style={styles.dateInput}>\n                  <MaterialIcons name=\"calendar-today\" size={16} color=\"#4a6da7\" />\n                  <input \n                    type=\"date\"\n                    value={formatDateForInput(fechaFin)}\n                    onChange={(e) => handleWebDateChange(e.target.value, setFechaFin)}\n                    style={styles.webDateInput}\n                    min={formatDateForInput(fechaInicio)}\n                    max={formatDateForInput(new Date())}\n                  />\n                </View>\n              </>\n            ) : (\n              <>\n                <TouchableOpacity \n                  style={styles.dateInput}\n                  onPress={() => setShowDatePickerInicio(true)}\n                >\n                  <MaterialIcons name=\"calendar-today\" size={16} color=\"#4a6da7\" />\n                  <Text style={styles.dateText}>\n                    Inicio: {fechaInicio.toLocaleDateString('es-ES')}\n                  </Text>\n                </TouchableOpacity>\n                \n                <Text style={styles.dateSeparator}>a</Text>\n                \n                <TouchableOpacity \n                  style={styles.dateInput}\n                  onPress={() => setShowDatePickerFin(true)}\n                >\n                  <MaterialIcons name=\"calendar-today\" size={16} color=\"#4a6da7\" />\n                  <Text style={styles.dateText}>\n                    Fin: {fechaFin.toLocaleDateString('es-ES')}\n                  </Text>\n                </TouchableOpacity>\n                \n                {showDatePickerInicio && (\n                  <DateTimePicker\n                    value={fechaInicio}\n                    mode=\"date\"\n                    display={Platform.OS === 'ios' ? 'inline' : 'default'}\n                    onChange={(event, date) => handleDateChange(date, setFechaInicio, setShowDatePickerInicio)}\n                    maximumDate={new Date()}\n                  />\n                )}\n                \n                {showDatePickerFin && (\n                  <DateTimePicker\n                    value={fechaFin}\n                    mode=\"date\"\n                    display={Platform.OS === 'ios' ? 'inline' : 'default'}\n                    onChange={(event, date) => handleDateChange(date, setFechaFin, setShowDatePickerFin)}\n                    minimumDate={fechaInicio}\n                    maximumDate={new Date()}\n                  />\n                )}\n              </>\n            )}\n          </View>\n        </View>\n\n        <Modal \n          visible={modalVisible} \n          transparent={true}\n          animationType=\"slide\"\n          onRequestClose={() => setModalVisible(false)}\n        >\n          <View style={styles.modalContainer}>\n            <View style={styles.modalContent}>\n              <Text style={styles.modalTitle}>Cambiar Nombre del Director</Text>\n              \n              <TextInput\n                style={styles.input}\n                value={nuevoNombre}\n                onChangeText={setNuevoNombre}\n                placeholder=\"Ingrese el nombre completo\"\n                placeholderTextColor=\"#95a5a6\"\n                autoFocus={true}\n              />\n              \n              <View style={styles.modalButtons}>\n                <Button \n                  mode=\"outlined\" \n                  onPress={() => setModalVisible(false)}\n                  style={styles.cancelButton}\n                  labelStyle={styles.cancelButtonText}\n                >\n                  Cancelar\n                </Button>\n                <Button \n                  mode=\"contained\" \n                  onPress={saveDirectorName}\n                  style={styles.saveButton}\n                  labelStyle={styles.saveButtonText}\n                >\n                  Guardar\n                </Button>\n              </View>\n            </View>\n          </View>\n        </Modal>\n\n        <Modal \n          visible={detalleModalVisible} \n          transparent={true}\n          animationType=\"slide\"\n          onRequestClose={() => setDetalleModalVisible(false)}\n        >\n          <View style={styles.modalContainer}>\n            <View style={styles.detalleModalContent}>\n              <Text style={styles.detalleModalTitle}>\n                {detalleSeleccionado?.nombreEquipo}\n              </Text>\n              \n              <View style={styles.detalleSection}>\n                <Text style={styles.detalleLabel}>Acción:</Text>\n                <Text style={[\n                  styles.detalleValue,\n                  detalleSeleccionado?.accion === 'Préstamo' && styles.detallePrestamo,\n                  detalleSeleccionado?.accion === 'Devolución' && styles.detalleDevolucion\n                ]}>\n                  {detalleSeleccionado?.accion}\n                </Text>\n              </View>\n              \n              <View style={styles.detalleSection}>\n                <Text style={styles.detalleLabel}>Estado:</Text>\n                <Text style={styles.detalleValue}>\n                  {detalleSeleccionado?.estadoPrestamo}\n                </Text>\n              </View>\n              \n              <View style={styles.detalleSection}>\n                <Text style={styles.detalleLabel}>Fecha y Hora:</Text>\n                <Text style={styles.detalleValue}>\n                  {detalleSeleccionado?.fechaaccion ? \n                    new Date(detalleSeleccionado.fechaaccion).toLocaleString('es-ES') : 'N/A'}\n                </Text>\n              </View>\n              \n              <View style={styles.detalleSection}>\n                <Text style={styles.detalleLabel}>Responsable:</Text>\n                <Text style={styles.detalleValue}>\n                  {detalleSeleccionado?.nombreUsuario}\n                  {detalleSeleccionado?.departamento ? ` (${detalleSeleccionado.departamento})` : ''}\n                </Text>\n              </View>\n              \n              {detalleSeleccionado?.fechaPrestamo && (\n                <View style={styles.detalleSection}>\n                  <Text style={styles.detalleLabel}>Fecha Préstamo:</Text>\n                  <Text style={styles.detalleValue}>\n                    {new Date(detalleSeleccionado.fechaPrestamo).toLocaleDateString('es-ES')}\n                  </Text>\n                </View>\n              )}\n              \n              {detalleSeleccionado?.fechaDevolucion && (\n                <View style={styles.detalleSection}>\n                  <Text style={styles.detalleLabel}>Fecha Devolución:</Text>\n                  <Text style={styles.detalleValue}>\n                    {new Date(detalleSeleccionado.fechaDevolucion).toLocaleDateString('es-ES')}\n                  </Text>\n                </View>\n              )}\n              \n              {detalleSeleccionado?.descripcionEquipo && (\n                <View style={styles.detalleSection}>\n                  <Text style={styles.detalleLabel}>Descripción Equipo:</Text>\n                  <Text style={styles.detalleValue}>\n                    {detalleSeleccionado.descripcionEquipo}\n                  </Text>\n                </View>\n              )}\n              \n              {detalleSeleccionado?.detalles && (\n                <View style={styles.detalleSection}>\n                  <Text style={styles.detalleLabel}>Detalles:</Text>\n                  <Text style={styles.detalleValue}>\n                    {detalleSeleccionado.detalles}\n                  </Text>\n                </View>\n              )}\n              \n              <Button \n                mode=\"contained\" \n                onPress={() => setDetalleModalVisible(false)}\n                style={styles.closeDetalleButton}\n                labelStyle={styles.closeDetalleButtonText}\n              >\n                Cerrar\n              </Button>\n            </View>\n          </View>\n        </Modal>\n\n        {loading ? (\n          <View style={styles.loadingContainer}>\n            <ActivityIndicator size=\"large\" color=\"#3498db\" />\n            <Text style={styles.loadingText}>Cargando historial...</Text>\n          </View>\n        ) : (\n          <FlatList\n            data={historial}\n            renderItem={renderItem}\n            keyExtractor={item => item.idhistorial.toString()}\n            contentContainerStyle={styles.listContent}\n            refreshControl={\n              <RefreshControl\n                refreshing={refreshing}\n                onRefresh={fetchHistorial}\n                colors={['#3498db']}\n                tintColor=\"#3498db\"\n              />\n            }\n            ListEmptyComponent={\n              <View style={styles.emptyContainer}>\n                <MaterialCommunityIcons name=\"book-clock\" size={48} color=\"#ecf0f1\" />\n                <Text style={styles.emptyText}>\n                  No se encontraron registros con los filtros seleccionados\n                </Text>\n              </View>\n            }\n          />\n        )}\n      </View>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n    alignSelf: 'center',\n    width: '100%',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#ffffff',\n    paddingVertical: 16,\n    paddingHorizontal: isMobile ? 16 : 24,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  menuButton: {\n    marginRight: 16,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 18 : 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n    flex: 1,\n  },\n  buttonGroup: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  directorButton: {\n    backgroundColor: '#4a6da7',\n    borderRadius: 4,\n    marginRight: 8,\n    minWidth: 40,\n  },\n  printButton: {\n    backgroundColor: '#27ae60',\n    borderRadius: 4,\n    minWidth: 40,\n  },\n  buttonLabel: {\n    color: '#FFF',\n    marginVertical: 6,\n    marginHorizontal: 0,\n  },\n  filterContainer: {\n    padding: 16,\n    backgroundColor: '#ffffff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  filterRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 10,\n  },\n  filterLabel: {\n    fontSize: 14,\n    color: '#6c757d',\n  },\n  filterOptions: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  filterOption: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 16,\n    marginLeft: 8,\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n  },\n  filterOptionActive: {\n    backgroundColor: '#4a6da7',\n    borderColor: '#4a6da7',\n  },\n  filterOptionText: {\n    fontSize: 12,\n    color: '#6c757d',\n  },\n  filterOptionTextActive: {\n    color: '#FFF',\n  },\n  dateFilterContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  dateInput: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: '#ced4da',\n    borderRadius: 6,\n    padding: 12,\n    flex: 1,\n    marginHorizontal: 5,\n  },\n  dateText: {\n    marginLeft: 8,\n    color: '#495057',\n  },\n  dateSeparator: {\n    marginHorizontal: 8,\n    color: '#6c757d',\n  },\n  webDateInput: {\n    marginLeft: 8,\n    border: 'none',\n    outline: 'none',\n    fontSize: 14,\n    color: '#495057',\n    fontFamily: 'inherit',\n    backgroundColor: 'transparent',\n    width: '100%',\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.5)',\n  },\n  modalContent: {\n    backgroundColor: '#FFF',\n    borderRadius: 8,\n    padding: 20,\n    width: isMobile ? '90%' : '40%',\n  },\n  detalleModalContent: {\n    backgroundColor: '#FFF',\n    borderRadius: 8,\n    padding: 20,\n    width: isMobile ? '90%' : '60%',\n    maxHeight: '80%',\n  },\n  modalTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  detalleModalTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#ced4da',\n    borderRadius: 6,\n    padding: 12,\n    marginBottom: 20,\n    fontSize: 16,\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n  },\n  cancelButton: {\n    borderColor: '#95a5a6',\n    flex: 1,\n    marginRight: 10,\n  },\n  cancelButtonText: {\n    color: '#95a5a6',\n  },\n  saveButton: {\n    backgroundColor: '#4a6da7',\n    flex: 1,\n  },\n  saveButtonText: {\n    color: '#FFF',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#6c757d',\n  },\n  listContent: {\n    padding: isMobile ? 8 : 16,\n  },\n  card: {\n    backgroundColor: '#FFF',\n    borderRadius: 8,\n    padding: 16,\n    marginBottom: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  cardTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#2c3e50',\n  },\n  cardSubtitle: {\n    fontSize: 12,\n    color: '#95a5a6',\n  },\n  subtitlePrestamo: {\n    color: '#2980b9',\n  },\n  subtitleDevolucion: {\n    color: '#27ae60',\n  },\n  statusBadge: {\n    borderRadius: 12,\n    paddingVertical: 4,\n    paddingHorizontal: 10,\n  },\n  statusActive: {\n    backgroundColor: '#e6f7ee',\n  },\n  statusCompleted: {\n    backgroundColor: '#e8f5e9',\n  },\n  statusOther: {\n    backgroundColor: '#fff8e1',\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '500',\n  },\n  detailRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginVertical: 4,\n  },\n  detailText: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginLeft: 8,\n    flex: 1,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 40,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: '#95a5a6',\n    marginTop: 16,\n    textAlign: 'center',\n  },\n  detalleSection: {\n    marginBottom: 15,\n  },\n  detalleLabel: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginBottom: 4,\n  },\n  detalleValue: {\n    fontSize: 16,\n    color: '#2c3e50',\n  },\n  detallePrestamo: {\n    color: '#2980b9',\n    fontWeight: '600',\n  },\n  detalleDevolucion: {\n    color: '#27ae60',\n    fontWeight: '600',\n  },\n  closeDetalleButton: {\n    backgroundColor: '#4a6da7',\n    marginTop: 20,\n  },\n  closeDetalleButtonText: {\n    color: '#FFF',\n  },\n});\n\nexport default HistorialPrestamosScreen;","import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TouchableOpacity,\n  ActivityIndicator,\n  Dimensions,\n  SafeAreaView,\n  TextInput,\n  Modal,\n  FlatList,\n  RefreshControl\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../../lib/supabase';\nimport Toast from 'react-native-toast-message';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst MAX_CONTENT_WIDTH = 1200;\n\nconst DevolucionesScreen = () => {\n  const navigation = useNavigation();\n  const [prestamos, setPrestamos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [modalVisible, setModalVisible] = useState(false);\n  const [observaciones, setObservaciones] = useState('');\n  const [currentPrestamo, setCurrentPrestamo] = useState(null);\n\n  useEffect(() => {\n    fetchPrestamosActivos();\n  }, []);\n\n  const fetchPrestamosActivos = async () => {\n    try {\n      setLoading(true);\n      setRefreshing(true);\n      \n      const { data, error } = await supabase\n        .from('prestamos')\n        .select(`\n          idprestamo,\n          idequipo,\n          idusuario,\n          fechaprestamo,\n          horaprestamo,\n          estado,\n          equipos:equipos(nombreequipo),\n          usuarios:usuarios(nombreusuario)\n        `)\n        .or('estado.eq.Prestado,estado.eq.Reservado')\n        .order('fechaprestamo', { ascending: false });\n\n      if (error) throw error;\n\n      const prestamosFormateados = data?.map(item => ({\n        idprestamo: item.idprestamo,\n        idequipo: item.idequipo,\n        idusuario: item.idusuario,\n        nombreequipo: item.equipos?.nombreequipo || 'Equipo no encontrado',\n        nombreusuario: item.usuarios?.nombreusuario || 'Usuario no encontrado',\n        fechaprestamo: item.fechaprestamo \n          ? new Date(item.fechaprestamo).toLocaleDateString() \n          : 'Sin fecha',\n        horaprestamo: item.horaprestamo || 'Sin hora',\n        estado: item.estado\n      })) || [];\n\n      setPrestamos(prestamosFormateados);\n      \n    } catch (error) {\n      console.error('Error al cargar préstamos activos:', error);\n      Toast.show({\n        type: 'error',\n        text1: 'Error',\n        text2: 'No se pudieron cargar los préstamos activos',\n      });\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  const handleRefresh = () => {\n    setRefreshing(true);\n    fetchPrestamosActivos();\n  };\n\n  const handleDevolucion = (prestamo) => {\n    setCurrentPrestamo(prestamo);\n    setModalVisible(true);\n  };\n\n  const confirmarDevolucion = async () => {\n    try {\n      setLoading(true);\n      const { idprestamo, idequipo, idusuario } = currentPrestamo;\n      const fechaActual = new Date();\n      const horaActual = fechaActual.toLocaleTimeString('en-US', {\n        hour12: false,\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit'\n      });\n\n      // 1. Registrar en tabla devoluciones\n      const { error: devolucionError } = await supabase\n        .from('devoluciones')\n        .insert({\n          idprestamo,\n          fechadevolucion: fechaActual.toISOString(),\n          horadevolucion: horaActual,\n          observaciones: observaciones || 'Devolución sin observaciones'\n        });\n\n      if (devolucionError) throw devolucionError;\n\n      // 2. Registrar en historial_prestamos\n      const { error: historialError } = await supabase\n        .from('historial_prestamos')\n        .insert({\n          idprestamo,\n          idusuario,\n          accion: 'Devolución',\n          fechaaccion: fechaActual.toISOString(),\n          detalles: observaciones || 'Devolución registrada'\n        });\n\n      if (historialError) throw historialError;\n\n      // 3. Actualizar estado del préstamo\n      const { error: prestamoError } = await supabase\n        .from('prestamos')\n        .update({ estado: 'Devuelto' })\n        .eq('idprestamo', idprestamo);\n\n      if (prestamoError) throw prestamoError;\n\n      // 4. Actualizar estado del equipo\n      const { error: equipoError } = await supabase\n        .from('equipos')\n        .update({ estado: 'disponible' })\n        .eq('idequipo', idequipo);\n\n      if (equipoError) throw equipoError;\n\n      // Mostrar notificación de éxito\n      Toast.show({\n        type: 'success',\n        text1: 'Devolución registrada',\n        text2: 'El equipo está disponible nuevamente',\n        visibilityTime: 3000,\n      });\n\n      // Cerrar modal y limpiar\n      setModalVisible(false);\n      setObservaciones('');\n      setCurrentPrestamo(null);\n\n      // Actualizar la lista\n      setTimeout(() => {\n        fetchPrestamosActivos();\n      }, 500);\n\n    } catch (error) {\n      console.error('Error en devolución:', error);\n      Toast.show({\n        type: 'error',\n        text1: 'Error en devolución',\n        text2: error.message || 'No se pudo completar la devolución',\n        visibilityTime: 4000,\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderPrestamo = ({ item }) => (\n    <View style={styles.card}>\n      <View style={styles.cardHeader}>\n        <View style={styles.cardTitleContainer}>\n          <MaterialCommunityIcons \n            name={item.estado === 'Prestado' ? 'devices' : 'calendar-clock'} \n            size={24} \n            color={item.estado === 'Prestado' ? '#1976d2' : '#ffa000'} \n          />\n          <Text style={styles.cardTitle}>{item.nombreequipo}</Text>\n        </View>\n        <View style={[\n          styles.statusBadge,\n          item.estado === 'Prestado' ? styles.badgeActive : styles.badgeReserved\n        ]}>\n          <Text style={styles.statusText}>{item.estado}</Text>\n        </View>\n      </View>\n\n      <View style={styles.cardBody}>\n        <View style={styles.infoRow}>\n          <Icon name=\"person\" size={20} color=\"#6c757d\" />\n          <Text style={styles.infoText}>{item.nombreusuario}</Text>\n        </View>\n\n        <View style={styles.infoRow}>\n          <Icon name=\"calendar-today\" size={20} color=\"#6c757d\" />\n          <Text style={styles.infoText}>{item.fechaprestamo}</Text>\n        </View>\n\n        <View style={styles.infoRow}>\n          <Icon name=\"access-time\" size={20} color=\"#6c757d\" />\n          <Text style={styles.infoText}>{item.horaprestamo}</Text>\n        </View>\n      </View>\n\n      <TouchableOpacity\n        style={[styles.actionButton, loading && styles.disabledButton]}\n        onPress={() => handleDevolucion(item)}\n        disabled={loading}\n      >\n        <Text style={styles.actionButtonText}>Registrar Devolución</Text>\n      </TouchableOpacity>\n    </View>\n  );\n\n  if (loading && prestamos.length === 0) {\n    return (\n      <SafeAreaView style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\n        <Text style={styles.loadingText}>Cargando préstamos...</Text>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <View style={styles.container}>\n        {/* Header */}\n        <View style={styles.header}>\n          <TouchableOpacity \n            onPress={() => navigation.openDrawer()}\n            style={styles.menuButton}\n            hitSlop={{top: 20, bottom: 20, left: 20, right: 20}}\n          >\n            <Icon name=\"menu\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Devoluciones</Text>\n        </View>\n\n        {/* Search Bar */}\n        <View style={styles.searchContainer}>\n          <Icon name=\"search\" size={20} color=\"#95a5a6\" style={styles.searchIcon} />\n          <TextInput\n            style={styles.searchInput}\n            placeholder=\"Buscar préstamos...\"\n            placeholderTextColor=\"#95a5a6\"\n            value={searchQuery}\n            onChangeText={setSearchQuery}\n          />\n        </View>\n\n        {/* Content */}\n        <FlatList\n          data={prestamos.filter(item => \n            item.nombreequipo.toLowerCase().includes(searchQuery.toLowerCase()) ||\n            item.nombreusuario.toLowerCase().includes(searchQuery.toLowerCase())\n          )}\n          renderItem={renderPrestamo}\n          keyExtractor={item => item.idprestamo.toString()}\n          contentContainerStyle={styles.listContent}\n          refreshControl={\n            <RefreshControl\n              refreshing={refreshing}\n              onRefresh={handleRefresh}\n              colors={['#4a6da7']}\n            />\n          }\n          ListEmptyComponent={\n            <View style={styles.emptyContainer}>\n              <MaterialCommunityIcons \n                name=\"clipboard-check-outline\" \n                size={48} \n                color=\"#e0e0e0\" \n              />\n              <Text style={styles.emptyText}>\n                {searchQuery ? 'No se encontraron resultados' : 'No hay préstamos activos'}\n              </Text>\n              <TouchableOpacity \n                style={styles.retryButton}\n                onPress={fetchPrestamosActivos}\n              >\n                <Text style={styles.retryButtonText}>Recargar</Text>\n              </TouchableOpacity>\n            </View>\n          }\n        />\n\n        {/* Modal para observaciones */}\n        <Modal\n          animationType=\"slide\"\n          transparent={true}\n          visible={modalVisible}\n          onRequestClose={() => {\n            setModalVisible(false);\n            setObservaciones('');\n          }}\n        >\n          <View style={styles.modalOverlay}>\n            <View style={styles.modalContainer}>\n              <Text style={styles.modalTitle}>Registrar Devolución</Text>\n              \n              <Text style={styles.modalText}>\n                Equipo: {currentPrestamo?.nombreequipo || 'N/A'}\n              </Text>\n              \n              <Text style={styles.modalLabel}>Observaciones:</Text>\n              <TextInput\n                style={styles.modalInput}\n                multiline\n                numberOfLines={4}\n                placeholder=\"Ingrese observaciones sobre la devolución...\"\n                value={observaciones}\n                onChangeText={setObservaciones}\n              />\n              \n              <View style={styles.modalButtons}>\n                <TouchableOpacity\n                  style={[styles.modalButton, styles.cancelButton]}\n                  onPress={() => {\n                    setModalVisible(false);\n                    setObservaciones('');\n                  }}\n                  disabled={loading}\n                >\n                  <Text style={styles.modalButtonText}>Cancelar</Text>\n                </TouchableOpacity>\n                \n                <TouchableOpacity\n                  style={[styles.modalButton, styles.confirmButton]}\n                  onPress={confirmarDevolucion}\n                  disabled={loading}\n                >\n                  {loading ? (\n                    <ActivityIndicator color=\"white\" />\n                  ) : (\n                    <Text style={styles.modalButtonText}>Confirmar</Text>\n                  )}\n                </TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </Modal>\n      </View>\n      <Toast />\n    </SafeAreaView>\n  );\n};\n\n// Los estilos permanecen iguales\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa',\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#6c757d',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#ffffff',\n    paddingVertical: 16,\n    paddingHorizontal: isMobile ? 16 : 24,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  menuButton: {\n    marginRight: 16,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 18 : 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#ffffff',\n    borderRadius: 8,\n    margin: 16,\n    paddingHorizontal: 16,\n    paddingVertical: 10,\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n  },\n  searchIcon: {\n    marginRight: 12,\n  },\n  searchInput: {\n    flex: 1,\n    fontSize: 16,\n    color: '#2c3e50',\n  },\n  listContent: {\n    paddingHorizontal: 16,\n    paddingBottom: 24,\n  },\n  card: {\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    marginHorizontal: 16,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  cardTitleContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  cardTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginLeft: 10,\n  },\n  statusBadge: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 12,\n  },\n  badgeActive: {\n    backgroundColor: '#e3f2fd',\n  },\n  badgeReserved: {\n    backgroundColor: '#fff8e1',\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '600',\n    color: '#2c3e50',\n  },\n  cardBody: {\n    marginBottom: 16,\n  },\n  infoRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  infoText: {\n    marginLeft: 8,\n    fontSize: 14,\n    color: '#6c757d',\n  },\n  actionButton: {\n    backgroundColor: '#4a6da7',\n    borderRadius: 6,\n    paddingVertical: 12,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  actionButtonText: {\n    color: '#ffffff',\n    fontWeight: '500',\n    fontSize: 14,\n  },\n  disabledButton: {\n    opacity: 0.6,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 40,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: '#6c757d',\n    marginTop: 16,\n    textAlign: 'center',\n  },\n  retryButton: {\n    marginTop: 16,\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    backgroundColor: '#e0e7ff',\n    borderRadius: 6,\n  },\n  retryButtonText: {\n    color: '#4a6da7',\n    fontWeight: '500',\n  },\n  modalOverlay: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.5)',\n  },\n  modalContainer: {\n    width: isMobile ? '90%' : '70%',\n    maxWidth: 500,\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    padding: 24,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.2,\n    shadowRadius: 20,\n    elevation: 5,\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  modalText: {\n    fontSize: 16,\n    color: '#2c3e50',\n    marginBottom: 12,\n  },\n  modalLabel: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: '#6c757d',\n    marginTop: 16,\n    marginBottom: 8,\n  },\n  modalInput: {\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n    borderRadius: 8,\n    padding: 12,\n    minHeight: 100,\n    textAlignVertical: 'top',\n    marginBottom: 20,\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 16,\n  },\n  modalButton: {\n    flex: 1,\n    paddingVertical: 14,\n    borderRadius: 8,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginHorizontal: 8,\n  },\n  cancelButton: {\n    backgroundColor: '#6c757d',\n  },\n  confirmButton: {\n    backgroundColor: '#4a6da7',\n  },\n  modalButtonText: {\n    color: '#ffffff',\n    fontWeight: '500',\n    fontSize: 16,\n  },\n});\n\nexport default DevolucionesScreen;","import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  Text,\n  StyleSheet, \n  TouchableOpacity,\n  ActivityIndicator,\n  Dimensions,\n  SafeAreaView,\n  RefreshControl,\n  Modal,\n  TextInput,\n  FlatList,\n  Platform,\n  ScrollView\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../../lib/supabase';\nimport { format, parseISO } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport Toast from 'react-native-toast-message';\nimport DateTimePicker from '@react-native-community/datetimepicker';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst MAX_CONTENT_WIDTH = 1200;\n\n// Paleta de colores moderna\nconst COLORS = {\n  primary: '#4361ee',         // Azul vibrante\n  secondary: '#3f37c9',       // Azul oscuro\n  accent: '#4895ef',          // Azul claro\n  success: '#4cc9f0',         // Turquesa\n  danger: '#f72585',          // Rosado\n  warning: '#f8961e',         // Naranja\n  light: '#f8f9fa',           // Gris muy claro\n  dark: '#212529',            // Gris oscuro\n  background: '#ffffff',      // Blanco\n  cardBackground: '#ffffff',  // Blanco\n  text: '#2b2d42',            // Azul grisáceo oscuro\n  textSecondary: '#8d99ae',   // Gris azulado\n  border: '#e9ecef',          // Gris claro\n};\n\nconst PrestamosUsuariosScreen = () => {\n  const navigation = useNavigation();\n  const [equipos, setEquipos] = useState([]);\n  const [prestamos, setPrestamos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [modalPrestamoVisible, setModalPrestamoVisible] = useState(false);\n  const [modalReservaVisible, setModalReservaVisible] = useState(false);\n  const [modalAccionVisible, setModalAccionVisible] = useState(false);\n  const [selectedEquipo, setSelectedEquipo] = useState(null);\n  const [selectedPrestamo, setSelectedPrestamo] = useState(null);\n  const [action, setAction] = useState('devolver');\n  const [filter, setFilter] = useState('activos');\n  const [fechaReserva, setFechaReserva] = useState(new Date());\n  const [horaReserva, setHoraReserva] = useState(new Date());\n  const [showDatePicker, setShowDatePicker] = useState(false);\n  const [showTimePicker, setShowTimePicker] = useState(false);\n  const [activeTab, setActiveTab] = useState('equipos');\n\n  // Cargar equipos disponibles\n  const fetchEquipos = async () => {\n    try {\n      setLoading(true);\n      let query = supabase\n        .from('equipos')\n        .select('*')\n        .or('estado.eq.disponible,estado.eq.reservado')\n        .order('nombreequipo', { ascending: true });\n\n      if (searchQuery) {\n        query = query.ilike('nombreequipo', `%${searchQuery}%`);\n      }\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n      setEquipos(data || []);\n    } catch (error) {\n      console.error('Error al cargar equipos:', error);\n      Toast.show({\n        type: 'error',\n        text1: 'Error',\n        text2: 'No se pudieron cargar los equipos',\n      });\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  // Cargar préstamos activos\n  const fetchPrestamos = async () => {\n    try {\n      setLoading(true);\n      \n      let query = supabase\n        .from('prestamos')\n        .select(`\n          idprestamo,\n          fechaprestamo,\n          fechareserva,\n          horasreserva,\n          estado,\n          equipos: idequipo (nombreequipo, modelo, numero_serie),\n          usuarios: idusuario (nombreusuario, email),\n          horaprestamo\n        `)\n        .or('estado.eq.Prestado,estado.eq.Reservado')\n        .order('fechaprestamo', { ascending: false });\n\n      if (searchQuery) {\n        query = query.or(\n          `equipos.nombreequipo.ilike.%${searchQuery}%,usuarios.nombreusuario.ilike.%${searchQuery}%,equipos.numero_serie.ilike.%${searchQuery}%`\n        );\n      }\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n\n      const processedData = data.map(item => ({\n        ...item,\n        fechaCompleta: item.estado === 'Prestado' ? \n          (item.fechaprestamo ? \n            `${format(parseISO(item.fechaprestamo), 'PPP', { locale: es })} a las ${item.horaprestamo}` : \n            'No especificado') :\n          (item.fechareserva ? \n            `${format(parseISO(item.fechareserva), 'PPP', { locale: es })} a las ${item.horasreserva}` : \n            'No especificado'),\n        idequipo: item.equipos?.idequipo\n      }));\n\n      setPrestamos(processedData || []);\n    } catch (error) {\n      console.error('Error al cargar préstamos:', error);\n      Toast.show({\n        type: 'error',\n        text1: 'Error',\n        text2: 'No se pudieron cargar los préstamos',\n      });\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  useEffect(() => {\n    if (activeTab === 'equipos') {\n      fetchEquipos();\n    } else {\n      fetchPrestamos();\n    }\n  }, [activeTab, searchQuery]);\n\n  const handleRefresh = () => {\n    setRefreshing(true);\n    if (activeTab === 'equipos') {\n      fetchEquipos();\n    } else {\n      fetchPrestamos();\n    }\n  };\n\n  // Manejar préstamo de equipo\n  const handlePrestamo = async () => {\n    if (!selectedEquipo) return;\n  \n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session) {\n        navigation.navigate('Login');\n        return;\n      }\n  \n      // First create the loan request\n      const { data: solicitudData, error: solicitudError } = await supabase\n        .from('solicitudes_prestamo')\n        .insert([{\n          idusuario: session.user.id,\n          idequipo: selectedEquipo.idequipo,\n          tiposolicitud: 'prestamo',\n          fechasolicitud: new Date().toISOString().split('T')[0],\n          estado: 'aprobado'\n        }])\n        .select();\n  \n      if (solicitudError) throw solicitudError;\n  \n      // Then create the actual loan\n      const { error } = await supabase\n        .from('prestamos')\n        .insert([{\n          idusuario: session.user.id,\n          idequipo: selectedEquipo.idequipo,\n          estado: 'Prestado',\n          fechaprestamo: new Date().toISOString(),\n          horaprestamo: format(horaReserva, 'HH:mm'),\n          idsolicitud: solicitudData[0].idsolicitud // Link to the request\n        }]);\n  \n      if (error) throw error;\n  \n      // Update equipment status\n      await supabase\n        .from('equipos')\n        .update({ estado: 'prestado' })\n        .eq('idequipo', selectedEquipo.idequipo);\n  \n      setModalPrestamoVisible(false);\n      fetchEquipos();\n      Toast.show({\n        type: 'success',\n        text1: 'Préstamo registrado',\n        text2: `El equipo ${selectedEquipo.nombreequipo} ha sido prestado correctamente`,\n      });\n    } catch (error) {\n      console.error('Error al registrar préstamo:', error);\n      Toast.show({\n        type: 'error',\n        text1: 'Error',\n        text2: 'No se pudo registrar el préstamo',\n      });\n    }\n  };\n\n  // Manejar reserva de equipo\n  const handleReserva = async () => {\n    if (!selectedEquipo) return;\n\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session) {\n        navigation.navigate('Login');\n        return;\n      }\n\n      const { error } = await supabase\n        .from('prestamos')\n        .insert([{\n          idusuario: session.user.id,\n          idequipo: selectedEquipo.idequipo,\n          estado: 'Reservado',\n          fechareserva: fechaReserva.toISOString().split('T')[0],\n          horasreserva: format(horaReserva, 'HH:mm')\n        }]);\n\n      if (error) throw error;\n\n      // Actualizar estado del equipo\n      await supabase\n        .from('equipos')\n        .update({ estado: 'reservado' })\n        .eq('idequipo', selectedEquipo.idequipo);\n\n      setModalReservaVisible(false);\n      fetchEquipos();\n      Toast.show({\n        type: 'success',\n        text1: 'Reserva registrada',\n        text2: `El equipo ${selectedEquipo.nombreequipo} ha sido reservado para el ${format(fechaReserva, 'PPP', { locale: es })} a las ${format(horaReserva, 'HH:mm')}`,\n      });\n    } catch (error) {\n      console.error('Error al registrar reserva:', error);\n      Toast.show({\n        type: 'error',\n        text1: 'Error',\n        text2: 'No se pudo registrar la reserva',\n      });\n    }\n  };\n\n  // Manejar devolución\n  const handleAccionPrestamo = async () => {\n    if (!selectedPrestamo) return;\n\n    try {\n      const { error } = await supabase\n        .from('prestamos')\n        .update({ \n          estado: 'Devuelto',\n          fechadevolucion: new Date().toISOString()\n        })\n        .eq('idprestamo', selectedPrestamo.idprestamo);\n\n      if (error) throw error;\n\n      // Actualizar estado del equipo a disponible\n      await supabase\n        .from('equipos')\n        .update({ estado: 'disponible' })\n        .eq('idequipo', selectedPrestamo.idequipo);\n\n      setModalAccionVisible(false);\n      fetchPrestamos();\n      Toast.show({\n        type: 'success',\n        text1: 'Devolución registrada',\n        text2: `El equipo ha sido marcado como devuelto`,\n      });\n    } catch (error) {\n      console.error('Error al realizar acción:', error);\n      Toast.show({\n        type: 'error',\n        text1: 'Error',\n        text2: 'No se pudo completar la acción',\n      });\n    }\n  };\n\n  const formatHora = (date) => {\n    return format(date, 'HH:mm');\n  };\n\n  const formatFecha = (date) => {\n    return format(date, 'PPP', { locale: es });\n  };\n\n  // Renderizar cada equipo\n  const renderEquipo = ({ item }) => (\n    <View style={styles.card}>\n      <View style={styles.cardHeader}>\n        <View style={styles.cardTitleContainer}>\n          <MaterialCommunityIcons \n            name=\"devices\" \n            size={24} \n            color={item.estado === 'disponible' ? COLORS.success : COLORS.warning} \n          />\n          <Text style={styles.cardTitle}>{item.nombreequipo}</Text>\n        </View>\n        <View style={[\n          styles.statusBadge,\n          item.estado === 'disponible' ? styles.badgeAvailable : \n          item.estado === 'reservado' ? styles.badgeReserved : \n          styles.badgeUnavailable\n        ]}>\n          <Text style={styles.statusText}>\n            {item.estado === 'disponible' ? 'Disponible' : 'Reservado'}\n          </Text>\n        </View>\n      </View>\n\n      <View style={styles.cardBody}>\n        {item.modelo && (\n          <View style={styles.cardRow}>\n            <Icon name=\"info\" size={20} color={COLORS.textSecondary} />\n            <Text style={styles.cardText}>Modelo: {item.modelo}</Text>\n          </View>\n        )}\n        {item.numero_serie && (\n          <View style={styles.cardRow}>\n            <Icon name=\"tag\" size={20} color={COLORS.textSecondary} />\n            <Text style={styles.cardText}>Serie: {item.numero_serie}</Text>\n          </View>\n        )}\n      </View>\n\n      <View style={styles.cardFooter}>\n        <TouchableOpacity\n          style={[styles.actionButton, item.estado !== 'disponible' && styles.disabledButton]}\n          onPress={() => {\n            setSelectedEquipo(item);\n            setHoraReserva(new Date());\n            setModalPrestamoVisible(true);\n          }}\n          disabled={item.estado !== 'disponible'}\n        >\n          <Icon name=\"check-circle\" size={20} color={COLORS.background} />\n          <Text style={styles.actionButtonText}>Prestar</Text>\n        </TouchableOpacity>\n        \n        <TouchableOpacity\n          style={[styles.actionButton, styles.reserveButton, item.estado !== 'disponible' && styles.disabledButton]}\n          onPress={() => {\n            setSelectedEquipo(item);\n            setFechaReserva(new Date());\n            setHoraReserva(new Date());\n            setModalReservaVisible(true);\n          }}\n          disabled={item.estado !== 'disponible'}\n        >\n          <Icon name=\"event-available\" size={20} color={COLORS.background} />\n          <Text style={styles.actionButtonText}>Reservar</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n\n  // Renderizar cada préstamo\n  const renderPrestamo = ({ item }) => (\n    <View style={styles.card}>\n      <View style={styles.cardHeader}>\n        <View style={styles.cardTitleContainer}>\n          <MaterialCommunityIcons \n            name={item.estado === 'Prestado' ? 'devices' : 'calendar-clock'} \n            size={24} \n            color={item.estado === 'Prestado' ? COLORS.primary : COLORS.warning} \n          />\n          <Text style={styles.cardTitle}>{item.equipos?.nombreequipo || 'Equipo desconocido'}</Text>\n        </View>\n        <View style={[\n          styles.statusBadge,\n          item.estado === 'Prestado' ? styles.badgeActive : styles.badgeReserved\n        ]}>\n          <Text style={styles.statusText}>{item.estado}</Text>\n        </View>\n      </View>\n\n      <View style={styles.cardBody}>\n        <View style={styles.cardRow}>\n          <Icon name=\"person\" size={20} color={COLORS.textSecondary} />\n          <Text style={styles.cardText}>{item.usuarios?.nombreusuario || 'Usuario desconocido'}</Text>\n        </View>\n\n        <View style={styles.cardRow}>\n          <Icon name=\"email\" size={20} color={COLORS.textSecondary} />\n          <Text style={styles.cardText}>{item.usuarios?.email || 'No especificado'}</Text>\n        </View>\n\n        <View style={styles.cardRow}>\n          <Icon name=\"date-range\" size={20} color={COLORS.textSecondary} />\n          <Text style={styles.cardText}>\n            {item.estado === 'Prestado' ? 'Préstamo: ' : 'Reserva: '}\n            {item.fechaCompleta}\n          </Text>\n        </View>\n\n        {item.equipos?.modelo && (\n          <View style={styles.cardRow}>\n            <Icon name=\"info\" size={20} color={COLORS.textSecondary} />\n            <Text style={styles.cardText}>Modelo: {item.equipos.modelo}</Text>\n          </View>\n        )}\n\n        {item.equipos?.numero_serie && (\n          <View style={styles.cardRow}>\n            <Icon name=\"tag\" size={20} color={COLORS.textSecondary} />\n            <Text style={styles.cardText}>Serie: {item.equipos.numero_serie}</Text>\n          </View>\n        )}\n      </View>\n\n      <View style={styles.cardFooter}>\n        <TouchableOpacity\n          style={[styles.actionButton, item.estado !== 'Prestado' && styles.disabledButton]}\n          onPress={() => {\n            setSelectedPrestamo(item);\n            setAction('devolver');\n            setModalAccionVisible(true);\n          }}\n          disabled={item.estado !== 'Prestado'}\n        >\n          <Icon name=\"assignment-return\" size={20} color={COLORS.background} />\n          <Text style={styles.actionButtonText}>Devolver</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n\n  if (loading && ((activeTab === 'equipos' && equipos.length === 0) || (activeTab === 'prestamos' && prestamos.length === 0))) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={COLORS.primary} />\n          <Text style={styles.loadingText}>Cargando...</Text>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.container}>\n      {/* Header con menú */}\n      <View style={styles.header}>\n        <TouchableOpacity \n          onPress={() => navigation.openDrawer()}\n          style={styles.menuButton}\n          hitSlop={{top: 20, bottom: 20, left: 20, right: 20}}\n        >\n          <Icon name=\"menu\" size={24} color={COLORS.text} />\n        </TouchableOpacity>\n        <Text style={styles.headerTitle}>\n          {activeTab === 'equipos' ? 'Gestión de Equipos' : 'Préstamos Activos'}\n        </Text>\n      </View>\n\n      <View style={[styles.content, { maxWidth: MAX_CONTENT_WIDTH }]}>\n        {/* Tabs */}\n        <View style={styles.tabsContainer}>\n          <TouchableOpacity\n            style={[styles.tabButton, activeTab === 'equipos' && styles.activeTab]}\n            onPress={() => setActiveTab('equipos')}\n          >\n            <MaterialCommunityIcons \n              name=\"devices\" \n              size={20} \n              color={activeTab === 'equipos' ? COLORS.primary : COLORS.textSecondary} \n            />\n            <Text style={[styles.tabText, activeTab === 'equipos' && styles.activeTabText]}>Equipos</Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[styles.tabButton, activeTab === 'prestamos' && styles.activeTab]}\n            onPress={() => setActiveTab('prestamos')}\n          >\n            <MaterialCommunityIcons \n              name=\"history\" \n              size={20} \n              color={activeTab === 'prestamos' ? COLORS.primary : COLORS.textSecondary} \n            />\n            <Text style={[styles.tabText, activeTab === 'prestamos' && styles.activeTabText]}>Préstamos</Text>\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.searchContainer}>\n          <Icon name=\"search\" size={20} color={COLORS.textSecondary} style={styles.searchIcon} />\n          <TextInput\n            style={styles.searchInput}\n            placeholder={`Buscar ${activeTab === 'equipos' ? 'equipos...' : 'préstamos...'}`}\n            value={searchQuery}\n            onChangeText={setSearchQuery}\n            placeholderTextColor={COLORS.textSecondary}\n          />\n        </View>\n\n        {/* Lista de Equipos */}\n        {activeTab === 'equipos' ? (\n          <FlatList\n            data={equipos}\n            renderItem={renderEquipo}\n            keyExtractor={(item) => item.idequipo.toString()}\n            refreshControl={\n              <RefreshControl\n                refreshing={refreshing}\n                onRefresh={handleRefresh}\n                colors={[COLORS.primary]}\n              />\n            }\n            contentContainerStyle={styles.listContent}\n            ListEmptyComponent={\n              <View style={styles.emptyContainer}>\n                <MaterialCommunityIcons name=\"devices\" size={60} color={COLORS.border} />\n                <Text style={styles.emptyText}>No se encontraron equipos</Text>\n                <Text style={styles.emptySubtext}>\n                  {searchQuery \n                    ? 'Prueba con otros términos de búsqueda' \n                    : 'No hay equipos disponibles en este momento'}\n                </Text>\n              </View>\n            }\n          />\n        ) : (\n          <FlatList\n            data={prestamos}\n            renderItem={renderPrestamo}\n            keyExtractor={(item) => item.idprestamo.toString()}\n            refreshControl={\n              <RefreshControl\n                refreshing={refreshing}\n                onRefresh={handleRefresh}\n                colors={[COLORS.primary]}\n              />\n            }\n            contentContainerStyle={styles.listContent}\n            ListEmptyComponent={\n              <View style={styles.emptyContainer}>\n                <MaterialCommunityIcons name=\"history\" size={60} color={COLORS.border} />\n                <Text style={styles.emptyText}>No se encontraron préstamos</Text>\n                <Text style={styles.emptySubtext}>\n                  {searchQuery \n                    ? 'Prueba con otros términos de búsqueda' \n                    : 'No hay préstamos activos registrados'}\n                </Text>\n              </View>\n            }\n          />\n        )}\n\n        {/* Modal para Préstamo */}\n        <Modal\n          visible={modalPrestamoVisible}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setModalPrestamoVisible(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <View style={styles.modalContainer}>\n              {selectedEquipo && (\n                <>\n                  <Text style={styles.modalTitle}>Registrar Préstamo</Text>\n                  \n                  <Text style={styles.modalText}>\n                    <Text style={styles.modalLabel}>Equipo: </Text>\n                    {selectedEquipo.nombreequipo}\n                  </Text>\n                  \n                  <Text style={styles.modalText}>\n                    <Text style={styles.modalLabel}>Hora del préstamo: </Text>\n                    {formatHora(horaReserva)}\n                  </Text>\n\n                  <TouchableOpacity \n                    style={styles.timeInput}\n                    onPress={() => setShowTimePicker(true)}\n                  >\n                    <Icon name=\"access-time\" size={20} color={COLORS.textSecondary} />\n                    <Text style={styles.timeInputText}>Cambiar hora: {formatHora(horaReserva)}</Text>\n                  </TouchableOpacity>\n\n                  {showTimePicker && (\n                    <DateTimePicker\n                      value={horaReserva}\n                      mode=\"time\"\n                      is24Hour={true}\n                      display={Platform.OS === 'ios' ? 'spinner' : 'default'}\n                      onChange={(event, selectedTime) => {\n                        setShowTimePicker(Platform.OS === 'ios');\n                        if (selectedTime) {\n                          setHoraReserva(selectedTime);\n                        }\n                      }}\n                      style={styles.picker}\n                    />\n                  )}\n\n                  <View style={styles.modalButtons}>\n                    <TouchableOpacity\n                      style={[styles.modalButton, styles.cancelButton]}\n                      onPress={() => setModalPrestamoVisible(false)}\n                    >\n                      <Text style={styles.modalButtonText}>Cancelar</Text>\n                    </TouchableOpacity>\n                    <TouchableOpacity\n                      style={[styles.modalButton, styles.confirmButton]}\n                      onPress={handlePrestamo}\n                    >\n                      <Text style={[styles.modalButtonText, styles.confirmButtonText]}>Confirmar Préstamo</Text>\n                    </TouchableOpacity>\n                  </View>\n                </>\n              )}\n            </View>\n          </View>\n        </Modal>\n\n        {/* Modal para Reserva */}\n        <Modal\n          visible={modalReservaVisible}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setModalReservaVisible(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <View style={styles.modalContainer}>\n              {selectedEquipo && (\n                <>\n                  <Text style={styles.modalTitle}>Registrar Reserva</Text>\n                  \n                  <Text style={styles.modalText}>\n                    <Text style={styles.modalLabel}>Equipo: </Text>\n                    {selectedEquipo.nombreequipo}\n                  </Text>\n                  \n                  <TouchableOpacity \n                    style={styles.dateInput}\n                    onPress={() => setShowDatePicker(true)}\n                  >\n                    <Icon name=\"calendar-today\" size={20} color={COLORS.textSecondary} />\n                    <Text style={styles.dateInputText}>Fecha: {formatFecha(fechaReserva)}</Text>\n                  </TouchableOpacity>\n\n                  <TouchableOpacity \n                    style={styles.timeInput}\n                    onPress={() => setShowTimePicker(true)}\n                  >\n                    <Icon name=\"access-time\" size={20} color={COLORS.textSecondary} />\n                    <Text style={styles.timeInputText}>Hora: {formatHora(horaReserva)}</Text>\n                  </TouchableOpacity>\n\n                  {showDatePicker && (\n                    <DateTimePicker\n                      value={fechaReserva}\n                      mode=\"date\"\n                      display={Platform.OS === 'ios' ? 'spinner' : 'default'}\n                      minimumDate={new Date()}\n                      onChange={(event, selectedDate) => {\n                        setShowDatePicker(Platform.OS === 'ios');\n                        if (selectedDate) {\n                          setFechaReserva(selectedDate);\n                        }\n                      }}\n                      style={styles.picker}\n                    />\n                  )}\n\n                  {showTimePicker && (\n                    <DateTimePicker\n                      value={horaReserva}\n                      mode=\"time\"\n                      is24Hour={true}\n                      display={Platform.OS === 'ios' ? 'spinner' : 'default'}\n                      onChange={(event, selectedTime) => {\n                        setShowTimePicker(Platform.OS === 'ios');\n                        if (selectedTime) {\n                          setHoraReserva(selectedTime);\n                        }\n                      }}\n                      style={styles.picker}\n                    />\n                  )}\n\n                  <View style={styles.modalButtons}>\n                    <TouchableOpacity\n                      style={[styles.modalButton, styles.cancelButton]}\n                      onPress={() => setModalReservaVisible(false)}\n                    >\n                      <Text style={styles.modalButtonText}>Cancelar</Text>\n                    </TouchableOpacity>\n                    <TouchableOpacity\n                      style={[styles.modalButton, styles.confirmButton]}\n                      onPress={handleReserva}\n                    >\n                      <Text style={[styles.modalButtonText, styles.confirmButtonText]}>Confirmar Reserva</Text>\n                    </TouchableOpacity>\n                  </View>\n                </>\n              )}\n            </View>\n          </View>\n        </Modal>\n\n        {/* Modal para Devolución */}\n        <Modal\n          visible={modalAccionVisible}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setModalAccionVisible(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <View style={styles.modalContainer}>\n              {selectedPrestamo && (\n                <>\n                  <Text style={styles.modalTitle}>Registrar Devolución</Text>\n                  \n                  <Text style={styles.modalText}>\n                    <Text style={styles.modalLabel}>Equipo: </Text>\n                    {selectedPrestamo.equipos?.nombreequipo || 'Desconocido'}\n                  </Text>\n                  \n                  <Text style={styles.modalText}>\n                    <Text style={styles.modalLabel}>Usuario: </Text>\n                    {selectedPrestamo.usuarios?.nombreusuario || 'Usuario desconocido'}\n                  </Text>\n                  \n                  <Text style={styles.modalText}>\n                    <Text style={styles.modalLabel}>Fecha: </Text>\n                    {selectedPrestamo.fechaCompleta}\n                  </Text>\n\n                  <View style={styles.modalButtons}>\n                    <TouchableOpacity\n                      style={[styles.modalButton, styles.cancelButton]}\n                      onPress={() => setModalAccionVisible(false)}\n                    >\n                      <Text style={styles.modalButtonText}>Cancelar</Text>\n                    </TouchableOpacity>\n                    <TouchableOpacity\n                      style={[styles.modalButton, styles.confirmButton]}\n                      onPress={handleAccionPrestamo}\n                    >\n                      <Text style={[styles.modalButtonText, styles.confirmButtonText]}>Confirmar Devolución</Text>\n                    </TouchableOpacity>\n                  </View>\n                </>\n              )}\n            </View>\n          </View>\n        </Modal>\n      </View>\n      <Toast />\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: COLORS.light,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: COLORS.background,\n    paddingVertical: 16,\n    paddingHorizontal: isMobile ? 20 : 30,\n    borderBottomWidth: 1,\n    borderBottomColor: COLORS.border,\n    shadowColor: COLORS.dark,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 10,\n    elevation: 3,\n    zIndex: 10,\n  },\n  menuButton: {\n    marginRight: 16,\n    padding: 8,\n    borderRadius: 20,\n    backgroundColor: COLORS.light,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 20 : 22,\n    fontWeight: '700',\n    color: COLORS.dark,\n    letterSpacing: 0.5,\n  },\n  content: {\n    flex: 1,\n    width: '100%',\n    alignSelf: 'center',\n    padding: isMobile ? 16 : 24,\n  },\n  tabsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 24,\n    backgroundColor: COLORS.background,\n    borderRadius: 12,\n    padding: 6,\n    shadowColor: COLORS.dark,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 8,\n    elevation: 2,\n  },\n  tabButton: {\n    flex: 1,\n    alignItems: 'center',\n    padding: 12,\n    borderRadius: 10,\n    flexDirection: 'row',\n    justifyContent: 'center',\n  },\n  activeTab: {\n    backgroundColor: COLORS.primary + '15', // 15% de opacidad\n  },\n  tabText: {\n    fontSize: 16,\n    color: COLORS.textSecondary,\n    marginLeft: 8,\n    fontWeight: '500',\n  },\n  activeTabText: {\n    color: COLORS.primary,\n    fontWeight: '600',\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: COLORS.background,\n    borderRadius: 12,\n    paddingHorizontal: 20,\n    paddingVertical: 8,\n    marginBottom: 20,\n    shadowColor: COLORS.dark,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 8,\n    elevation: 2,\n  },\n  searchIcon: {\n    marginRight: 12,\n    color: COLORS.textSecondary,\n  },\n  searchInput: {\n    flex: 1,\n    height: 48,\n    fontSize: 16,\n    color: COLORS.text,\n    fontFamily: Platform.OS === 'ios' ? 'System' : 'Roboto',\n  },\n  listContent: {\n    paddingBottom: 20,\n  },\n  card: {\n    backgroundColor: COLORS.cardBackground,\n    borderRadius: 16,\n    padding: 20,\n    marginBottom: 16,\n    shadowColor: COLORS.dark,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.05,\n    shadowRadius: 12,\n    elevation: 3,\n    borderWidth: 1,\n    borderColor: COLORS.border,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  cardTitleContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  cardTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: COLORS.text,\n    marginLeft: 12,\n  },\n  cardBody: {\n    marginBottom: 16,\n  },\n  cardRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  cardText: {\n    marginLeft: 12,\n    color: COLORS.textSecondary,\n    fontSize: 15,\n    flex: 1,\n    lineHeight: 22,\n  },\n  cardFooter: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 12,\n  },\n  actionButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 10,\n    backgroundColor: COLORS.primary,\n    flex: 1,\n    marginHorizontal: 6,\n    shadowColor: COLORS.primary,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.2,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  actionButtonText: {\n    color: COLORS.background,\n    marginLeft: 8,\n    fontWeight: '500',\n    fontSize: 15,\n  },\n  reserveButton: {\n    backgroundColor: COLORS.accent,\n    shadowColor: COLORS.accent,\n  },\n  deleteButton: {\n    backgroundColor: COLORS.danger,\n    shadowColor: COLORS.danger,\n  },\n  disabledButton: {\n    opacity: 0.6,\n  },\n  statusBadge: {\n    paddingHorizontal: 14,\n    paddingVertical: 6,\n    borderRadius: 14,\n    alignSelf: 'flex-start',\n  },\n  badgeAvailable: {\n    backgroundColor: COLORS.success,\n  },\n  badgeReserved: {\n    backgroundColor: COLORS.warning,\n  },\n  badgeUnavailable: {\n    backgroundColor: COLORS.danger,\n  },\n  badgeActive: {\n    backgroundColor: COLORS.primary,\n  },\n  badgeReturned: {\n    backgroundColor: COLORS.textSecondary,\n  },\n  statusText: {\n    color: COLORS.background,\n    fontWeight: '600',\n    fontSize: 12,\n    textTransform: 'uppercase',\n    letterSpacing: 0.5,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 40,\n  },\n  emptyText: {\n    fontSize: 18,\n    marginTop: 20,\n    color: COLORS.text,\n    textAlign: 'center',\n    fontWeight: '500',\n  },\n  emptySubtext: {\n    fontSize: 15,\n    marginTop: 10,\n    color: COLORS.textSecondary,\n    textAlign: 'center',\n    lineHeight: 22,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: 20,\n    fontSize: 16,\n    color: COLORS.textSecondary,\n  },\n  modalOverlay: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.4)',\n  },\n  modalContainer: {\n    width: isMobile ? '90%' : '70%',\n    maxWidth: 500,\n    backgroundColor: COLORS.background,\n    borderRadius: 16,\n    padding: 24,\n    shadowColor: COLORS.dark,\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 20,\n    elevation: 5,\n  },\n  modalTitle: {\n    fontSize: 22,\n    fontWeight: '600',\n    marginBottom: 24,\n    color: COLORS.text,\n    textAlign: 'center',\n  },\n  modalText: {\n    marginBottom: 16,\n    fontSize: 16,\n    lineHeight: 24,\n    color: COLORS.text,\n  },\n  modalLabel: {\n    fontWeight: '600',\n    color: COLORS.text,\n  },\n  dateInput: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderWidth: 1,\n    borderColor: COLORS.border,\n    borderRadius: 12,\n    marginBottom: 16,\n    backgroundColor: COLORS.background,\n  },\n  timeInput: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderWidth: 1,\n    borderColor: COLORS.border,\n    borderRadius: 12,\n    marginBottom: 20,\n    backgroundColor: COLORS.background,\n  },\n  dateInputText: {\n    marginLeft: 12,\n    fontSize: 16,\n    color: COLORS.text,\n  },\n  timeInputText: {\n    marginLeft: 12,\n    fontSize: 16,\n    color: COLORS.text,\n  },\n  picker: {\n    width: '100%',\n    backgroundColor: COLORS.background,\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    marginTop: 24,\n  },\n  modalButton: {\n    paddingVertical: 14,\n    paddingHorizontal: 24,\n    borderRadius: 12,\n    marginLeft: 16,\n    minWidth: 120,\n    alignItems: 'center',\n  },\n  cancelButton: {\n    backgroundColor: COLORS.light,\n    borderWidth: 1,\n    borderColor: COLORS.border,\n  },\n  confirmButton: {\n    backgroundColor: COLORS.primary,\n    shadowColor: COLORS.primary,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.2,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  modalButtonText: {\n    fontWeight: '500',\n    fontSize: 16,\n  },\n  confirmButtonText: {\n    color: COLORS.background,\n  },\n});\n\nexport default PrestamosUsuariosScreen;","import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  Text, \n  StyleSheet, \n  TouchableOpacity, \n  Modal, \n  FlatList, \n  ActivityIndicator, \n  Alert,\n  Linking,\n  SafeAreaView,\n  StatusBar,\n  Platform\n} from 'react-native';\nimport { Camera } from 'expo-camera';\nimport { MaterialIcons } from '@expo/vector-icons';\nimport { supabase } from '../../lib/supabase';\nimport MenuUsuario from '../../components/MenuUsuario';\nimport QRScannerModal from '../../components/QRScannerModal'; // Asegúrate de tener este componente\n\nconst DevolucionesUsuariosScreen = ({ navigation }) => {\n  const [prestamosActivos, setPrestamosActivos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [scannerVisible, setScannerVisible] = useState(false);\n  const [menuVisible, setMenuVisible] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n\n  const cargarPrestamosActivos = async () => {\n    try {\n      setLoading(true);\n      const { data, error } = await supabase\n        .from('prestamos')\n        .select(`\n          idprestamo,\n          estado,\n          fechaprestamo,\n          fechadevolucion_prevista,\n          idequipo,\n          equipos(nombreequipo, estado, categoriasequipos(nombrecategoria)),\n          personal(nombre_completo, tipo_persona)\n        `)\n        .eq('estado', 'Prestado')\n        .order('fechaprestamo', { ascending: false });\n\n      if (error) throw error;\n      setPrestamosActivos(data || []);\n    } catch (error) {\n      console.error('Error cargando préstamos:', error);\n      Alert.alert('Error', 'No se pudieron cargar los préstamos activos');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  const handleRefresh = () => {\n    setRefreshing(true);\n    cargarPrestamosActivos();\n  };\n\n  const handleScan = async (qrData) => {\n    try {\n      setScannerVisible(false);\n      setLoading(true);\n      \n      const equipoId = qrData.split('/').pop();\n      \n      const { data: prestamo, error } = await supabase\n        .from('prestamos')\n        .select(`\n          idprestamo,\n          idequipo,\n          equipos(nombreequipo, estado, categoriasequipos(nombrecategoria)),\n          personal(nombre_completo, tipo_persona)\n        `)\n        .eq('estado', 'Prestado')\n        .eq('equipos.idequipo', equipoId)\n        .single();\n  \n      if (error || !prestamo) {\n        throw error || new Error('Préstamo no encontrado para este equipo');\n      }\n      \n      if (prestamo.equipos?.estado !== 'prestado') {\n        throw new Error('El equipo no está marcado como prestado en el sistema');\n      }\n  \n      confirmarDevolucion(prestamo);\n    } catch (error) {\n      console.error('Error en devolución por QR:', error);\n      Alert.alert(\n        'Error', \n        error.message || 'No se encontró un préstamo activo para este equipo'\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const confirmarDevolucion = (prestamo) => {\n    Alert.alert(\n      'Confirmar Devolución',\n      `¿Desea registrar la devolución del equipo?\\n\\n` +\n      `Equipo: ${prestamo.equipos?.nombreequipo}\\n` +\n      `Categoría: ${prestamo.equipos?.categoriasequipos?.nombrecategoria || 'N/A'}\\n` +\n      `Prestado a: ${prestamo.personal?.nombre_completo}\\n` +\n      `Tipo: ${prestamo.personal?.tipo_persona || 'No especificado'}`,\n      [\n        { \n          text: 'Cancelar', \n          style: 'cancel',\n          onPress: () => console.log('Devolución cancelada') \n        },\n        { \n          text: 'Confirmar', \n          onPress: () => procesarDevolucion(prestamo) \n        }\n      ]\n    );\n  };\n\n  const procesarDevolucion = async (prestamo) => {\n    try {\n      setLoading(true);\n      \n      const { data, error } = await supabase\n        .rpc('registrar_devolucion_app', { \n          p_idprestamo: prestamo.idprestamo \n        });\n      \n      if (error || data?.error) {\n        throw new Error(error?.message || data?.message || 'Error en la devolución');\n      }\n  \n      Alert.alert(\n        'Éxito', \n        'Devolución registrada correctamente',\n        [{ text: 'OK', onPress: () => cargarPrestamosActivos() }]\n      );\n    } catch (error) {\n      console.error('Error en devolución:', error);\n      Alert.alert(\n        'Error', \n        `No se pudo completar la devolución: ${error.message}`\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n  const renderPrestamoItem = ({ item }) => (\n    <TouchableOpacity \n      style={styles.listItem}\n      onPress={() => navigation.navigate('DetallePrestamo', { prestamoId: item.idprestamo })}\n      onLongPress={() => confirmarDevolucion(item)}\n    >\n      <View style={styles.prestamoInfo}>\n        <Text style={styles.listItemTitle}>{item.equipos?.nombreequipo}</Text>\n        <Text style={styles.listItemText}>\n          <Text style={styles.label}>Prestado a: </Text>\n          {item.personal?.nombre_completo}\n        </Text>\n        <Text style={styles.listItemSubText}>\n          <Text style={styles.label}>Fecha préstamo: </Text>\n          {new Date(item.fechaprestamo).toLocaleDateString()}\n        </Text>\n        {item.fechadevolucion_prevista && (\n          <Text style={styles.listItemSubText}>\n            <Text style={styles.label}>Devolución prevista: </Text>\n            {new Date(item.fechadevolucion_prevista).toLocaleDateString()}\n          </Text>\n        )}\n      </View>\n      <TouchableOpacity \n        style={styles.devolverButton}\n        onPress={() => confirmarDevolucion(item)}\n      >\n        <Text style={styles.devolverButtonText}>Devolver</Text>\n      </TouchableOpacity>\n    </TouchableOpacity>\n  );\n\n  useEffect(() => {\n    const unsubscribe = navigation.addListener('focus', cargarPrestamosActivos);\n    return unsubscribe;\n  }, [navigation]);\n\n  const toggleMenu = () => setMenuVisible(!menuVisible);\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <StatusBar barStyle=\"dark-content\" backgroundColor=\"#f8f9fa\" />\n      \n      <Modal\n        animationType=\"slide\"\n        transparent={false}\n        visible={menuVisible}\n        onRequestClose={() => setMenuVisible(false)}\n      >\n        <MenuUsuario navigation={navigation} onClose={() => setMenuVisible(false)} />\n      </Modal>\n\n      <View style={styles.container}>\n        <View style={styles.header}>\n          <TouchableOpacity onPress={toggleMenu} style={styles.menuButton}>\n            <MaterialIcons name=\"menu\" size={28} color=\"#4a6da7\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Devolución de Equipos</Text>\n          <TouchableOpacity \n            onPress={() => setScannerVisible(true)}\n            style={styles.scanButton}\n            disabled={loading}\n          >\n            <MaterialIcons \n              name=\"qr-code-scanner\" \n              size={28} \n              color={loading ? '#adb5bd' : '#4a6da7'} \n            />\n          </TouchableOpacity>\n        </View>\n\n        <FlatList\n          data={prestamosActivos}\n          renderItem={renderPrestamoItem}\n          keyExtractor={(item) => item.idprestamo.toString()}\n          contentContainerStyle={styles.listContainer}\n          ListEmptyComponent={\n            <View style={styles.emptyContainer}>\n              {loading ? (\n                <>\n                  <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\n                  <Text style={styles.loadingText}>Cargando préstamos...</Text>\n                </>\n              ) : (\n                <>\n                  <MaterialIcons name=\"assignment-return\" size={50} color=\"#6c757d\" />\n                  <Text style={styles.emptyText}>No hay préstamos activos</Text>\n                </>\n              )}\n            </View>\n          }\n          refreshing={refreshing}\n          onRefresh={handleRefresh}\n        />\n\n        <QRScannerModal\n          visible={scannerVisible}\n          onClose={() => setScannerVisible(false)}\n          onScan={handleScan}\n        />\n\n        {loading && (\n          <View style={styles.loadingOverlay}>\n            <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\n            <Text style={styles.loadingText}>Procesando...</Text>\n          </View>\n        )}\n      </View>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n    paddingTop: Platform.OS === 'android' ? StatusBar.currentHeight : 0,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 15,\n    backgroundColor: 'white',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  menuButton: {\n    padding: 8,\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: '#343a40',\n  },\n  scanButton: {\n    padding: 8,\n  },\n  listContainer: {\n    padding: 15,\n    paddingBottom: 20,\n    flexGrow: 1,\n  },\n  listItem: {\n    backgroundColor: 'white',\n    padding: 15,\n    borderRadius: 8,\n    marginBottom: 10,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  prestamoInfo: {\n    flex: 1,\n    marginRight: 10,\n  },\n  listItemTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#343a40',\n    marginBottom: 4,\n  },\n  listItemText: {\n    fontSize: 14,\n    color: '#495057',\n    marginVertical: 2,\n  },\n  listItemSubText: {\n    fontSize: 13,\n    color: '#6c757d',\n    marginVertical: 2,\n  },\n  label: {\n    color: '#6c757d',\n    fontWeight: 'normal',\n  },\n  devolverButton: {\n    backgroundColor: '#28a745',\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    borderRadius: 6,\n    minWidth: 80,\n    alignItems: 'center',\n  },\n  devolverButtonText: {\n    color: 'white',\n    fontWeight: '500',\n    fontSize: 14,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: '#6c757d',\n    marginTop: 10,\n    textAlign: 'center',\n  },\n  loadingOverlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: 'rgba(255, 255, 255, 0.9)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 10,\n  },\n  loadingText: {\n    marginTop: 10,\n    fontSize: 16,\n    color: '#6c757d',\n  }\n});\n\nexport default DevolucionesUsuariosScreen;","import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  Text, \n  StyleSheet, \n  ScrollView, \n  TouchableOpacity, \n  ActivityIndicator,\n  Dimensions,\n  SafeAreaView,\n  TextInput,\n  Platform,\n  FlatList\n} from 'react-native';\nimport { Picker } from '@react-native-picker/picker';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../../lib/supabase';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst isWeb = Platform.OS === 'web';\nconst MAX_CONTENT_WIDTH = 1200;\n\nconst AgregarMantenimientoScreen = () => {\n  const navigation = useNavigation();\n  const [loading, setLoading] = useState(false);\n  const [loadingEquipos, setLoadingEquipos] = useState(true);\n  const [equipos, setEquipos] = useState([]);\n  const [categorias, setCategorias] = useState([]);\n  const [filtroCategoria, setFiltroCategoria] = useState('');\n  const [formData, setFormData] = useState({\n    idequipo: '',\n    tipomantenimiento: 'Preventivo',\n    observaciones: ''\n  });\n  const [user, setUser] = useState(null);\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n  const [showErrorMessage, setShowErrorMessage] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n\n  // Obtener usuario actual\n  useEffect(() => {\n    const fetchUser = async () => {\n      const { data: { user }, error } = await supabase.auth.getUser();\n      if (error) {\n        showError('Error obteniendo usuario');\n        return;\n      }\n      setUser(user);\n    };\n    fetchUser();\n  }, []);\n\n  // Obtener categorías de equipos\n  useEffect(() => {\n    const fetchCategorias = async () => {\n      try {\n        const { data, error } = await supabase\n          .from('categoriasequipos')\n          .select('idcategoria, nombrecategoria')\n          .order('nombrecategoria', { ascending: true });\n\n        if (error) throw error;\n        setCategorias(data || []);\n      } catch (error) {\n        showError('Error al cargar categorías');\n      }\n    };\n    fetchCategorias();\n  }, []);\n\n  // Obtener equipos disponibles\n  useEffect(() => {\n    fetchEquiposDisponibles();\n  }, [filtroCategoria]);\n\n  const fetchEquiposDisponibles = async () => {\n    try {\n      setLoadingEquipos(true);\n      \n      let query = supabase\n        .from('equipos')\n        .select('idequipo, nombreequipo, idcategoria')\n        .eq('estado', 'disponible')\n        .order('nombreequipo', { ascending: true });\n\n      if (filtroCategoria) {\n        query = query.eq('idcategoria', filtroCategoria);\n      }\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n      setEquipos(data || []);\n    } catch (error) {\n      showError('Error al cargar equipos disponibles');\n    } finally {\n      setLoadingEquipos(false);\n    }\n  };\n\n  const handleChange = (name, value) => {\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  const showSuccess = (message) => {\n    setSuccessMessage(message);\n    setShowSuccessMessage(true);\n    setTimeout(() => setShowSuccessMessage(false), 3000);\n  };\n\n  const showError = (message) => {\n    setErrorMessage(message);\n    setShowErrorMessage(true);\n    setTimeout(() => setShowErrorMessage(false), 3000);\n    \n    if (isWeb) {\n      console.error(message);\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (!formData.idequipo) {\n      showError('Por favor seleccione un equipo disponible');\n      return;\n    }\n\n    if (!user) {\n      showError('No se pudo identificar al usuario');\n      return;\n    }\n\n    setLoading(true);\n    setShowSuccessMessage(false);\n    setShowErrorMessage(false);\n    \n    try {\n      // Obtener fecha y hora actual del sistema\n      const now = new Date();\n      const fechaFormateada = now.toISOString().split('T')[0];\n      const horaInicioFormateada = now.toTimeString().substring(0, 8);\n\n      // Insertar en historial_mantenimiento\n      const { data: historialData, error: historialError } = await supabase\n        .from('historial_mantenimiento')\n        .insert([{\n          idequipo: parseInt(formData.idequipo),\n          idusuario_registro: user.id,\n          fechamantenimiento: fechaFormateada,\n          horamantenimiento: horaInicioFormateada,\n          tipomantenimiento: formData.tipomantenimiento,\n          observaciones: formData.observaciones || null,\n          accion: 'Registro inicial'\n        }])\n        .select();\n\n      if (historialError) throw historialError;\n\n      // Insertar en mantenimiento\n      const { data: mantenimientoData, error: mantenimientoError } = await supabase\n        .from('mantenimiento')\n        .insert([{\n          idequipo: parseInt(formData.idequipo),\n          idusuario_registro: user.id,\n          tipomantenimiento: formData.tipomantenimiento.toLowerCase(),\n          observaciones: formData.observaciones || null,\n          estado: 'en mantenimiento'\n        }])\n        .select();\n\n      if (mantenimientoError) throw mantenimientoError;\n\n      // Actualizar estado del equipo\n      const { error: equipoError } = await supabase\n        .from('equipos')\n        .update({ estado: 'en mantenimiento' })\n        .eq('idequipo', parseInt(formData.idequipo));\n\n      if (equipoError) throw equipoError;\n\n      showSuccess('Mantenimiento registrado correctamente');\n      \n      // Resetear formulario después de éxito\n      setFormData({\n        idequipo: '',\n        tipomantenimiento: 'Preventivo',\n        observaciones: ''\n      });\n      \n      // Refrescar lista de equipos\n      fetchEquiposDisponibles();\n      \n      // Navegar atrás después de 2 segundos\n      setTimeout(() => {\n        navigation.goBack();\n      }, 2000);\n    } catch (error) {\n      console.error('Error al registrar mantenimiento:', error);\n      \n      let mensajeError = 'Error al registrar el mantenimiento';\n      \n      if (error.message.includes('El equipo ya no está disponible')) {\n        mensajeError = 'El equipo ya no está disponible';\n      } else if (error.message.includes('duplicate key value')) {\n        mensajeError = 'Ya existe un mantenimiento para este equipo';\n      } else if (error.message.includes('foreign key constraint')) {\n        mensajeError = 'Error: Datos inválidos';\n      } else if (error.code === '23502') {\n        mensajeError = 'Faltan datos requeridos';\n      }\n      \n      showError(mensajeError);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <View style={styles.container}>\n        {/* Header */}\n        <View style={styles.header}>\n          <TouchableOpacity \n            onPress={() => navigation.goBack()}\n            style={styles.backButton}\n          >\n            <Icon name=\"arrow-back\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Agregar Mantenimiento</Text>\n        </View>\n\n        {/* Mensajes flotantes (web) */}\n        {isWeb && showSuccessMessage && (\n          <View style={styles.webSuccessMessage}>\n            <Icon name=\"check-circle\" size={20} color=\"#10B981\" />\n            <Text style={styles.webSuccessText}>{successMessage}</Text>\n          </View>\n        )}\n\n        {isWeb && showErrorMessage && (\n          <View style={styles.webErrorMessage}>\n            <Icon name=\"error\" size={20} color=\"#EF4444\" />\n            <Text style={styles.webErrorText}>{errorMessage}</Text>\n          </View>\n        )}\n\n        <ScrollView \n          contentContainerStyle={styles.scrollContent}\n          showsVerticalScrollIndicator={false}\n          keyboardShouldPersistTaps=\"handled\"\n        >\n          <View style={styles.content}>\n            <View style={styles.card}>\n              <View style={styles.cardHeader}>\n                <Text style={styles.cardTitle}>Registrar Nuevo Mantenimiento</Text>\n              </View>\n              \n              <View style={styles.cardBody}>\n                {/* Filtro por categoría */}\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>Filtrar por categoría</Text>\n                  <View style={styles.pickerContainer}>\n                    <Picker\n                      selectedValue={filtroCategoria}\n                      onValueChange={setFiltroCategoria}\n                      style={styles.picker}\n                      dropdownIconColor=\"#666\"\n                    >\n                      <Picker.Item label=\"Todas las categorías\" value=\"\" />\n                      {categorias.map(categoria => (\n                        <Picker.Item \n                          key={categoria.idcategoria} \n                          label={categoria.nombrecategoria} \n                          value={categoria.idcategoria} \n                        />\n                      ))}\n                    </Picker>\n                  </View>\n                </View>\n\n                {/* Selección de equipo */}\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>Equipo Disponible *</Text>\n                  {loadingEquipos ? (\n                    <View style={styles.loadingContainer}>\n                      <ActivityIndicator size=\"small\" color=\"#3B82F6\" />\n                      <Text style={styles.loadingText}>Cargando equipos...</Text>\n                    </View>\n                  ) : (\n                    <View style={styles.pickerContainer}>\n                      <Picker\n                        selectedValue={formData.idequipo}\n                        onValueChange={(value) => handleChange('idequipo', value)}\n                        style={styles.picker}\n                        dropdownIconColor=\"#666\"\n                      >\n                        <Picker.Item label=\"Seleccione un equipo\" value=\"\" />\n                        {equipos.map(equipo => (\n                          <Picker.Item \n                            key={equipo.idequipo} \n                            label={equipo.nombreequipo} \n                            value={equipo.idequipo} \n                          />\n                        ))}\n                      </Picker>\n                    </View>\n                  )}\n                </View>\n\n                {/* Tipo de mantenimiento */}\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>Tipo de mantenimiento *</Text>\n                  <View style={styles.pickerContainer}>\n                    <Picker\n                      selectedValue={formData.tipomantenimiento}\n                      onValueChange={(value) => handleChange('tipomantenimiento', value)}\n                      style={styles.picker}\n                      dropdownIconColor=\"#666\"\n                    >\n                      <Picker.Item label=\"Preventivo\" value=\"Preventivo\" />\n                      <Picker.Item label=\"Correctivo\" value=\"Correctivo\" />\n                    </Picker>\n                  </View>\n                </View>\n\n                {/* Observaciones */}\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>Observaciones</Text>\n                  <TextInput\n                    style={styles.textInput}\n                    multiline\n                    numberOfLines={4}\n                    placeholder=\"Describa las observaciones del mantenimiento...\"\n                    value={formData.observaciones}\n                    onChangeText={(text) => handleChange('observaciones', text)}\n                  />\n                </View>\n\n                {/* Información de registro */}\n                <View style={styles.infoBox}>\n                  <Icon name=\"info-outline\" size={20} color=\"#3B82F6\" />\n                  <View style={styles.infoTextContainer}>\n                    <Text style={styles.infoText}>Registrado por: {user?.email || 'Usuario actual'}</Text>\n                    <Text style={styles.infoText}>Fecha y hora: Se registrarán automáticamente</Text>\n                  </View>\n                </View>\n\n                {/* Botón de enviar */}\n                <TouchableOpacity \n                  style={[\n                    styles.button, \n                    (loading || !formData.idequipo) && styles.buttonDisabled\n                  ]}\n                  onPress={handleSubmit}\n                  disabled={loading || !formData.idequipo}\n                >\n                  {loading ? (\n                    <ActivityIndicator color=\"#fff\" />\n                  ) : (\n                    <View style={styles.buttonContent}>\n                      <MaterialCommunityIcons name=\"toolbox\" size={20} color=\"#fff\" />\n                      <Text style={styles.buttonText}>Registrar Mantenimiento</Text>\n                    </View>\n                  )}\n                </TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </ScrollView>\n      </View>\n\n      {/* Alertas para móvil */}\n      {!isWeb && showSuccessMessage && (\n        <View style={styles.mobileSuccessMessage}>\n          <Icon name=\"check-circle\" size={20} color=\"#10B981\" />\n          <Text style={styles.mobileMessageText}>{successMessage}</Text>\n        </View>\n      )}\n\n      {!isWeb && showErrorMessage && (\n        <View style={styles.mobileErrorMessage}>\n          <Icon name=\"error\" size={20} color=\"#EF4444\" />\n          <Text style={styles.mobileMessageText}>{errorMessage}</Text>\n        </View>\n      )}\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#ffffff',\n    paddingVertical: 16,\n    paddingHorizontal: isMobile ? 16 : 24,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  backButton: {\n    marginRight: 16,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 18 : 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n  },\n  scrollContent: {\n    flexGrow: 1,\n    paddingBottom: 24,\n  },\n  content: {\n    width: '100%',\n    maxWidth: MAX_CONTENT_WIDTH,\n    alignSelf: 'center',\n    paddingHorizontal: isMobile ? 16 : 24,\n  },\n  card: {\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    marginTop: 24,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n  },\n  cardHeader: {\n    padding: isMobile ? 16 : 20,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  cardTitle: {\n    fontSize: isMobile ? 16 : 18,\n    fontWeight: '600',\n    color: '#2c3e50',\n  },\n  cardBody: {\n    padding: isMobile ? 16 : 20,\n  },\n  formGroup: {\n    marginBottom: 20,\n  },\n  label: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginBottom: 8,\n    fontWeight: '500',\n  },\n  pickerContainer: {\n    borderWidth: 1,\n    borderColor: '#ced4da',\n    borderRadius: 6,\n    overflow: 'hidden',\n  },\n  picker: {\n    height: 50,\n    width: '100%',\n    color: '#495057',\n  },\n  textInput: {\n    borderWidth: 1,\n    borderColor: '#ced4da',\n    borderRadius: 6,\n    padding: 12,\n    minHeight: 100,\n    textAlignVertical: 'top',\n    backgroundColor: '#ffffff',\n  },\n  loadingContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 10,\n  },\n  loadingText: {\n    marginLeft: 10,\n    color: '#64748B',\n  },\n  infoBox: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#e7f1ff',\n    padding: 12,\n    borderRadius: 6,\n    marginBottom: 20,\n    borderLeftWidth: 4,\n    borderLeftColor: '#3B82F6',\n  },\n  infoTextContainer: {\n    marginLeft: 10,\n  },\n  infoText: {\n    color: '#1E40AF',\n    fontSize: 14,\n    lineHeight: 20,\n  },\n  button: {\n    backgroundColor: '#4a6da7',\n    borderRadius: 6,\n    padding: 14,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: 10,\n    flexDirection: 'row',\n  },\n  buttonContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  buttonText: {\n    color: '#ffffff',\n    fontSize: 16,\n    fontWeight: '600',\n    marginLeft: 10,\n  },\n  buttonDisabled: {\n    backgroundColor: '#95a5a6',\n    opacity: 0.7,\n  },\n  // Estilos para mensajes web\n  webSuccessMessage: {\n    position: 'fixed',\n    top: 20,\n    left: '50%',\n    transform: [{ translateX: -180 }],\n    width: 360,\n    backgroundColor: '#D1FAE5',\n    padding: 16,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    zIndex: 1000,\n  },\n  webSuccessText: {\n    color: '#065F46',\n    marginLeft: 10,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  webErrorMessage: {\n    position: 'fixed',\n    top: 20,\n    left: '50%',\n    transform: [{ translateX: -180 }],\n    width: 360,\n    backgroundColor: '#FEE2E2',\n    padding: 16,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    zIndex: 1000,\n  },\n  webErrorText: {\n    color: '#B91C1C',\n    marginLeft: 10,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  // Estilos para mensajes móviles\n  mobileSuccessMessage: {\n    position: 'absolute',\n    bottom: 20,\n    left: 20,\n    right: 20,\n    backgroundColor: '#D1FAE5',\n    padding: 16,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    zIndex: 1000,\n  },\n  mobileErrorMessage: {\n    position: 'absolute',\n    bottom: 20,\n    left: 20,\n    right: 20,\n    backgroundColor: '#FEE2E2',\n    padding: 16,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    zIndex: 1000,\n  },\n  mobileMessageText: {\n    marginLeft: 10,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n});\n\nexport default AgregarMantenimientoScreen;","import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  Text, \n  StyleSheet, \n  ScrollView, \n  TouchableOpacity, \n  ActivityIndicator,\n  Dimensions,\n  SafeAreaView,\n  TextInput,\n  Platform\n} from 'react-native';\nimport { Picker } from '@react-native-picker/picker';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../../lib/supabase';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst isWeb = Platform.OS === 'web';\nconst MAX_CONTENT_WIDTH = 1200;\n\nconst DevolverMantenimientoScreen = () => {\n  const navigation = useNavigation();\n  const [loading, setLoading] = useState(false);\n  const [loadingMantenimientos, setLoadingMantenimientos] = useState(true);\n  const [mantenimientos, setMantenimientos] = useState([]);\n  const [formData, setFormData] = useState({\n    idhistorialmantenimiento: '',\n    observaciones: ''\n  });\n  const [user, setUser] = useState(null);\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n  const [showErrorMessage, setShowErrorMessage] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n\n  // Obtener usuario actual\n  useEffect(() => {\n    const fetchUser = async () => {\n      const { data: { user }, error } = await supabase.auth.getUser();\n      if (error) {\n        showError('Error obteniendo usuario');\n        return;\n      }\n      setUser(user);\n    };\n    fetchUser();\n  }, []);\n\n  // Obtener mantenimientos activos\n  useEffect(() => {\n    fetchMantenimientosActivos();\n  }, []);\n\n  const fetchMantenimientosActivos = async () => {\n    try {\n      setLoadingMantenimientos(true);\n      \n      const { data, error } = await supabase\n        .from('historial_mantenimiento')\n        .select(`\n          idhistorialmantenimiento, \n          idequipo, \n          fechamantenimiento,\n          horamantenimiento,\n          tipomantenimiento,\n          equipos:equipos(nombreequipo),\n          usuarios:usuarios(nombreusuario)\n        `)\n        .is('horadevolucion', null)\n        .order('fechamantenimiento', { ascending: false });\n\n      if (error) throw error;\n      setMantenimientos(data || []);\n    } catch (error) {\n      showError('No se pudieron cargar los mantenimientos activos');\n      console.error('Error fetching maintenance:', error);\n    } finally {\n      setLoadingMantenimientos(false);\n    }\n  };\n\n  const handleChange = (name, value) => {\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  const showSuccess = (message) => {\n    setSuccessMessage(message);\n    setShowSuccessMessage(true);\n    setTimeout(() => setShowSuccessMessage(false), 3000);\n  };\n\n  const showError = (message) => {\n    setErrorMessage(message);\n    setShowErrorMessage(true);\n    setTimeout(() => setShowErrorMessage(false), 3000);\n    \n    if (isWeb) {\n      console.error(message);\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (!formData.idhistorialmantenimiento) {\n      showError('Por favor seleccione un mantenimiento');\n      return;\n    }\n\n    if (!user) {\n      showError('No se pudo identificar al usuario');\n      return;\n    }\n\n    setLoading(true);\n    setShowSuccessMessage(false);\n    setShowErrorMessage(false);\n    \n    try {\n      // Obtener la fecha y hora actual del sistema\n      const now = new Date();\n      const horaDevolucionFormateada = now.toTimeString().substring(0, 8);\n\n      // 1. Actualizar el mantenimiento en historial_mantenimiento\n      const { data: mantenimientoData, error: mantenimientoError } = await supabase\n        .from('historial_mantenimiento')\n        .update({\n          horadevolucion: horaDevolucionFormateada,\n          observaciones: formData.observaciones || null,\n          accion: 'Mantenimiento completado'\n        })\n        .eq('idhistorialmantenimiento', parseInt(formData.idhistorialmantenimiento))\n        .select()\n        .single();\n\n      if (mantenimientoError) throw mantenimientoError;\n\n      // 2. Obtener el idequipo del mantenimiento\n      const mantenimientoSeleccionado = mantenimientos.find(\n        m => m.idhistorialmantenimiento.toString() === formData.idhistorialmantenimiento\n      );\n\n      if (!mantenimientoSeleccionado) {\n        throw new Error('No se encontró el mantenimiento seleccionado');\n      }\n\n      // 3. Actualizar el estado del equipo\n      const { error: equipoError } = await supabase\n        .from('equipos')\n        .update({ estado: 'disponible' })\n        .eq('idequipo', mantenimientoSeleccionado.idequipo);\n\n      if (equipoError) throw equipoError;\n\n      // 4. Actualizar la tabla mantenimiento\n      const { error: mantenimientoEstadoError } = await supabase\n        .from('mantenimiento')\n        .update({\n          estado: 'completado',\n          fechafin: now.toISOString()\n        })\n        .eq('idequipo', mantenimientoSeleccionado.idequipo)\n        .eq('estado', 'en mantenimiento');\n\n      if (mantenimientoEstadoError) throw mantenimientoEstadoError;\n\n      showSuccess('Devolución registrada correctamente');\n      \n      // Resetear formulario\n      setFormData({\n        idhistorialmantenimiento: '',\n        observaciones: ''\n      });\n      \n      // Refrescar lista de mantenimientos\n      fetchMantenimientosActivos();\n      \n      // Navegar atrás después de 2 segundos\n      setTimeout(() => {\n        navigation.goBack();\n      }, 2000);\n    } catch (error) {\n      console.error('Error al registrar devolución:', error);\n      \n      let mensajeError = 'Error al registrar la devolución';\n      \n      if (error.message.includes('No se encontró el mantenimiento')) {\n        mensajeError = 'Mantenimiento no encontrado';\n      } else if (error.message.includes('foreign key constraint')) {\n        mensajeError = 'Error: Datos inválidos';\n      } else if (error.code === '23502') {\n        mensajeError = 'Faltan datos requeridos';\n      }\n      \n      showError(mensajeError);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <View style={styles.container}>\n        {/* Header */}\n        <View style={styles.header}>\n          <TouchableOpacity \n            onPress={() => navigation.openDrawer()}\n            style={styles.menuButton}\n          >\n            <Icon name=\"menu\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Devolver Equipo de Mantenimiento</Text>\n          <TouchableOpacity \n            onPress={fetchMantenimientosActivos}\n            style={styles.refreshButton}\n          >\n            <Icon name=\"refresh\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n        </View>\n\n        {/* Mensajes flotantes (web) */}\n        {isWeb && showSuccessMessage && (\n          <View style={styles.webSuccessMessage}>\n            <Icon name=\"check-circle\" size={20} color=\"#10B981\" />\n            <Text style={styles.webSuccessText}>{successMessage}</Text>\n          </View>\n        )}\n\n        {isWeb && showErrorMessage && (\n          <View style={styles.webErrorMessage}>\n            <Icon name=\"error\" size={20} color=\"#EF4444\" />\n            <Text style={styles.webErrorText}>{errorMessage}</Text>\n          </View>\n        )}\n\n        <ScrollView \n          contentContainerStyle={styles.scrollContent}\n          showsVerticalScrollIndicator={false}\n          keyboardShouldPersistTaps=\"handled\"\n        >\n          <View style={styles.content}>\n            <View style={styles.card}>\n              <View style={styles.cardHeader}>\n                <Text style={styles.cardTitle}>Registrar Devolución</Text>\n              </View>\n              \n              <View style={styles.cardBody}>\n                {/* Selección de mantenimiento */}\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>Mantenimiento Activo *</Text>\n                  {loadingMantenimientos ? (\n                    <View style={styles.loadingContainer}>\n                      <ActivityIndicator size=\"small\" color=\"#3B82F6\" />\n                      <Text style={styles.loadingText}>Cargando mantenimientos...</Text>\n                    </View>\n                  ) : (\n                    <View style={styles.pickerContainer}>\n                      <Picker\n                        selectedValue={formData.idhistorialmantenimiento}\n                        onValueChange={(value) => handleChange('idhistorialmantenimiento', value)}\n                        style={styles.picker}\n                        dropdownIconColor=\"#666\"\n                      >\n                        <Picker.Item label=\"Seleccione un mantenimiento\" value=\"\" />\n                        {mantenimientos.map(mantenimiento => (\n                          <Picker.Item \n                            key={mantenimiento.idhistorialmantenimiento} \n                            label={`${mantenimiento.equipos.nombreequipo} - ${new Date(mantenimiento.fechamantenimiento).toLocaleDateString()} (${mantenimiento.tipomantenimiento})`}\n                            value={mantenimiento.idhistorialmantenimiento.toString()} \n                          />\n                        ))}\n                      </Picker>\n                    </View>\n                  )}\n                </View>\n\n                {/* Información de fecha/hora automática */}\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>Información de devolución</Text>\n                  <View style={styles.infoBox}>\n                    <Icon name=\"info-outline\" size={20} color=\"#3B82F6\" />\n                    <View style={styles.infoTextContainer}>\n                      <Text style={styles.infoText}>Fecha y hora: El sistema registrará automáticamente</Text>\n                      <Text style={styles.infoText}>Usuario: {user?.email || 'Usuario actual'}</Text>\n                    </View>\n                  </View>\n                </View>\n\n                {/* Observaciones */}\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>Observaciones</Text>\n                  <TextInput\n                    style={styles.textInput}\n                    multiline\n                    numberOfLines={4}\n                    placeholder=\"Describa las observaciones del mantenimiento...\"\n                    value={formData.observaciones}\n                    onChangeText={(text) => handleChange('observaciones', text)}\n                  />\n                </View>\n\n                {/* Botón de enviar */}\n                <TouchableOpacity \n                  style={[\n                    styles.button, \n                    (loading || !formData.idhistorialmantenimiento) && styles.buttonDisabled\n                  ]}\n                  onPress={handleSubmit}\n                  disabled={loading || !formData.idhistorialmantenimiento}\n                >\n                  {loading ? (\n                    <ActivityIndicator color=\"#fff\" />\n                  ) : (\n                    <View style={styles.buttonContent}>\n                      <MaterialCommunityIcons name=\"check-circle\" size={20} color=\"#fff\" />\n                      <Text style={styles.buttonText}>Registrar Devolución</Text>\n                    </View>\n                  )}\n                </TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </ScrollView>\n      </View>\n\n      {/* Alertas para móvil */}\n      {!isWeb && showSuccessMessage && (\n        <View style={styles.mobileSuccessMessage}>\n          <Icon name=\"check-circle\" size={20} color=\"#10B981\" />\n          <Text style={styles.mobileMessageText}>{successMessage}</Text>\n        </View>\n      )}\n\n      {!isWeb && showErrorMessage && (\n        <View style={styles.mobileErrorMessage}>\n          <Icon name=\"error\" size={20} color=\"#EF4444\" />\n          <Text style={styles.mobileMessageText}>{errorMessage}</Text>\n        </View>\n      )}\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: '#ffffff',\n    paddingVertical: 16,\n    paddingHorizontal: isMobile ? 16 : 24,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  menuButton: {\n    marginRight: 16,\n  },\n  refreshButton: {\n    marginLeft: 16,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 18 : 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n    flex: 1,\n    textAlign: 'center',\n  },\n  scrollContent: {\n    flexGrow: 1,\n    paddingBottom: 24,\n  },\n  content: {\n    width: '100%',\n    maxWidth: MAX_CONTENT_WIDTH,\n    alignSelf: 'center',\n    paddingHorizontal: isMobile ? 16 : 24,\n  },\n  card: {\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    marginTop: 24,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n  },\n  cardHeader: {\n    padding: isMobile ? 16 : 20,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  cardTitle: {\n    fontSize: isMobile ? 16 : 18,\n    fontWeight: '600',\n    color: '#2c3e50',\n  },\n  cardBody: {\n    padding: isMobile ? 16 : 20,\n  },\n  formGroup: {\n    marginBottom: 20,\n  },\n  label: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginBottom: 8,\n    fontWeight: '500',\n  },\n  pickerContainer: {\n    borderWidth: 1,\n    borderColor: '#ced4da',\n    borderRadius: 6,\n    overflow: 'hidden',\n  },\n  picker: {\n    height: 50,\n    width: '100%',\n    color: '#495057',\n  },\n  infoBox: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#e7f1ff',\n    padding: 12,\n    borderRadius: 6,\n    borderLeftWidth: 4,\n    borderLeftColor: '#3B82F6',\n  },\n  infoTextContainer: {\n    marginLeft: 10,\n  },\n  infoText: {\n    color: '#1E40AF',\n    fontSize: 14,\n    lineHeight: 20,\n  },\n  textInput: {\n    borderWidth: 1,\n    borderColor: '#ced4da',\n    borderRadius: 6,\n    padding: 12,\n    minHeight: 100,\n    textAlignVertical: 'top',\n    backgroundColor: '#ffffff',\n  },\n  loadingContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 10,\n  },\n  loadingText: {\n    marginLeft: 10,\n    color: '#64748B',\n  },\n  button: {\n    backgroundColor: '#4a6da7',\n    borderRadius: 6,\n    padding: 14,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: 10,\n    flexDirection: 'row',\n  },\n  buttonContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  buttonText: {\n    color: '#ffffff',\n    fontSize: 16,\n    fontWeight: '600',\n    marginLeft: 10,\n  },\n  buttonDisabled: {\n    backgroundColor: '#95a5a6',\n    opacity: 0.7,\n  },\n  // Estilos para mensajes web\n  webSuccessMessage: {\n    position: 'fixed',\n    top: 20,\n    left: '50%',\n    transform: [{ translateX: -180 }],\n    width: 360,\n    backgroundColor: '#D1FAE5',\n    padding: 16,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    zIndex: 1000,\n  },\n  webSuccessText: {\n    color: '#065F46',\n    marginLeft: 10,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  webErrorMessage: {\n    position: 'fixed',\n    top: 20,\n    left: '50%',\n    transform: [{ translateX: -180 }],\n    width: 360,\n    backgroundColor: '#FEE2E2',\n    padding: 16,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    zIndex: 1000,\n  },\n  webErrorText: {\n    color: '#B91C1C',\n    marginLeft: 10,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  // Estilos para mensajes móviles\n  mobileSuccessMessage: {\n    position: 'absolute',\n    bottom: 20,\n    left: 20,\n    right: 20,\n    backgroundColor: '#D1FAE5',\n    padding: 16,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    zIndex: 1000,\n  },\n  mobileErrorMessage: {\n    position: 'absolute',\n    bottom: 20,\n    left: 20,\n    right: 20,\n    backgroundColor: '#FEE2E2',\n    padding: 16,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    zIndex: 1000,\n  },\n  mobileMessageText: {\n    marginLeft: 10,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n});\n\nexport default DevolverMantenimientoScreen;","import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Alert,\n  ActivityIndicator,\n  Dimensions,\n  SafeAreaView,\n  Platform,\n  FlatList,\n  RefreshControl,\n  Modal,\n  TextInput,\n  Linking\n} from 'react-native';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../../lib/supabase';\nimport MaterialIcons from 'react-native-vector-icons/MaterialIcons';\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Button } from 'react-native-paper';\nimport DateTimePicker from '@react-native-community/datetimepicker';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst MAX_CONTENT_WIDTH = 1200;\nconst isWeb = Platform.OS === 'web';\n\nconst ReporteMantenimientoScreen = () => {\n  const navigation = useNavigation();\n  const [reportes, setReportes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [directorNombre, setDirectorNombre] = useState('Lic. Juan Pérez');\n  const [tecnicoNombre, setTecnicoNombre] = useState('Técnico Mantenimiento');\n  const [modalVisible, setModalVisible] = useState(false);\n  const [modalTecnicoVisible, setModalTecnicoVisible] = useState(false);\n  const [nuevoNombre, setNuevoNombre] = useState('');\n  const [nuevoTecnico, setNuevoTecnico] = useState('');\n  const [fechaInicio, setFechaInicio] = useState(new Date());\n  const [fechaFin, setFechaFin] = useState(new Date());\n  const [showDatePickerInicio, setShowDatePickerInicio] = useState(false);\n  const [showDatePickerFin, setShowDatePickerFin] = useState(false);\n  const [mostrarCompletados, setMostrarCompletados] = useState(true);\n\n  // Función para formatear la fecha como YYYY-MM-DD (necesario para input type=\"date\")\n  const formatDateForInput = (date) => {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  };\n\n  // Función para manejar cambios en las fechas (versión web)\n  const handleWebDateChange = (dateString, setDateFunction) => {\n    const dateParts = dateString.split('-');\n    const newDate = new Date(dateParts[0], dateParts[1] - 1, dateParts[2]);\n    setDateFunction(newDate);\n    fetchReportes();\n  };\n\n  useEffect(() => {\n    const loadNames = async () => {\n      try {\n        const savedDirector = await AsyncStorage.getItem('@director_name');\n        const savedTecnico = await AsyncStorage.getItem('@tecnico_name');\n        if (savedDirector) setDirectorNombre(savedDirector);\n        if (savedTecnico) setTecnicoNombre(savedTecnico);\n      } catch (error) {\n        console.error('Error al cargar nombres:', error);\n      }\n    };\n    loadNames();\n    fetchReportes();\n  }, []);\n\n  const saveDirectorName = async () => {\n    if (!nuevoNombre.trim()) {\n      Alert.alert('Error', 'Por favor ingrese un nombre válido');\n      return;\n    }\n\n    try {\n      await AsyncStorage.setItem('@director_name', nuevoNombre);\n      setDirectorNombre(nuevoNombre);\n      setModalVisible(false);\n      Alert.alert('Éxito', 'Nombre del director actualizado correctamente');\n    } catch (error) {\n      Alert.alert('Error', 'No se pudo actualizar el nombre del director');\n    }\n  };\n\n  const saveTecnicoName = async () => {\n    if (!nuevoTecnico.trim()) {\n      Alert.alert('Error', 'Por favor ingrese un nombre válido');\n      return;\n    }\n\n    try {\n      await AsyncStorage.setItem('@tecnico_name', nuevoTecnico);\n      setTecnicoNombre(nuevoTecnico);\n      setModalTecnicoVisible(false);\n      Alert.alert('Éxito', 'Nombre del técnico actualizado correctamente');\n    } catch (error) {\n      Alert.alert('Error', 'No se pudo actualizar el nombre del técnico');\n    }\n  };\n\n  const fetchReportes = async () => {\n    setLoading(true);\n    setRefreshing(true);\n    \n    try {\n      let query = supabase\n        .from('historial_mantenimiento')\n        .select(`\n          idhistorialmantenimiento,\n          fechamantenimiento,\n          horamantenimiento,\n          horadevolucion,\n          tipomantenimiento,\n          observaciones,\n          accion,\n          equipos:equipos(nombreequipo),\n          usuarios:usuarios(nombreusuario)\n        `)\n        .gte('fechamantenimiento', fechaInicio.toISOString().split('T')[0])\n        .lte('fechamantenimiento', fechaFin.toISOString().split('T')[0])\n        .order('fechamantenimiento', { ascending: false });\n\n      if (mostrarCompletados) {\n        query = query.not('horadevolucion', 'is', null);\n      }\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n\n      setReportes(data || []);\n    } catch (error) {\n      Alert.alert('Error', 'No se pudieron cargar los reportes');\n      console.error('Error fetching reports:', error);\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  const handleDateChange = (date, setDate, setShowPicker) => {\n    setShowPicker(false);\n    if (date) {\n      setDate(date);\n      fetchReportes();\n    }\n  };\n\n  const toggleMostrarCompletados = () => {\n    setMostrarCompletados(!mostrarCompletados);\n    fetchReportes();\n  };\n\n  const generatePrintDocument = async () => {\n    try {\n      const htmlContent = `\n        <html>\n          <head>\n            <meta charset=\"UTF-8\">\n            <style>\n              body { font-family: Arial; padding: 20px; margin: 0; }\n              .header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #eee; }\n              .logo { max-width: 200px; max-height: 100px; margin-bottom: 15px; }\n              h1 { color: #2c3e50; margin: 5px 0; font-size: 24px; }\n              .subtitle { color: #7f8c8d; font-size: 14px; }\n              .date-range { margin: 10px 0; font-size: 14px; color: #34495e; }\n              .filter-info { margin: 10px 0; font-size: 14px; font-style: italic; }\n              table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 14px; }\n              th, td { padding: 12px 8px; border: 1px solid #ddd; text-align: left; }\n              th { background-color: #f8f9fa; font-weight: bold; color: #34495e; }\n              .firma-container { margin-top: 60px; text-align: center; }\n              .linea-firma { width: 300px; border-top: 1px solid #000; margin: 10px auto; }\n              .nombre-director { font-weight: bold; margin-top: 5px; font-size: 16px; }\n              .cargo-director { font-style: italic; color: #7f8c8d; }\n              .footer { margin-top: 40px; text-align: center; font-size: 12px; color: #95a5a6; border-top: 1px solid #eee; padding-top: 15px; }\n              @media print { body { padding: 0; } .no-print { display: none; } }\n            </style>\n          </head>\n          <body>\n            <div class=\"header\">\n              <img src=\"https://utregionaldelsur.sidci.mx/img/logo.png\" class=\"logo\" alt=\"Logo de la escuela\">\n              <h1>Reporte de Mantenimientos ${mostrarCompletados ? 'Completados' : ''}</h1>\n              <p class=\"subtitle\">Generado el: ${new Date().toLocaleDateString('es-ES', { \n                weekday: 'long', \n                year: 'numeric', \n                month: 'long', \n                day: 'numeric' \n              })}</p>\n              <p class=\"date-range\">\n                Período: ${fechaInicio.toLocaleDateString('es-ES')} - ${fechaFin.toLocaleDateString('es-ES')}\n              </p>\n              <p class=\"filter-info\">\n                Mostrando: ${mostrarCompletados ? 'Solo mantenimientos completados' : 'Todos los mantenimientos'}\n              </p>\n            </div>\n            \n            <table>\n              <thead>\n                <tr>\n                  <th>Equipo</th>\n                  <th>Tipo</th>\n                  <th>Fecha</th>\n                  <th>Hora Devolución</th>\n                  <th>Técnico</th>\n                  <th>Acciones</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${reportes.map(item => `\n                  <tr>\n                    <td>${item.equipos?.nombreequipo || 'N/A'}</td>\n                    <td>${item.tipomantenimiento}</td>\n                    <td>${new Date(item.fechamantenimiento).toLocaleDateString('es-ES')}</td>\n                    <td>${item.horadevolucion || 'N/A'}</td>\n                    <td>${tecnicoNombre}</td>\n                    <td>${item.accion || 'N/A'}</td>\n                  </tr>\n                `).join('')}\n              </tbody>\n            </table>\n            \n            <div class=\"firma-container\">\n              <div class=\"linea-firma\"></div>\n              <div class=\"nombre-director\">${directorNombre}</div>\n              <div class=\"cargo-director\">Director de Carrera</div>\n            </div>\n            \n            <div class=\"footer\">\n              <p>Sistema de Gestión de Mantenimientos - ${new Date().getFullYear()}</p>\n              <p>Documento generado automáticamente - Válido sin firma manuscrita</p>\n            </div>\n          </body>\n        </html>\n      `;\n\n      if (isWeb) {\n        const printWindow = window.open('', '_blank');\n        printWindow.document.write(htmlContent);\n        printWindow.document.close();\n        printWindow.focus();\n        setTimeout(() => printWindow.print(), 500);\n      } else {\n        Alert.alert(\n          'Documento Listo',\n          Platform.OS === 'android' \n            ? 'Se abrirá en el navegador para imprimir' \n            : 'Para imprimir: 1. Abre en Safari 2. Usa Compartir → Imprimir',\n          [\n            { text: 'Cancelar', style: 'cancel' },\n            { \n              text: 'Abrir Documento', \n              onPress: () => Linking.openURL(`data:text/html;charset=utf-8,${encodeURIComponent(htmlContent)}`)\n            }\n          ]\n        );\n      }\n    } catch (error) {\n      Alert.alert('Error', 'No se pudo generar el documento');\n      console.error('Error generating document:', error);\n    }\n  };\n\n  const renderItem = ({ item }) => (\n    <View style={styles.card}>\n      <View style={styles.cardHeader}>\n        <View>\n          <Text style={styles.cardTitle}>{item.equipos?.nombreequipo || 'Equipo no encontrado'}</Text>\n        </View>\n        <View style={[styles.statusBadge, { backgroundColor: item.horadevolucion ? '#2ecc71' : '#e74c3c' }]}>\n          <Text style={styles.statusText}>\n            {item.horadevolucion ? 'COMPLETADO' : 'PENDIENTE'}\n          </Text>\n        </View>\n      </View>\n      \n      <View style={styles.detailRow}>\n        <MaterialCommunityIcons name=\"toolbox-outline\" size={16} color=\"#4a6da7\" />\n        <Text style={styles.detailText}>Tipo: {item.tipomantenimiento}</Text>\n      </View>\n      \n      <View style={styles.detailRow}>\n        <MaterialIcons name=\"date-range\" size={16} color=\"#4a6da7\" />\n        <Text style={styles.detailText}>\n          Fecha: {new Date(item.fechamantenimiento).toLocaleDateString('es-ES')}\n        </Text>\n      </View>\n      \n      {item.horadevolucion ? (\n        <View style={styles.detailRow}>\n          <MaterialCommunityIcons name=\"clock-check-outline\" size={16} color=\"#4a6da7\" />\n          <Text style={styles.detailText}>Devolución: {item.horadevolucion}</Text>\n        </View>\n      ) : (\n        <View style={styles.detailRow}>\n          <MaterialIcons name=\"access-time\" size={16} color=\"#4a6da7\" />\n          <Text style={styles.detailText}>Hora inicio: {item.horamantenimiento}</Text>\n        </View>\n      )}\n      \n      <View style={styles.detailRow}>\n        <MaterialIcons name=\"person-outline\" size={16} color=\"#4a6da7\" />\n        <Text style={styles.detailText}>\n          Técnico: {tecnicoNombre}\n        </Text>\n      </View>\n      \n      {item.accion && (\n        <View style={styles.detailRow}>\n          <MaterialCommunityIcons name=\"hammer-wrench\" size={16} color=\"#4a6da7\" />\n          <Text style={styles.detailText}>Acciones: {item.accion}</Text>\n        </View>\n      )}\n      \n      {item.observaciones && (\n        <View style={styles.detailRow}>\n          <MaterialIcons name=\"notes\" size={16} color=\"#4a6da7\" />\n          <Text style={styles.detailText}>Observaciones: {item.observaciones}</Text>\n        </View>\n      )}\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <View style={[styles.container, isWeb && { maxWidth: MAX_CONTENT_WIDTH }]}>\n        <View style={styles.header}>\n          <TouchableOpacity \n            onPress={() => navigation.openDrawer()}\n            style={styles.menuButton}\n            hitSlop={{top: 20, bottom: 20, left: 20, right: 20}}\n          >\n            <MaterialIcons name=\"menu\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n          \n          <Text style={styles.headerTitle}>Reporte de Mantenimientos</Text>\n          \n          <View style={styles.buttonGroup}>\n            <Button \n              mode=\"contained\" \n              onPress={() => {\n                setNuevoNombre(directorNombre);\n                setModalVisible(true);\n              }}\n              style={styles.directorButton}\n              labelStyle={styles.buttonLabel}\n            >\n              <MaterialIcons name=\"edit\" size={18} color=\"#FFF\" />\n            </Button>\n            \n            <Button \n              mode=\"contained\" \n              onPress={() => {\n                setNuevoTecnico(tecnicoNombre);\n                setModalTecnicoVisible(true);\n              }}\n              style={styles.tecnicoButton}\n              labelStyle={styles.buttonLabel}\n            >\n              <MaterialCommunityIcons name=\"account-wrench\" size={18} color=\"#FFF\" />\n            </Button>\n            \n            <Button \n              mode=\"contained\" \n              onPress={generatePrintDocument}\n              style={styles.printButton}\n              labelStyle={styles.buttonLabel}\n            >\n              <MaterialIcons name=\"print\" size={18} color=\"#FFF\" />\n            </Button>\n          </View>\n        </View>\n\n        <View style={styles.filterContainer}>\n          <View style={styles.filterRow}>\n            <Text style={styles.filterLabel}>Rango de fechas:</Text>\n            \n            <TouchableOpacity \n              style={styles.filterToggle}\n              onPress={toggleMostrarCompletados}\n            >\n              <MaterialCommunityIcons \n                name={mostrarCompletados ? \"checkbox-marked-circle-outline\" : \"checkbox-blank-circle-outline\"} \n                size={24} \n                color={mostrarCompletados ? \"#4a6da7\" : \"#95a5a6\"} \n              />\n              <Text style={[styles.filterToggleText, mostrarCompletados && styles.filterToggleActive]}>\n                Solo completados\n              </Text>\n            </TouchableOpacity>\n          </View>\n          \n          <View style={styles.dateFilterContainer}>\n            {isWeb ? (\n              <>\n                <View style={styles.dateInput}>\n                  <MaterialIcons name=\"calendar-today\" size={16} color=\"#4a6da7\" />\n                  <input \n                    type=\"date\"\n                    value={formatDateForInput(fechaInicio)}\n                    onChange={(e) => handleWebDateChange(e.target.value, setFechaInicio)}\n                    style={styles.webDateInput}\n                    max={formatDateForInput(new Date())}\n                  />\n                </View>\n                \n                <Text style={styles.dateSeparator}>a</Text>\n                \n                <View style={styles.dateInput}>\n                  <MaterialIcons name=\"calendar-today\" size={16} color=\"#4a6da7\" />\n                  <input \n                    type=\"date\"\n                    value={formatDateForInput(fechaFin)}\n                    onChange={(e) => handleWebDateChange(e.target.value, setFechaFin)}\n                    style={styles.webDateInput}\n                    min={formatDateForInput(fechaInicio)}\n                    max={formatDateForInput(new Date())}\n                  />\n                </View>\n              </>\n            ) : (\n              <>\n                <TouchableOpacity \n                  style={styles.dateInput}\n                  onPress={() => setShowDatePickerInicio(true)}\n                >\n                  <MaterialIcons name=\"calendar-today\" size={16} color=\"#4a6da7\" />\n                  <Text style={styles.dateText}>\n                    Inicio: {fechaInicio.toLocaleDateString('es-ES')}\n                  </Text>\n                </TouchableOpacity>\n                \n                <Text style={styles.dateSeparator}>a</Text>\n                \n                <TouchableOpacity \n                  style={styles.dateInput}\n                  onPress={() => setShowDatePickerFin(true)}\n                >\n                  <MaterialIcons name=\"calendar-today\" size={16} color=\"#4a6da7\" />\n                  <Text style={styles.dateText}>\n                    Fin: {fechaFin.toLocaleDateString('es-ES')}\n                  </Text>\n                </TouchableOpacity>\n                \n                {showDatePickerInicio && (\n                  <DateTimePicker\n                    value={fechaInicio}\n                    mode=\"date\"\n                    display={Platform.OS === 'ios' ? 'inline' : 'default'}\n                    onChange={(event, date) => handleDateChange(date, setFechaInicio, setShowDatePickerInicio)}\n                    maximumDate={new Date()}\n                  />\n                )}\n                \n                {showDatePickerFin && (\n                  <DateTimePicker\n                    value={fechaFin}\n                    mode=\"date\"\n                    display={Platform.OS === 'ios' ? 'inline' : 'default'}\n                    onChange={(event, date) => handleDateChange(date, setFechaFin, setShowDatePickerFin)}\n                    minimumDate={fechaInicio}\n                    maximumDate={new Date()}\n                  />\n                )}\n              </>\n            )}\n          </View>\n        </View>\n\n        <Modal \n          visible={modalVisible} \n          transparent={true}\n          animationType=\"slide\"\n          onRequestClose={() => setModalVisible(false)}\n        >\n          <View style={styles.modalContainer}>\n            <View style={styles.modalContent}>\n              <Text style={styles.modalTitle}>Cambiar Nombre del Director</Text>\n              \n              <TextInput\n                style={styles.input}\n                value={nuevoNombre}\n                onChangeText={setNuevoNombre}\n                placeholder=\"Ingrese el nombre completo\"\n                placeholderTextColor=\"#95a5a6\"\n                autoFocus={true}\n              />\n              \n              <View style={styles.modalButtons}>\n                <Button \n                  mode=\"outlined\" \n                  onPress={() => setModalVisible(false)}\n                  style={styles.cancelButton}\n                  labelStyle={styles.cancelButtonText}\n                >\n                  Cancelar\n                </Button>\n                <Button \n                  mode=\"contained\" \n                  onPress={saveDirectorName}\n                  style={styles.saveButton}\n                  labelStyle={styles.saveButtonText}\n                >\n                  Guardar\n                </Button>\n              </View>\n            </View>\n          </View>\n        </Modal>\n\n        <Modal \n          visible={modalTecnicoVisible} \n          transparent={true}\n          animationType=\"slide\"\n          onRequestClose={() => setModalTecnicoVisible(false)}\n        >\n          <View style={styles.modalContainer}>\n            <View style={styles.modalContent}>\n              <Text style={styles.modalTitle}>Cambiar Nombre del Técnico</Text>\n              \n              <TextInput\n                style={styles.input}\n                value={nuevoTecnico}\n                onChangeText={setNuevoTecnico}\n                placeholder=\"Ingrese el nombre del técnico\"\n                placeholderTextColor=\"#95a5a6\"\n                autoFocus={true}\n              />\n              \n              <View style={styles.modalButtons}>\n                <Button \n                  mode=\"outlined\" \n                  onPress={() => setModalTecnicoVisible(false)}\n                  style={styles.cancelButton}\n                  labelStyle={styles.cancelButtonText}\n                >\n                  Cancelar\n                </Button>\n                <Button \n                  mode=\"contained\" \n                  onPress={saveTecnicoName}\n                  style={styles.saveButton}\n                  labelStyle={styles.saveButtonText}\n                >\n                  Guardar\n                </Button>\n              </View>\n            </View>\n          </View>\n        </Modal>\n\n        {loading ? (\n          <View style={styles.loadingContainer}>\n            <ActivityIndicator size=\"large\" color=\"#3498db\" />\n            <Text style={styles.loadingText}>Cargando reportes de mantenimiento...</Text>\n          </View>\n        ) : (\n          <FlatList\n            data={reportes}\n            renderItem={renderItem}\n            keyExtractor={item => item.idhistorialmantenimiento.toString()}\n            contentContainerStyle={styles.listContent}\n            refreshControl={\n              <RefreshControl\n                refreshing={refreshing}\n                onRefresh={fetchReportes}\n                colors={['#3498db']}\n                tintColor=\"#3498db\"\n              />\n            }\n            ListEmptyComponent={\n              <View style={styles.emptyContainer}>\n                <MaterialCommunityIcons name=\"tools\" size={48} color=\"#ecf0f1\" />\n                <Text style={styles.emptyText}>\n                  {mostrarCompletados \n                    ? 'No hay mantenimientos completados en el período seleccionado' \n                    : 'No se encontraron mantenimientos en el período seleccionado'}\n                </Text>\n              </View>\n            }\n          />\n        )}\n      </View>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n    alignSelf: 'center',\n    width: '100%',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#ffffff',\n    paddingVertical: 16,\n    paddingHorizontal: isMobile ? 16 : 24,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  menuButton: {\n    marginRight: 16,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 18 : 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n    flex: 1,\n  },\n  buttonGroup: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  directorButton: {\n    backgroundColor: '#4a6da7',\n    borderRadius: 4,\n    marginRight: 8,\n    minWidth: 40,\n  },\n  tecnicoButton: {\n    backgroundColor: '#8e44ad',\n    borderRadius: 4,\n    marginRight: 8,\n    minWidth: 40,\n  },\n  printButton: {\n    backgroundColor: '#27ae60',\n    borderRadius: 4,\n    minWidth: 40,\n  },\n  buttonLabel: {\n    color: '#FFF',\n    marginVertical: 6,\n    marginHorizontal: 0,\n  },\n  filterContainer: {\n    padding: 16,\n    backgroundColor: '#ffffff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  filterRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 10,\n  },\n  filterLabel: {\n    fontSize: 14,\n    color: '#6c757d',\n  },\n  filterToggle: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  filterToggleText: {\n    marginLeft: 8,\n    color: '#95a5a6',\n  },\n  filterToggleActive: {\n    color: '#4a6da7',\n    fontWeight: '600',\n  },\n  dateFilterContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  dateInput: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: '#ced4da',\n    borderRadius: 6,\n    padding: 12,\n    flex: 1,\n    marginHorizontal: 5,\n  },\n  dateText: {\n    marginLeft: 8,\n    color: '#495057',\n  },\n  dateSeparator: {\n    marginHorizontal: 8,\n    color: '#6c757d',\n  },\n  webDateInput: {\n    marginLeft: 8,\n    border: 'none',\n    outline: 'none',\n    fontSize: 14,\n    color: '#495057',\n    fontFamily: 'inherit',\n    backgroundColor: 'transparent',\n    width: '100%',\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.5)',\n  },\n  modalContent: {\n    backgroundColor: '#FFF',\n    borderRadius: 8,\n    padding: 20,\n    width: isMobile ? '90%' : '40%',\n  },\n  modalTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#ced4da',\n    borderRadius: 6,\n    padding: 12,\n    marginBottom: 20,\n    fontSize: 16,\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n  },\n  cancelButton: {\n    borderColor: '#95a5a6',\n    flex: 1,\n    marginRight: 10,\n  },\n  cancelButtonText: {\n    color: '#95a5a6',\n  },\n  saveButton: {\n    backgroundColor: '#4a6da7',\n    flex: 1,\n  },\n  saveButtonText: {\n    color: '#FFF',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#6c757d',\n  },\n  listContent: {\n    padding: isMobile ? 8 : 16,\n  },\n  card: {\n    backgroundColor: '#FFF',\n    borderRadius: 8,\n    padding: 16,\n    marginBottom: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  cardTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#2c3e50',\n  },\n  statusBadge: {\n    borderRadius: 12,\n    paddingVertical: 4,\n    paddingHorizontal: 10,\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '500',\n    color: '#FFF',\n  },\n  detailRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginVertical: 4,\n  },\n  detailText: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginLeft: 8,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 40,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: '#95a5a6',\n    marginTop: 16,\n    textAlign: 'center',\n  },\n});\n\nexport default ReporteMantenimientoScreen;","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  View, \r\n  Text, \r\n  TextInput, \r\n  TouchableOpacity, \r\n  StyleSheet,\r\n  ActivityIndicator,\r\n  Dimensions,\r\n  ScrollView,\r\n  SafeAreaView\r\n} from 'react-native';\r\nimport Icon from 'react-native-vector-icons/MaterialIcons';\r\nimport { supabase } from '../../lib/supabase';\r\n\r\nconst { width } = Dimensions.get('window');\r\nconst isMobile = width < 768;\r\n\r\nconst AgregarAdminScreen = ({ navigation }) => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [nombreusuario, setNombreUsuario] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [registrationSuccess, setRegistrationSuccess] = useState(false);\r\n\r\n  const handleRegister = async () => {\r\n    if (!email || !password || !nombreusuario) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const { error } = await supabase.auth.signUp({\r\n        email,\r\n        password,\r\n        options: {\r\n          data: {\r\n            username: nombreusuario\r\n          }\r\n        }\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      setRegistrationSuccess(true);\r\n      setEmail('');\r\n      setPassword('');\r\n      setNombreUsuario('');\r\n\r\n    } catch (error) {\r\n      console.log('Error en registro:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (registrationSuccess) {\r\n    return (\r\n      <SafeAreaView style={styles.safeArea}>\r\n        <View style={styles.container}>\r\n          <View style={styles.header}>\r\n            <TouchableOpacity onPress={() => navigation.openDrawer()} style={styles.menuButton}>\r\n              <Icon name=\"menu\" size={24} color=\"#2c3e50\" />\r\n            </TouchableOpacity>\r\n            <Text style={styles.headerTitle}>Registro Exitoso</Text>\r\n          </View>\r\n          \r\n          <View style={styles.successContainer}>\r\n            <Icon name=\"check-circle\" size={60} color=\"#4CAF50\" />\r\n            <Text style={styles.successTitle}>¡Registro completado!</Text>\r\n            <Text style={styles.successText}>\r\n              Se ha enviado un enlace de verificación al correo:\r\n            </Text>\r\n            <Text style={styles.emailText}>{email}</Text>\r\n            <Text style={styles.successSubtext}>\r\n              Por favor revise su bandeja de entrada y spam para confirmar la cuenta.\r\n            </Text>\r\n            \r\n            <TouchableOpacity\r\n              style={styles.successButton}\r\n              onPress={() => setRegistrationSuccess(false)}\r\n            >\r\n              <Text style={styles.successButtonText}>Registrar otro administrador</Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n      </SafeAreaView>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <SafeAreaView style={styles.safeArea}>\r\n      <View style={styles.container}>\r\n        <View style={styles.header}>\r\n          <TouchableOpacity onPress={() => navigation.openDrawer()} style={styles.menuButton}>\r\n            <Icon name=\"menu\" size={24} color=\"#2c3e50\" />\r\n          </TouchableOpacity>\r\n          <Text style={styles.headerTitle}>Registrar Nuevo Administrador</Text>\r\n        </View>\r\n        \r\n        <ScrollView contentContainerStyle={styles.scrollContent}>\r\n          <View style={styles.card}>\r\n            <View style={styles.form}>\r\n              <Text style={styles.label}>Nombre completo</Text>\r\n              <TextInput\r\n                style={styles.input}\r\n                placeholder=\"Nombre del administrador\"\r\n                value={nombreusuario}\r\n                onChangeText={setNombreUsuario}\r\n              />\r\n\r\n              <Text style={styles.label}>Correo electrónico</Text>\r\n              <TextInput\r\n                style={styles.input}\r\n                placeholder=\"admin@institucion.edu\"\r\n                value={email}\r\n                onChangeText={setEmail}\r\n                keyboardType=\"email-address\"\r\n                autoCapitalize=\"none\"\r\n              />\r\n\r\n              <Text style={styles.label}>Contraseña</Text>\r\n              <TextInput\r\n                style={styles.input}\r\n                placeholder=\"Mínimo 6 caracteres\"\r\n                value={password}\r\n                onChangeText={setPassword}\r\n                secureTextEntry\r\n              />\r\n\r\n              <TouchableOpacity\r\n                style={styles.registerButton}\r\n                onPress={handleRegister}\r\n                disabled={loading}\r\n              >\r\n                {loading ? (\r\n                  <ActivityIndicator color=\"#FFF\" />\r\n                ) : (\r\n                  <Text style={styles.buttonText}>Registrar Administrador</Text>\r\n                )}\r\n              </TouchableOpacity>\r\n            </View>\r\n          </View>\r\n        </ScrollView>\r\n      </View>\r\n    </SafeAreaView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  safeArea: {\r\n    flex: 1,\r\n    backgroundColor: '#f8f9fa',\r\n  },\r\n  container: {\r\n    flex: 1,\r\n    paddingHorizontal: isMobile ? 16 : 24,\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    paddingVertical: 16,\r\n    marginBottom: 20,\r\n  },\r\n  menuButton: {\r\n    marginRight: 16,\r\n  },\r\n  headerTitle: {\r\n    fontSize: 20,\r\n    fontWeight: '600',\r\n    color: '#2c3e50',\r\n  },\r\n  scrollContent: {\r\n    paddingBottom: 24,\r\n  },\r\n  card: {\r\n    backgroundColor: '#ffffff',\r\n    borderRadius: 12,\r\n    padding: 24,\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 6,\r\n    elevation: 2,\r\n  },\r\n  form: {\r\n    width: '100%',\r\n  },\r\n  label: {\r\n    fontSize: 14,\r\n    color: '#4a5568',\r\n    marginBottom: 8,\r\n    fontWeight: '500',\r\n  },\r\n  input: {\r\n    height: 50,\r\n    borderWidth: 1,\r\n    borderColor: '#e2e8f0',\r\n    borderRadius: 8,\r\n    paddingHorizontal: 15,\r\n    marginBottom: 20,\r\n    backgroundColor: '#f8fafc',\r\n    fontSize: 16,\r\n  },\r\n  registerButton: {\r\n    backgroundColor: '#4a6da7',\r\n    paddingVertical: 15,\r\n    borderRadius: 8,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    marginTop: 10,\r\n  },\r\n  buttonText: {\r\n    color: 'white',\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n  },\r\n  successContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 24,\r\n  },\r\n  successTitle: {\r\n    fontSize: 22,\r\n    fontWeight: 'bold',\r\n    color: '#2e7d32',\r\n    marginVertical: 16,\r\n  },\r\n  successText: {\r\n    fontSize: 16,\r\n    color: '#333',\r\n    textAlign: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  emailText: {\r\n    fontWeight: 'bold',\r\n    color: '#1a237e',\r\n    marginBottom: 16,\r\n    fontSize: 16,\r\n  },\r\n  successSubtext: {\r\n    fontSize: 14,\r\n    color: '#666',\r\n    textAlign: 'center',\r\n    marginBottom: 24,\r\n  },\r\n  successButton: {\r\n    backgroundColor: '#4a6da7',\r\n    paddingVertical: 15,\r\n    paddingHorizontal: 30,\r\n    borderRadius: 8,\r\n  },\r\n  successButtonText: {\r\n    color: 'white',\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n  },\r\n});\r\n\r\nexport default AgregarAdminScreen;","import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  StyleSheet,\n  Alert,\n  ActivityIndicator,\n  ScrollView,\n  Dimensions,\n  Platform,\n  SafeAreaView\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport { supabase } from '../../lib/supabase';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst isWeb = Platform.OS === 'web';\n\nconst AgregarUsuariosScreen = ({ navigation }) => {\n  const [nombreCompleto, setNombreCompleto] = useState('');\n  const [tipoPersona, setTipoPersona] = useState('maestro');\n  const [loading, setLoading] = useState(false);\n  const [showTipoPersonaPicker, setShowTipoPersonaPicker] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n\n  const tiposPersona = [\n    { value: 'maestro', label: 'Maestro' },\n    { value: 'directivo', label: 'Directivo' },\n    { value: 'invitado', label: 'Invitado' }\n  ];\n\n  // Verificar si el usuario es admin\n  useEffect(() => {\n    const checkAdminStatus = async () => {\n      const { data: { user } } = await supabase.auth.getUser();\n      \n      if (user) {\n        const { data: profile, error } = await supabase\n          .from('usuarios')\n          .select('rol')\n          .eq('idusuario', user.id)\n          .single();\n        \n        if (!error && profile && profile.rol === 'admin') {\n          setIsAdmin(true);\n        }\n      }\n    };\n\n    checkAdminStatus();\n  }, []);\n\n  const showAlert = (title, message) => {\n    if (isWeb) {\n      setSuccessMessage(message);\n      setShowSuccessMessage(true);\n      setTimeout(() => setShowSuccessMessage(false), 3000);\n    } else {\n      Alert.alert(title, message);\n    }\n  };\n\n  const handleAgregarPersonal = async () => {\n    if (!nombreCompleto.trim()) {\n      showAlert('Error', 'Por favor ingrese el nombre completo');\n      return;\n    }\n  \n    setLoading(true);\n    try {\n      const { data, error } = await supabase\n        .from('personal')\n        .insert([\n          { \n            nombre_completo: nombreCompleto,\n            tipo_persona: tipoPersona,\n            estado: 'activo'\n          }\n        ])\n        .select();\n  \n      if (error) {\n        throw error;\n      }\n  \n      if (isWeb) {\n        setSuccessMessage(`Personal agregado correctamente como ${tiposPersona.find(t => t.value === tipoPersona)?.label}`);\n        setShowSuccessMessage(true);\n        \n        // Resetear formulario después de 2 segundos\n        setTimeout(() => {\n          setNombreCompleto('');\n          setTipoPersona('maestro');\n          setShowTipoPersonaPicker(false);\n          setShowSuccessMessage(false);\n        }, 2000);\n      } else {\n        Alert.alert(\n          'Éxito',\n          `Personal agregado correctamente como ${tiposPersona.find(t => t.value === tipoPersona)?.label}`,\n          [\n            {\n              text: 'Agregar otro',\n              onPress: () => {\n                setNombreCompleto('');\n                setTipoPersona('maestro');\n                setShowTipoPersonaPicker(false);\n              },\n              style: 'cancel'\n            },\n            {\n              text: 'Volver',\n              onPress: () => navigation.goBack()\n            }\n          ],\n          { cancelable: false }\n        );\n      }\n  \n    } catch (error) {\n      let errorMessage = 'Ocurrió un error al agregar el personal';\n      if (error.message.includes('duplicate key value')) {\n        errorMessage = 'Este nombre de personal ya existe';\n      } else if (error.message.includes('permission denied')) {\n        errorMessage = 'No tienes permisos para realizar esta acción';\n      }\n      \n      showAlert('Error', errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isAdmin) {\n    return (\n      <SafeAreaView style={styles.unauthorizedContainer}>\n        <View style={styles.unauthorizedContent}>\n          <Icon name=\"warning\" size={48} color=\"#EF4444\" />\n          <Text style={styles.unauthorizedTitle}>Acceso no autorizado</Text>\n          <Text style={styles.unauthorizedText}>Solo administradores pueden agregar personal</Text>\n          <TouchableOpacity\n            style={styles.backButton}\n            onPress={() => navigation.goBack()}\n          >\n            <Text style={styles.backButtonText}>Volver al panel</Text>\n          </TouchableOpacity>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      {/* Header con botón de menú */}\n      <View style={styles.header}>\n        <TouchableOpacity \n          onPress={() => navigation.openDrawer()}\n          style={styles.menuButton}\n        >\n          <Icon name=\"menu\" size={24} color=\"#2c3e50\" />\n        </TouchableOpacity>\n        <Text style={styles.headerTitle}>Agregar Personal</Text>\n      </View>\n\n      {/* Mensaje de éxito para web */}\n      {isWeb && showSuccessMessage && (\n        <View style={styles.webSuccessMessage}>\n          <Icon name=\"check-circle\" size={20} color=\"#10B981\" />\n          <Text style={styles.webSuccessText}>{successMessage}</Text>\n        </View>\n      )}\n\n      <ScrollView contentContainerStyle={styles.container}>\n        {/* Mensaje especial para web */}\n        {isWeb && (\n          <View style={styles.webMessage}>\n            <Text style={styles.webMessageText}>\n              Estás utilizando la versión web del sistema de administración\n            </Text>\n          </View>\n        )}\n\n        <View style={styles.card}>\n          <Text style={styles.title}>Agregar Nuevo Personal</Text>\n          \n          <View style={styles.formGroup}>\n            <Text style={styles.label}>Nombre Completo</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"Ej: Juan Pérez López\"\n              value={nombreCompleto}\n              onChangeText={setNombreCompleto}\n              maxLength={100}\n            />\n          </View>\n\n          <View style={styles.formGroup}>\n            <Text style={styles.label}>Cargo</Text>\n            <TouchableOpacity \n              style={styles.pickerButton}\n              onPress={() => setShowTipoPersonaPicker(!showTipoPersonaPicker)}\n            >\n              <Text style={styles.pickerButtonText}>\n                {tiposPersona.find(t => t.value === tipoPersona)?.label}\n              </Text>\n              <Icon \n                name={showTipoPersonaPicker ? 'keyboard-arrow-up' : 'keyboard-arrow-down'} \n                size={24} \n                color=\"#64748B\" \n              />\n            </TouchableOpacity>\n\n            {showTipoPersonaPicker && (\n              <View style={styles.pickerOptions}>\n                {tiposPersona.map((tipo) => (\n                  <TouchableOpacity\n                    key={tipo.value}\n                    style={[\n                      styles.pickerOption,\n                      tipoPersona === tipo.value && styles.selectedPickerOption\n                    ]}\n                    onPress={() => {\n                      setTipoPersona(tipo.value);\n                      setShowTipoPersonaPicker(false);\n                    }}\n                  >\n                    <Text style={[\n                      styles.pickerOptionText,\n                      tipoPersona === tipo.value && styles.selectedPickerOptionText\n                    ]}>\n                      {tipo.label}\n                    </Text>\n                  </TouchableOpacity>\n                ))}\n              </View>\n            )}\n          </View>\n\n          <TouchableOpacity\n            style={[styles.button, loading && styles.buttonDisabled]}\n            onPress={handleAgregarPersonal}\n            disabled={loading}\n          >\n            {loading ? (\n              <ActivityIndicator color=\"#FFF\" />\n            ) : (\n              <Text style={styles.buttonText}>Agregar Personal</Text>\n            )}\n          </TouchableOpacity>\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  unauthorizedContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa',\n  },\n  unauthorizedContent: {\n    width: '90%',\n    maxWidth: 400,\n    alignItems: 'center',\n    padding: 24,\n    backgroundColor: '#FFFFFF',\n    borderRadius: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 2,\n  },\n  unauthorizedTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#EF4444',\n    marginTop: 16,\n    marginBottom: 8,\n  },\n  unauthorizedText: {\n    fontSize: 16,\n    color: '#64748B',\n    textAlign: 'center',\n    marginBottom: 24,\n  },\n  backButton: {\n    backgroundColor: '#3B82F6',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    width: '100%',\n    alignItems: 'center',\n  },\n  backButtonText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#ffffff',\n    paddingVertical: 16,\n    paddingHorizontal: isMobile ? 16 : 24,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  menuButton: {\n    marginRight: 16,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 18 : 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n  },\n  container: {\n    flexGrow: 1,\n    padding: isMobile ? 16 : 24,\n    backgroundColor: '#f8f9fa',\n  },\n  webMessage: {\n    backgroundColor: '#EFF6FF',\n    padding: 12,\n    borderRadius: 8,\n    marginBottom: 16,\n    borderLeftWidth: 4,\n    borderLeftColor: '#3B82F6',\n  },\n  webMessageText: {\n    color: '#1E40AF',\n    fontSize: 14,\n  },\n  webSuccessMessage: {\n    position: 'fixed',\n    top: 20,\n    left: '50%',\n    transform: [{ translateX: -180 }],\n    width: 360,\n    backgroundColor: '#D1FAE5',\n    padding: 16,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    zIndex: 1000,\n  },\n  webSuccessText: {\n    color: '#065F46',\n    marginLeft: 10,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  card: {\n    backgroundColor: '#FFFFFF',\n    borderRadius: 12,\n    padding: isMobile ? 20 : 24,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    maxWidth: 800,\n    width: '100%',\n    alignSelf: 'center',\n  },\n  title: {\n    fontSize: isMobile ? 20 : 24,\n    fontWeight: 'bold',\n    color: '#111827',\n    marginBottom: 24,\n    textAlign: 'center',\n  },\n  formGroup: {\n    marginBottom: 20,\n  },\n  label: {\n    fontSize: 16,\n    color: '#374151',\n    marginBottom: 8,\n    fontWeight: '500',\n  },\n  input: {\n    height: 50,\n    borderWidth: 1,\n    borderColor: '#D1D5DB',\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    fontSize: 16,\n    color: '#111827',\n    backgroundColor: '#F9FAFB',\n  },\n  pickerButton: {\n    height: 50,\n    borderWidth: 1,\n    borderColor: '#D1D5DB',\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    flexDirection: 'row',\n    backgroundColor: '#F9FAFB',\n  },\n  pickerButtonText: {\n    fontSize: 16,\n    color: '#111827',\n  },\n  pickerOptions: {\n    marginTop: 8,\n    borderWidth: 1,\n    borderColor: '#E5E7EB',\n    borderRadius: 8,\n    overflow: 'hidden',\n  },\n  pickerOption: {\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    backgroundColor: '#FFFFFF',\n    borderBottomWidth: 1,\n    borderBottomColor: '#E5E7EB',\n  },\n  selectedPickerOption: {\n    backgroundColor: '#EFF6FF',\n  },\n  pickerOptionText: {\n    fontSize: 16,\n    color: '#374151',\n  },\n  selectedPickerOptionText: {\n    color: '#1D4ED8',\n    fontWeight: '500',\n  },\n  button: {\n    height: 50,\n    backgroundColor: '#3B82F6',\n    borderRadius: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 24,\n  },\n  buttonDisabled: {\n    opacity: 0.7,\n  },\n  buttonText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n});\n\nexport default AgregarUsuariosScreen;","import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  StyleSheet,\n  Alert,\n  ActivityIndicator,\n  ScrollView,\n  Dimensions,\n  Platform,\n  SafeAreaView,\n  FlatList\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport { supabase } from '../../lib/supabase';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst isWeb = Platform.OS === 'web';\n\nconst ModificarUsuariosScreen = ({ navigation }) => {\n  const [nombreCompleto, setNombreCompleto] = useState('');\n  const [tipoPersona, setTipoPersona] = useState('maestro');\n  const [estado, setEstado] = useState('activo');\n  const [loading, setLoading] = useState(false);\n  const [loadingList, setLoadingList] = useState(true);\n  const [showTipoPersonaPicker, setShowTipoPersonaPicker] = useState(false);\n  const [showEstadoPicker, setShowEstadoPicker] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [personalId, setPersonalId] = useState(null);\n  const [personalList, setPersonalList] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedPersonal, setSelectedPersonal] = useState(null);\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n\n  const tiposPersona = [\n    { value: 'maestro', label: 'Maestro' },\n    { value: 'directivo', label: 'Directivo' },\n    { value: 'invitado', label: 'Invitado' }\n  ];\n\n  const estados = [\n    { value: 'activo', label: 'Activo' },\n    { value: 'inactivo', label: 'Inactivo' }\n  ];\n\n  useEffect(() => {\n    const checkAdminStatus = async () => {\n      const { data: { user } } = await supabase.auth.getUser();\n      \n      if (user) {\n        const { data: profile, error } = await supabase\n          .from('usuarios')\n          .select('rol')\n          .eq('idusuario', user.id)\n          .single();\n        \n        if (!error && profile && profile.rol === 'admin') {\n          setIsAdmin(true);\n          fetchPersonal();\n        }\n      }\n    };\n\n    checkAdminStatus();\n  }, []);\n\n  const fetchPersonal = async () => {\n    setLoadingList(true);\n    try {\n      let query = supabase\n        .from('personal')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (searchQuery) {\n        query = query.ilike('nombre_completo', `%${searchQuery}%`);\n      }\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n\n      setPersonalList(data || []);\n    } catch (error) {\n      showAlert('Error', 'No se pudo cargar la lista de personal');\n      console.error('Error fetching personal:', error);\n    } finally {\n      setLoadingList(false);\n    }\n  };\n\n  const handleSelectPersonal = (personal) => {\n    setSelectedPersonal(personal);\n    setPersonalId(personal.idpersonal);\n    setNombreCompleto(personal.nombre_completo);\n    setTipoPersona(personal.tipo_persona);\n    setEstado(personal.estado);\n  };\n\n  const showAlert = (title, message) => {\n    if (isWeb) {\n      setSuccessMessage(message);\n      setShowSuccessMessage(true);\n      setTimeout(() => setShowSuccessMessage(false), 3000);\n    } else {\n      Alert.alert(title, message);\n    }\n  };\n\n  const handleGuardarCambios = async () => {\n    if (!nombreCompleto.trim()) {\n      showAlert('Error', 'Por favor ingrese el nombre completo');\n      return;\n    }\n  \n    setLoading(true);\n    try {\n      const { data, error } = await supabase\n        .from('personal')\n        .update({ \n          nombre_completo: nombreCompleto,\n          tipo_persona: tipoPersona,\n          estado: estado\n        })\n        .eq('idpersonal', personalId)\n        .select();\n  \n      if (error) throw error;\n\n      setSuccessMessage('Cambios guardados correctamente');\n      setShowSuccessMessage(true);\n      \n      setTimeout(() => {\n        setShowSuccessMessage(false);\n        setSelectedPersonal(null);\n        fetchPersonal();\n      }, 2000);\n    } catch (error) {\n      let errorMessage = 'Ocurrió un error al guardar los cambios';\n      if (error.message.includes('permission denied')) {\n        errorMessage = 'No tienes permisos para realizar esta acción';\n      }\n      showAlert('Error', errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEliminarPersonal = async () => {\n    if (isWeb) {\n      const confirm = window.confirm(\n        `¿Estás seguro de que deseas eliminar a ${selectedPersonal.nombre_completo}? Esta acción no se puede deshacer.`\n      );\n      if (!confirm) return;\n    } else {\n      Alert.alert(\n        'Confirmar eliminación',\n        `¿Estás seguro de que deseas eliminar a ${selectedPersonal.nombre_completo}? Esta acción no se puede deshacer.`,\n        [\n          { text: 'Cancelar', style: 'cancel' },\n          { text: 'Eliminar', onPress: actuallyDeletePersonal, style: 'destructive' }\n        ]\n      );\n      return;\n    }\n    \n    await actuallyDeletePersonal();\n  };\n\n  const actuallyDeletePersonal = async () => {\n    setLoading(true);\n    try {\n      const { error } = await supabase\n        .from('personal')\n        .delete()\n        .eq('idpersonal', personalId);\n  \n      if (error) throw error;\n\n      setSuccessMessage('Personal eliminado correctamente');\n      setShowSuccessMessage(true);\n      \n      setTimeout(() => {\n        setShowSuccessMessage(false);\n        setSelectedPersonal(null);\n        fetchPersonal();\n      }, 2000);\n    } catch (error) {\n      showAlert('Error', 'Ocurrió un error al eliminar el personal');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderPersonalItem = ({ item }) => (\n    <TouchableOpacity\n      style={[\n        styles.personalItem,\n        selectedPersonal?.idpersonal === item.idpersonal && styles.selectedPersonalItem\n      ]}\n      onPress={() => handleSelectPersonal(item)}\n    >\n      <View style={styles.personalInfo}>\n        <Text style={styles.personalName}>{item.nombre_completo}</Text>\n        <View style={styles.personalDetails}>\n          <Text style={styles.personalType}>\n            {tiposPersona.find(t => t.value === item.tipo_persona)?.label}\n          </Text>\n          <View style={[\n            styles.statusBadge,\n            item.estado === 'activo' ? styles.activeBadge : styles.inactiveBadge\n          ]}>\n            <Text style={styles.statusText}>\n              {item.estado === 'activo' ? 'Activo' : 'Inactivo'}\n            </Text>\n          </View>\n        </View>\n      </View>\n      <Icon name=\"chevron-right\" size={24} color=\"#64748B\" />\n    </TouchableOpacity>\n  );\n\n  if (!isAdmin) {\n    return (\n      <SafeAreaView style={styles.unauthorizedContainer}>\n        <View style={styles.unauthorizedContent}>\n          <Icon name=\"warning\" size={48} color=\"#EF4444\" />\n          <Text style={styles.unauthorizedTitle}>Acceso no autorizado</Text>\n          <Text style={styles.unauthorizedText}>Solo administradores pueden modificar personal</Text>\n          <TouchableOpacity\n            style={styles.backButton}\n            onPress={() => navigation.goBack()}\n          >\n            <Text style={styles.backButtonText}>Volver al panel</Text>\n          </TouchableOpacity>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <View style={styles.header}>\n        <TouchableOpacity \n          onPress={() => navigation.openDrawer()}\n          style={styles.menuButton}\n        >\n          <Icon name=\"menu\" size={24} color=\"#2c3e50\" />\n        </TouchableOpacity>\n        <Text style={styles.headerTitle}>Administrar Personal</Text>\n      </View>\n\n      {isWeb && showSuccessMessage && (\n        <View style={styles.webSuccessMessage}>\n          <Icon name=\"check-circle\" size={20} color=\"#10B981\" />\n          <Text style={styles.webSuccessText}>{successMessage}</Text>\n        </View>\n      )}\n\n      <ScrollView contentContainerStyle={styles.container}>\n        {isWeb && (\n          <View style={styles.webMessage}>\n            <Text style={styles.webMessageText}>\n              Estás utilizando la versión web del sistema de administración\n            </Text>\n          </View>\n        )}\n\n        <View style={styles.card}>\n          <View style={styles.searchContainer}>\n            <TextInput\n              style={styles.searchInput}\n              placeholder=\"Buscar personal...\"\n              value={searchQuery}\n              onChangeText={setSearchQuery}\n              onSubmitEditing={fetchPersonal}\n            />\n            <TouchableOpacity \n              style={styles.searchButton}\n              onPress={fetchPersonal}\n            >\n              <Icon name=\"search\" size={24} color=\"#FFFFFF\" />\n            </TouchableOpacity>\n          </View>\n\n          {loadingList ? (\n            <View style={styles.loadingContainer}>\n              <ActivityIndicator size=\"large\" color=\"#3B82F6\" />\n              <Text style={styles.loadingText}>Cargando personal...</Text>\n            </View>\n          ) : personalList.length === 0 ? (\n            <View style={styles.emptyContainer}>\n              <Icon name=\"people-outline\" size={48} color=\"#9CA3AF\" />\n              <Text style={styles.emptyText}>No se encontró personal</Text>\n            </View>\n          ) : (\n            <FlatList\n              data={personalList}\n              renderItem={renderPersonalItem}\n              keyExtractor={(item) => item.idpersonal.toString()}\n              style={styles.listContainer}\n              contentContainerStyle={styles.listContent}\n            />\n          )}\n        </View>\n\n        {selectedPersonal && (\n          <View style={[styles.card, styles.editForm]}>\n            <Text style={styles.title}>Editar Personal</Text>\n            \n            <View style={styles.formGroup}>\n              <Text style={styles.label}>Nombre Completo</Text>\n              <TextInput\n                style={styles.input}\n                placeholder=\"Ej: Juan Pérez López\"\n                value={nombreCompleto}\n                onChangeText={setNombreCompleto}\n                maxLength={100}\n              />\n            </View>\n\n            <View style={styles.formGroup}>\n              <Text style={styles.label}>Cargo</Text>\n              <TouchableOpacity \n                style={styles.pickerButton}\n                onPress={() => setShowTipoPersonaPicker(!showTipoPersonaPicker)}\n              >\n                <Text style={styles.pickerButtonText}>\n                  {tiposPersona.find(t => t.value === tipoPersona)?.label}\n                </Text>\n                <Icon \n                  name={showTipoPersonaPicker ? 'keyboard-arrow-up' : 'keyboard-arrow-down'} \n                  size={24} \n                  color=\"#64748B\" \n                />\n              </TouchableOpacity>\n\n              {showTipoPersonaPicker && (\n                <View style={styles.pickerOptions}>\n                  {tiposPersona.map((tipo) => (\n                    <TouchableOpacity\n                      key={tipo.value}\n                      style={[\n                        styles.pickerOption,\n                        tipoPersona === tipo.value && styles.selectedPickerOption\n                      ]}\n                      onPress={() => {\n                        setTipoPersona(tipo.value);\n                        setShowTipoPersonaPicker(false);\n                      }}\n                    >\n                      <Text style={[\n                        styles.pickerOptionText,\n                        tipoPersona === tipo.value && styles.selectedPickerOptionText\n                      ]}>\n                        {tipo.label}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </View>\n              )}\n            </View>\n\n            <View style={styles.formGroup}>\n              <Text style={styles.label}>Estado</Text>\n              <TouchableOpacity \n                style={styles.pickerButton}\n                onPress={() => setShowEstadoPicker(!showEstadoPicker)}\n              >\n                <Text style={styles.pickerButtonText}>\n                  {estados.find(e => e.value === estado)?.label}\n                </Text>\n                <Icon \n                  name={showEstadoPicker ? 'keyboard-arrow-up' : 'keyboard-arrow-down'} \n                  size={24} \n                  color=\"#64748B\" \n                />\n              </TouchableOpacity>\n\n              {showEstadoPicker && (\n                <View style={styles.pickerOptions}>\n                  {estados.map((est) => (\n                    <TouchableOpacity\n                      key={est.value}\n                      style={[\n                        styles.pickerOption,\n                        estado === est.value && styles.selectedPickerOption\n                      ]}\n                      onPress={() => {\n                        setEstado(est.value);\n                        setShowEstadoPicker(false);\n                      }}\n                    >\n                      <Text style={[\n                        styles.pickerOptionText,\n                        estado === est.value && styles.selectedPickerOptionText\n                      ]}>\n                        {est.label}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </View>\n              )}\n            </View>\n\n            <View style={styles.buttonGroup}>\n              <TouchableOpacity\n                style={[styles.button, styles.saveButton, loading && styles.buttonDisabled]}\n                onPress={handleGuardarCambios}\n                disabled={loading}\n              >\n                {loading ? (\n                  <ActivityIndicator color=\"#FFF\" />\n                ) : (\n                  <Text style={styles.buttonText}>Guardar Cambios</Text>\n                )}\n              </TouchableOpacity>\n\n              <TouchableOpacity\n                style={[styles.button, styles.deleteButton]}\n                onPress={handleEliminarPersonal}\n                disabled={loading}\n              >\n                <Text style={styles.buttonText}>Eliminar Personal</Text>\n              </TouchableOpacity>\n\n              <TouchableOpacity\n                style={[styles.button, styles.cancelButton]}\n                onPress={() => setSelectedPersonal(null)}\n                disabled={loading}\n              >\n                <Text style={[styles.buttonText, styles.cancelButtonText]}>Cancelar</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        )}\n      </ScrollView>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  unauthorizedContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa',\n  },\n  unauthorizedContent: {\n    width: '90%',\n    maxWidth: 400,\n    alignItems: 'center',\n    padding: 24,\n    backgroundColor: '#FFFFFF',\n    borderRadius: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 2,\n  },\n  unauthorizedTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#EF4444',\n    marginTop: 16,\n    marginBottom: 8,\n  },\n  unauthorizedText: {\n    fontSize: 16,\n    color: '#64748B',\n    textAlign: 'center',\n    marginBottom: 24,\n  },\n  backButton: {\n    backgroundColor: '#3B82F6',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    width: '100%',\n    alignItems: 'center',\n  },\n  backButtonText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#ffffff',\n    paddingVertical: 16,\n    paddingHorizontal: isMobile ? 16 : 24,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  menuButton: {\n    marginRight: 16,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 18 : 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n  },\n  container: {\n    flexGrow: 1,\n    padding: isMobile ? 16 : 24,\n    backgroundColor: '#f8f9fa',\n  },\n  webMessage: {\n    backgroundColor: '#EFF6FF',\n    padding: 12,\n    borderRadius: 8,\n    marginBottom: 16,\n    borderLeftWidth: 4,\n    borderLeftColor: '#3B82F6',\n  },\n  webMessageText: {\n    color: '#1E40AF',\n    fontSize: 14,\n  },\n  webSuccessMessage: {\n    position: 'fixed',\n    top: 20,\n    left: '50%',\n    transform: [{ translateX: -180 }],\n    width: 360,\n    backgroundColor: '#D1FAE5',\n    padding: 16,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    zIndex: 1000,\n  },\n  webSuccessText: {\n    color: '#065F46',\n    marginLeft: 10,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  card: {\n    backgroundColor: '#FFFFFF',\n    borderRadius: 12,\n    padding: isMobile ? 16 : 20,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    maxWidth: 800,\n    width: '100%',\n    alignSelf: 'center',\n    marginBottom: 16,\n  },\n  editForm: {\n    marginTop: 16,\n  },\n  title: {\n    fontSize: isMobile ? 20 : 24,\n    fontWeight: 'bold',\n    color: '#111827',\n    marginBottom: 24,\n    textAlign: 'center',\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    marginBottom: 16,\n  },\n  searchInput: {\n    flex: 1,\n    height: 50,\n    borderWidth: 1,\n    borderColor: '#D1D5DB',\n    borderTopLeftRadius: 8,\n    borderBottomLeftRadius: 8,\n    paddingHorizontal: 16,\n    fontSize: 16,\n    color: '#111827',\n    backgroundColor: '#F9FAFB',\n  },\n  searchButton: {\n    width: 50,\n    height: 50,\n    backgroundColor: '#3B82F6',\n    borderTopRightRadius: 8,\n    borderBottomRightRadius: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingContainer: {\n    padding: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: 16,\n    color: '#64748B',\n  },\n  emptyContainer: {\n    padding: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  emptyText: {\n    marginTop: 16,\n    color: '#64748B',\n    fontSize: 16,\n  },\n  listContainer: {\n    width: '100%',\n  },\n  listContent: {\n    paddingBottom: 8,\n  },\n  personalItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingVertical: 16,\n    paddingHorizontal: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: '#F3F4F6',\n  },\n  selectedPersonalItem: {\n    backgroundColor: '#F0FDF4',\n  },\n  personalInfo: {\n    flex: 1,\n  },\n  personalName: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: '#111827',\n    marginBottom: 4,\n  },\n  personalDetails: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  personalType: {\n    fontSize: 14,\n    color: '#64748B',\n    marginRight: 12,\n  },\n  statusBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 12,\n  },\n  activeBadge: {\n    backgroundColor: '#D1FAE5',\n  },\n  inactiveBadge: {\n    backgroundColor: '#FEE2E2',\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '500',\n  },\n  formGroup: {\n    marginBottom: 20,\n  },\n  label: {\n    fontSize: 16,\n    color: '#374151',\n    marginBottom: 8,\n    fontWeight: '500',\n  },\n  input: {\n    height: 50,\n    borderWidth: 1,\n    borderColor: '#D1D5DB',\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    fontSize: 16,\n    color: '#111827',\n    backgroundColor: '#F9FAFB',\n  },\n  pickerButton: {\n    height: 50,\n    borderWidth: 1,\n    borderColor: '#D1D5DB',\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    flexDirection: 'row',\n    backgroundColor: '#F9FAFB',\n  },\n  pickerButtonText: {\n    fontSize: 16,\n    color: '#111827',\n  },\n  pickerOptions: {\n    marginTop: 8,\n    borderWidth: 1,\n    borderColor: '#E5E7EB',\n    borderRadius: 8,\n    overflow: 'hidden',\n  },\n  pickerOption: {\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    backgroundColor: '#FFFFFF',\n    borderBottomWidth: 1,\n    borderBottomColor: '#E5E7EB',\n  },\n  selectedPickerOption: {\n    backgroundColor: '#EFF6FF',\n  },\n  pickerOptionText: {\n    fontSize: 16,\n    color: '#374151',\n  },\n  selectedPickerOptionText: {\n    color: '#1D4ED8',\n    fontWeight: '500',\n  },\n  buttonGroup: {\n    marginTop: 24,\n  },\n  button: {\n    height: 50,\n    borderRadius: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  saveButton: {\n    backgroundColor: '#10B981',\n  },\n  deleteButton: {\n    backgroundColor: '#EF4444',\n  },\n  cancelButton: {\n    backgroundColor: '#F3F4F6',\n    borderWidth: 1,\n    borderColor: '#D1D5DB',\n  },\n  buttonDisabled: {\n    opacity: 0.7,\n  },\n  buttonText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  cancelButtonText: {\n    color: '#374151',\n  },\n});\n\nexport default ModificarUsuariosScreen;","import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  Text, \n  StyleSheet, \n  TouchableOpacity, \n  ActivityIndicator,\n  Dimensions,\n  SafeAreaView,\n  FlatList,\n  RefreshControl,\n  Alert,\n  Modal,\n  ScrollView\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../../lib/supabase';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst MAX_CONTENT_WIDTH = 1200;\n\nconst VerPersonalScreen = () => {\n  const navigation = useNavigation();\n  const [personal, setPersonal] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [selectedPerson, setSelectedPerson] = useState(null);\n  const [modalVisible, setModalVisible] = useState(false);\n\n  const fetchPersonal = async () => {\n    try {\n      setRefreshing(true);\n      const { data, error } = await supabase\n        .from('personal')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setPersonal(data || []);\n    } catch (error) {\n      console.error('Error fetching personal:', error);\n      Alert.alert('Error', 'No se pudo cargar el personal');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchPersonal();\n  }, []);\n\n  const getTipoPersonaColor = (tipo) => {\n    switch(tipo.toLowerCase()) {\n      case 'maestro': return '#3498db';\n      case 'directivo': return '#9b59b6';\n      case 'invitado': return '#2ecc71';\n      default: return '#95a5a6';\n    }\n  };\n\n  const getEstadoColor = (estado) => {\n    return estado.toLowerCase() === 'activo' ? '#2ecc71' : '#e74c3c';\n  };\n\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('es-ES', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const renderItem = ({ item }) => (\n    <TouchableOpacity \n      style={styles.personCard}\n      onPress={() => {\n        setSelectedPerson(item);\n        setModalVisible(true);\n      }}\n    >\n      <View style={styles.personAvatar}>\n        <Icon \n          name={item.tipo_persona === 'maestro' ? 'school' : \n                item.tipo_persona === 'directivo' ? 'supervisor-account' : 'person'} \n          size={24} \n          color=\"#4a6da7\" \n        />\n      </View>\n      <View style={styles.personInfo}>\n        <Text style={styles.personName}>{item.nombre_completo}</Text>\n        <View style={styles.badgeContainer}>\n          <View style={[styles.typeBadge, { backgroundColor: getTipoPersonaColor(item.tipo_persona) }]}>\n            <Text style={styles.badgeText}>{item.tipo_persona.toUpperCase()}</Text>\n          </View>\n          <View style={[styles.statusBadge, { backgroundColor: getEstadoColor(item.estado) }]}>\n            <Text style={styles.badgeText}>{item.estado.toUpperCase()}</Text>\n          </View>\n        </View>\n      </View>\n      <Icon name=\"chevron-right\" size={24} color=\"#64748B\" />\n    </TouchableOpacity>\n  );\n\n  if (loading) {\n    return (\n      <SafeAreaView style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\n        <Text style={styles.loadingText}>Cargando personal...</Text>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <View style={styles.container}>\n        {/* Header */}\n        <View style={styles.header}>\n          <TouchableOpacity \n            onPress={() => navigation.openDrawer()}\n            style={styles.menuButton}\n            hitSlop={{top: 20, bottom: 20, left: 20, right: 20}}\n          >\n            <Icon name=\"menu\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Lista de Personal</Text>\n        </View>\n        \n        {/* Contenido principal */}\n        <View style={styles.content}>\n          {/* Estadísticas */}\n          <View style={styles.statsContainer}>\n            <View style={styles.statCard}>\n              <View style={[styles.statIconContainer, {backgroundColor: '#e3f2fd'}]}>\n                <Icon name=\"people\" size={24} color=\"#1976d2\" />\n              </View>\n              <Text style={styles.statTitle}>Total de Personal  </Text>\n              <Text style={styles.statValue}>{personal.length}</Text>\n            </View>\n          </View>\n          \n          {/* Lista de personal */}\n          <View style={styles.section}>\n            <Text style={styles.sectionTitle}>Personal Registrado</Text>\n            \n            <FlatList\n              data={personal}\n              renderItem={renderItem}\n              keyExtractor={(item) => item.idpersonal.toString()}\n              refreshControl={\n                <RefreshControl\n                  refreshing={refreshing}\n                  onRefresh={fetchPersonal}\n                  colors={['#4a6da7']}\n                />\n              }\n              ListEmptyComponent={\n                <View style={styles.emptyContainer}>\n                  <Icon name=\"people-outline\" size={48} color=\"#95a5a6\" />\n                  <Text style={styles.emptyText}>No hay personal registrado</Text>\n                </View>\n              }\n              contentContainerStyle={personal.length === 0 ? styles.emptyListContent : styles.listContent}\n            />\n          </View>\n        </View>\n\n        {/* Modal de detalles */}\n        <Modal\n          animationType=\"slide\"\n          transparent={true}\n          visible={modalVisible}\n          onRequestClose={() => setModalVisible(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <View style={styles.modalContainer}>\n              {selectedPerson && (\n                <>\n                  <View style={styles.modalHeader}>\n                    <Text style={styles.modalTitle}>Detalles del Personal</Text>\n                    <TouchableOpacity \n                      onPress={() => setModalVisible(false)}\n                      style={styles.closeButton}\n                    >\n                      <Icon name=\"close\" size={24} color=\"#6c757d\" />\n                    </TouchableOpacity>\n                  </View>\n\n                  <ScrollView style={styles.modalContent}>\n                    <View style={styles.detailRow}>\n                      <Text style={styles.detailLabel}>Nombre Completo:</Text>\n                      <Text style={styles.detailValue}>{selectedPerson.nombre_completo}</Text>\n                    </View>\n\n                    <View style={styles.detailRow}>\n                      <Text style={styles.detailLabel}>Tipo de Persona:</Text>\n                      <View style={[styles.typeBadge, { backgroundColor: getTipoPersonaColor(selectedPerson.tipo_persona) }]}>\n                        <Text style={styles.badgeText}>{selectedPerson.tipo_persona.toUpperCase()}</Text>\n                      </View>\n                    </View>\n\n                    <View style={styles.detailRow}>\n                      <Text style={styles.detailLabel}>Estado:</Text>\n                      <View style={[styles.statusBadge, { backgroundColor: getEstadoColor(selectedPerson.estado) }]}>\n                        <Text style={styles.badgeText}>{selectedPerson.estado.toUpperCase()}</Text>\n                      </View>\n                    </View>\n\n                    <View style={styles.detailRow}>\n                      <Text style={styles.detailLabel}>Fecha de Registro:</Text>\n                      <Text style={styles.detailValue}>{formatDate(selectedPerson.created_at)}</Text>\n                    </View>\n                  </ScrollView>\n\n                  <View style={styles.modalFooter}>\n                    <TouchableOpacity\n                      style={[styles.modalButton, styles.closeModalButton]}\n                      onPress={() => setModalVisible(false)}\n                    >\n                      <Text style={[styles.modalButtonText, {color: '#2c3e50'}]}>Cerrar</Text>\n                    </TouchableOpacity>\n                  </View>\n                </>\n              )}\n            </View>\n          </View>\n        </Modal>\n      </View>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa',\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#6c757d',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#ffffff',\n    paddingVertical: 16,\n    paddingHorizontal: isMobile ? 16 : 24,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  menuButton: {\n    marginRight: 16,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 18 : 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n  },\n  content: {\n    flex: 1,\n    padding: isMobile ? 16 : 24,\n  },\n  statsContainer: {\n    marginBottom: 16,\n  },\n  statCard: {\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    padding: 20,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  statIconContainer: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 16,\n  },\n  statTitle: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginBottom: 4,\n    fontWeight: '500',\n  },\n  statValue: {\n    fontSize: 28,\n    fontWeight: '700',\n    color: '#2c3e50',\n  },\n  section: {\n    flex: 1,\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    padding: isMobile ? 16 : 20,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n  },\n  sectionTitle: {\n    fontSize: isMobile ? 16 : 18,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginBottom: 16,\n  },\n  personCard: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa',\n    borderRadius: 8,\n    padding: 16,\n    marginBottom: 12,\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n  },\n  personAvatar: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: '#e3f2fd',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 16,\n  },\n  personInfo: {\n    flex: 1,\n  },\n  personName: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: '#2c3e50',\n    marginBottom: 4,\n  },\n  badgeContainer: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  typeBadge: {\n    borderRadius: 10,\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n  },\n  statusBadge: {\n    borderRadius: 10,\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n  },\n  badgeText: {\n    fontSize: 12,\n    color: '#ffffff',\n    fontWeight: '600',\n  },\n  emptyContainer: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 40,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: '#95a5a6',\n    marginTop: 16,\n  },\n  listContent: {\n    paddingBottom: 20,\n  },\n  emptyListContent: {\n    flex: 1,\n    justifyContent: 'center',\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContainer: {\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    width: isMobile ? '90%' : '60%',\n    maxWidth: 600,\n    maxHeight: '80%',\n    overflow: 'hidden',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  modalTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#2c3e50',\n  },\n  closeButton: {\n    padding: 4,\n  },\n  modalContent: {\n    padding: 16,\n  },\n  detailRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  detailLabel: {\n    fontSize: 16,\n    color: '#6c757d',\n    fontWeight: '500',\n  },\n  detailValue: {\n    fontSize: 16,\n    color: '#2c3e50',\n    fontWeight: '500',\n    maxWidth: '60%',\n    textAlign: 'right',\n  },\n  modalFooter: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    padding: 16,\n    borderTopWidth: 1,\n    borderTopColor: '#e0e0e0',\n  },\n  modalButton: {\n    borderRadius: 8,\n    paddingVertical: 10,\n    paddingHorizontal: 16,\n    minWidth: 100,\n    alignItems: 'center',\n  },\n  closeModalButton: {\n    backgroundColor: '#f8f9fa',\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n  },\n  modalButtonText: {\n    fontSize: 16,\n    fontWeight: '600',\n  },\n});\n\nexport default VerPersonalScreen;","import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  StyleSheet,\n  Image,\n  ActivityIndicator,\n  Alert,\n  ScrollView,\n  Modal,\n  SafeAreaView,\n  Platform\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../../lib/supabase';\nimport * as ImagePicker from 'expo-image-picker';\nimport * as FileSystem from 'expo-file-system';\nimport { decode } from 'base64-arraybuffer';\nimport { v4 as uuidv4 } from 'uuid';\n\nconst PerfilUsuario = () => {\n  const navigation = useNavigation();\n  const [userData, setUserData] = useState({\n    nombreusuario: '',\n    email: '',\n    rol: '',\n    contrasena: '',\n    fotoperfil: null,\n    fotohorario: null\n  });\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [editMode, setEditMode] = useState(false);\n  const [passwordModal, setPasswordModal] = useState(false);\n  const [currentPassword, setCurrentPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n\n  useEffect(() => {\n    fetchUserData();\n  }, []);\n\n  const fetchUserData = async () => {\n    try {\n      setLoading(true);\n      const { data: { session } } = await supabase.auth.getSession();\n      \n      if (!session) {\n        navigation.navigate('Login');\n        return;\n      }\n\n      const { data, error } = await supabase\n        .from('usuarios')\n        .select('nombreusuario, email, rol, fotoperfil, fotohorario')\n        .eq('idusuario', session.user.id)\n        .single();\n\n      if (error) throw error;\n\n      setUserData({\n        nombreusuario: data?.nombreusuario || '',\n        email: data?.email || '',\n        rol: data?.rol || '',\n        contrasena: '',\n        fotoperfil: data?.fotoperfil || null,\n        fotohorario: data?.fotohorario || null\n      });\n      \n    } catch (error) {\n      Alert.alert('Error', 'No se pudieron cargar los datos del perfil');\n      console.error('Error fetching user data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChange = (name, value) => {\n    setUserData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const selectImage = async (type) => {\n    try {\n      const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (status !== 'granted') {\n        Alert.alert('Permisos necesarios', 'Necesitamos acceso a tus fotos para cambiar las imágenes');\n        return;\n      }\n\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [1, 1],\n        quality: 0.8,\n      });\n\n      if (!result.canceled) {\n        handleChange(type, result.assets[0].uri);\n      }\n    } catch (error) {\n      console.error('Error selecting image:', error);\n      Alert.alert('Error', 'No se pudo seleccionar la imagen');\n    }\n  };\n\n  const uploadImage = async (uri, pathPrefix) => {\n    try {\n      const BUCKET_NAME = 'imagenes-usuarios';\n      \n      const uniqueId = uuidv4();\n      const fileExt = uri.split('.').pop().toLowerCase();\n      const fileName = `${pathPrefix}_${uniqueId}.${fileExt}`;\n      \n      const base64 = await FileSystem.readAsStringAsync(uri, {\n        encoding: FileSystem.EncodingType.Base64,\n      });\n      \n      const { data, error } = await supabase\n        .storage\n        .from(BUCKET_NAME)\n        .upload(fileName, decode(base64), {\n          contentType: `image/${fileExt === 'png' ? 'png' : 'jpeg'}`,\n          upsert: false,\n          cacheControl: '3600'\n        });\n        \n      if (error) throw error;\n      \n      const { data: { publicUrl } } = await supabase\n        .storage\n        .from(BUCKET_NAME)\n        .getPublicUrl(data.path);\n      \n      return publicUrl;\n    } catch (error) {\n      console.error('Error uploading image:', error);\n      throw new Error('No se pudo subir la imagen. Verifica tu conexión y permisos.');\n    }\n  };\n\n  const changePassword = async () => {\n    if (newPassword !== confirmPassword) {\n      Alert.alert('Error', 'Las contraseñas no coinciden');\n      return;\n    }\n\n    try {\n      setSaving(true);\n      const { error } = await supabase.auth.updateUser({\n        password: newPassword\n      });\n\n      if (error) throw error;\n\n      Alert.alert('Éxito', 'Contraseña actualizada correctamente');\n      setPasswordModal(false);\n      setCurrentPassword('');\n      setNewPassword('');\n      setConfirmPassword('');\n    } catch (error) {\n      console.error('Error al cambiar contraseña:', error);\n      Alert.alert('Error', 'No se pudo cambiar la contraseña. Asegúrate que la contraseña actual es correcta y que la nueva contraseña tiene al menos 6 caracteres.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const saveProfile = async () => {\n    try {\n      setSaving(true);\n      const { data: { session } } = await supabase.auth.getSession();\n      \n      if (!session) {\n        navigation.navigate('Login');\n        return;\n      }\n\n      let fotoPerfilUrl = userData.fotoperfil;\n      if (userData.fotoperfil && userData.fotoperfil.startsWith('file:')) {\n        fotoPerfilUrl = await uploadImage(userData.fotoperfil, 'profile');\n      }\n\n      let fotoHorarioUrl = userData.fotohorario;\n      if (userData.fotohorario && userData.fotohorario.startsWith('file:')) {\n        fotoHorarioUrl = await uploadImage(userData.fotohorario, 'schedule');\n      }\n\n      const { error } = await supabase\n        .from('usuarios')\n        .update({\n          nombreusuario: userData.nombreusuario,\n          rol: userData.rol,\n          fotoperfil: fotoPerfilUrl,\n          fotohorario: fotoHorarioUrl\n        })\n        .eq('idusuario', session.user.id);\n\n      if (error) throw error;\n\n      Alert.alert('Éxito', 'Perfil actualizado correctamente');\n      setEditMode(false);\n      \n    } catch (error) {\n      console.error('Error al guardar perfil:', error);\n      Alert.alert(\n        'Error', \n        error.message || 'Ocurrió un error al actualizar el perfil. Por favor intente nuevamente.'\n      );\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <SafeAreaView style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\n        <Text style={styles.loadingText}>Cargando perfil...</Text>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <View style={styles.container}>\n        <View style={styles.header}>\n          <TouchableOpacity \n            onPress={() => navigation.goBack()}\n            style={styles.backButton}\n            hitSlop={{top: 20, bottom: 20, left: 20, right: 20}}\n          >\n            <Icon name=\"arrow-back\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Mi Perfil</Text>\n          {editMode ? (\n            <TouchableOpacity \n              onPress={saveProfile}\n              style={styles.saveButton}\n              disabled={saving}\n            >\n              {saving ? (\n                <ActivityIndicator color=\"#fff\" size=\"small\" />\n              ) : (\n                <Text style={styles.saveButtonText}>Guardar</Text>\n              )}\n            </TouchableOpacity>\n          ) : (\n            <TouchableOpacity \n              onPress={() => setEditMode(true)}\n              style={styles.editButton}\n            >\n              <Icon name=\"edit\" size={20} color=\"#4a6da7\" />\n            </TouchableOpacity>\n          )}\n        </View>\n        \n        <ScrollView \n          contentContainerStyle={styles.scrollContent}\n          showsVerticalScrollIndicator={false}\n        >\n          <View style={styles.content}>\n            <View style={styles.profileSection}>\n              <TouchableOpacity \n                onPress={editMode ? () => selectImage('fotoperfil') : null}\n                disabled={!editMode}\n                activeOpacity={0.7}\n              >\n                <View style={styles.avatarContainer}>\n                  {userData.fotoperfil ? (\n                    <Image \n                      source={{ uri: userData.fotoperfil }} \n                      style={styles.avatar} \n                    />\n                  ) : (\n                    <View style={[styles.avatar, styles.avatarPlaceholder]}>\n                      <Icon name=\"person\" size={40} color=\"#fff\" />\n                    </View>\n                  )}\n                  {editMode && (\n                    <View style={styles.cameraIcon}>\n                      <Icon name=\"photo-camera\" size={20} color=\"#fff\" />\n                    </View>\n                  )}\n                </View>\n              </TouchableOpacity>\n\n              <View style={styles.card}>\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>Nombre</Text>\n                  {editMode ? (\n                    <TextInput\n                      style={styles.input}\n                      value={userData.nombreusuario}\n                      onChangeText={(text) => handleChange('nombreusuario', text)}\n                      placeholder=\"Ingresa tu nombre\"\n                    />\n                  ) : (\n                    <Text style={styles.textValue}>{userData.nombreusuario}</Text>\n                  )}\n                </View>\n\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>Email</Text>\n                  <Text style={styles.textValue}>{userData.email}</Text>\n                </View>\n\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>Rol</Text>\n                  {editMode ? (\n                    <View style={styles.roleContainer}>\n                      {['admin', 'maestro', 'directivo', 'invitado'].map((role) => (\n                        <TouchableOpacity\n                          key={role}\n                          style={[\n                            styles.roleButton,\n                            userData.rol === role && styles.selectedRoleButton\n                          ]}\n                          onPress={() => handleChange('rol', role)}\n                          activeOpacity={0.7}\n                        >\n                          <Text style={[\n                            styles.roleButtonText,\n                            userData.rol === role && styles.selectedRoleButtonText\n                          ]}>\n                            {role.charAt(0).toUpperCase() + role.slice(1)}\n                          </Text>\n                        </TouchableOpacity>\n                      ))}\n                    </View>\n                  ) : (\n                    <Text style={styles.textValue}>\n                      {userData.rol.charAt(0).toUpperCase() + userData.rol.slice(1)}\n                    </Text>\n                  )}\n                </View>\n              </View>\n\n              <View style={styles.card}>\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>Foto de Horario</Text>\n                  {editMode ? (\n                    <TouchableOpacity \n                      style={styles.imagePickerButton}\n                      onPress={() => selectImage('fotohorario')}\n                      activeOpacity={0.7}\n                    >\n                      {userData.fotohorario ? (\n                        <Image \n                          source={{ uri: userData.fotohorario }} \n                          style={styles.scheduleImage} \n                        />\n                      ) : (\n                        <View style={styles.imagePickerPlaceholder}>\n                          <Icon name=\"add-a-photo\" size={24} color=\"#4a6da7\" />\n                          <Text style={styles.imagePickerText}>Seleccionar imagen</Text>\n                        </View>\n                      )}\n                    </TouchableOpacity>\n                  ) : userData.fotohorario ? (\n                    <Image \n                      source={{ uri: userData.fotohorario }} \n                      style={styles.scheduleImage} \n                    />\n                  ) : (\n                    <Text style={styles.textValue}>No hay imagen de horario</Text>\n                  )}\n                </View>\n              </View>\n\n              <TouchableOpacity\n                style={styles.changePasswordButton}\n                onPress={() => setPasswordModal(true)}\n                activeOpacity={0.7}\n              >\n                <Text style={styles.changePasswordText}>Cambiar contraseña</Text>\n                <Icon name=\"keyboard-arrow-right\" size={20} color=\"#4a6da7\" />\n              </TouchableOpacity>\n            </View>\n          </View>\n        </ScrollView>\n\n        <Modal\n          visible={passwordModal}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setPasswordModal(false)}\n        >\n          <View style={styles.modalContainer}>\n            <View style={styles.modalContent}>\n              <Text style={styles.modalTitle}>Cambiar contraseña</Text>\n              \n              <Text style={styles.modalLabel}>Contraseña actual</Text>\n              <TextInput\n                style={styles.modalInput}\n                secureTextEntry\n                value={currentPassword}\n                onChangeText={setCurrentPassword}\n                placeholder=\"Ingresa tu contraseña actual\"\n                placeholderTextColor=\"#95a5a6\"\n              />\n              \n              <Text style={styles.modalLabel}>Nueva contraseña</Text>\n              <TextInput\n                style={styles.modalInput}\n                secureTextEntry\n                value={newPassword}\n                onChangeText={setNewPassword}\n                placeholder=\"Ingresa nueva contraseña\"\n                placeholderTextColor=\"#95a5a6\"\n              />\n              \n              <Text style={styles.modalLabel}>Confirmar contraseña</Text>\n              <TextInput\n                style={styles.modalInput}\n                secureTextEntry\n                value={confirmPassword}\n                onChangeText={setConfirmPassword}\n                placeholder=\"Confirma nueva contraseña\"\n                placeholderTextColor=\"#95a5a6\"\n              />\n              \n              <View style={styles.modalButtons}>\n                <TouchableOpacity\n                  style={[styles.modalButton, styles.cancelButton]}\n                  onPress={() => setPasswordModal(false)}\n                  activeOpacity={0.7}\n                >\n                  <Text style={styles.modalButtonText}>Cancelar</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={[styles.modalButton, styles.confirmButton]}\n                  onPress={changePassword}\n                  disabled={saving}\n                  activeOpacity={0.7}\n                >\n                  {saving ? (\n                    <ActivityIndicator color=\"#fff\" size=\"small\" />\n                  ) : (\n                    <Text style={[styles.modalButtonText, styles.confirmButtonText]}>Cambiar</Text>\n                  )}\n                </TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </Modal>\n      </View>\n    </SafeAreaView>\n  );\n};\n\n// Los estilos permanecen exactamente iguales que en la versión anterior\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa',\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#6c757d',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: '#ffffff',\n    paddingVertical: 16,\n    paddingHorizontal: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  backButton: {\n    padding: 4,\n  },\n  headerTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#2c3e50',\n  },\n  editButton: {\n    padding: 4,\n  },\n  saveButton: {\n    backgroundColor: '#4a6da7',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 4,\n    minWidth: 80,\n    alignItems: 'center',\n  },\n  saveButtonText: {\n    color: '#fff',\n    fontWeight: '500',\n    fontSize: 14,\n  },\n  scrollContent: {\n    flexGrow: 1,\n    paddingBottom: 24,\n  },\n  content: {\n    width: '100%',\n    maxWidth: 800,\n    alignSelf: 'center',\n    paddingHorizontal: 16,\n  },\n  profileSection: {\n    marginTop: 24,\n    alignItems: 'center',\n  },\n  avatarContainer: {\n    alignItems: 'center',\n    marginBottom: 24,\n    position: 'relative',\n  },\n  avatar: {\n    width: 120,\n    height: 120,\n    borderRadius: 60,\n  },\n  avatarPlaceholder: {\n    backgroundColor: '#95a5a6',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  cameraIcon: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    backgroundColor: '#4a6da7',\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 2,\n    borderColor: '#fff',\n  },\n  card: {\n    width: '100%',\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n  },\n  formGroup: {\n    marginBottom: 16,\n  },\n  label: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginBottom: 8,\n    fontWeight: '500',\n  },\n  input: {\n    fontSize: 16,\n    color: '#2c3e50',\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n    borderRadius: 8,\n    padding: 12,\n    backgroundColor: '#f8f9fa',\n  },\n  textValue: {\n    fontSize: 16,\n    color: '#2c3e50',\n    paddingVertical: 8,\n  },\n  roleContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    marginTop: 8,\n  },\n  roleButton: {\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    marginRight: 8,\n    marginBottom: 8,\n    borderRadius: 8,\n    backgroundColor: '#f8f9fa',\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n  },\n  selectedRoleButton: {\n    backgroundColor: '#4a6da7',\n    borderColor: '#4a6da7',\n  },\n  roleButtonText: {\n    color: '#2c3e50',\n    fontSize: 14,\n  },\n  selectedRoleButtonText: {\n    color: '#fff',\n  },\n  imagePickerButton: {\n    marginTop: 8,\n  },\n  scheduleImage: {\n    width: '100%',\n    height: 200,\n    borderRadius: 8,\n  },\n  imagePickerPlaceholder: {\n    height: 100,\n    borderWidth: 1,\n    borderColor: '#4a6da7',\n    borderStyle: 'dashed',\n    borderRadius: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa',\n  },\n  imagePickerText: {\n    marginTop: 8,\n    color: '#4a6da7',\n    fontSize: 14,\n  },\n  changePasswordButton: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    padding: 16,\n    width: '100%',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n  },\n  changePasswordText: {\n    color: '#4a6da7',\n    fontWeight: '500',\n    fontSize: 16,\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.5)',\n  },\n  modalContent: {\n    width: '90%',\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 24,\n  },\n  modalTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  modalLabel: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginBottom: 8,\n    fontWeight: '500',\n  },\n  modalInput: {\n    fontSize: 16,\n    color: '#2c3e50',\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n    borderRadius: 8,\n    padding: 12,\n    marginBottom: 16,\n    backgroundColor: '#f8f9fa',\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    marginTop: 16,\n  },\n  modalButton: {\n    paddingHorizontal: 16,\n    paddingVertical: 10,\n    borderRadius: 8,\n    marginLeft: 8,\n    minWidth: 80,\n    alignItems: 'center',\n  },\n  cancelButton: {\n    backgroundColor: '#f8f9fa',\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n  },\n  confirmButton: {\n    backgroundColor: '#4a6da7',\n  },\n  modalButtonText: {\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  confirmButtonText: {\n    color: '#fff',\n  },\n});\n\nexport default PerfilUsuario;","import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  Text, \n  StyleSheet, \n  ScrollView, \n  TouchableOpacity, \n  TextInput,\n  Alert,\n  ActivityIndicator,\n  Dimensions,\n  SafeAreaView,\n  Platform,\n  Linking\n} from 'react-native';\nimport { Picker } from '@react-native-picker/picker';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../../lib/supabase';\nimport QRCode from 'react-native-qrcode-svg';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst MAX_CONTENT_WIDTH = 1200;\n\nconst AgregarEquiposScreen = () => {\n  const navigation = useNavigation();\n  const [loading, setLoading] = useState(false);\n  const [categorias, setCategorias] = useState([]);\n  const [showQR, setShowQR] = useState(false);\n  const [qrData, setQrData] = useState(null);\n  const [equipoId, setEquipoId] = useState(null);\n  \n  // Estado del formulario\n  const [formData, setFormData] = useState({\n    nombreequipo: '',\n    idcategoria: '',\n    descripcion: ''\n  });\n\n  // Configurar el manejo de deep linking\n  useEffect(() => {\n    const handleDeepLink = (event) => {\n      if (event.url) {\n        const route = event.url.replace(/.*?:\\/\\//g, '');\n        const [routeName, id] = route.split('/');\n        if (routeName === 'equipos' && id) {\n          navigation.navigate('DetallesEquipo', { equipoId: id });\n        }\n      }\n    };\n\n    // Escuchar eventos de deep linking\n    Linking.addEventListener('url', handleDeepLink);\n\n    return () => {\n      Linking.removeEventListener('url', handleDeepLink);\n    };\n  }, [navigation]);\n\n  // Mostrar mensajes consistentes en web y móvil\n  const showMessage = (title, message, isSuccess = false) => {\n    if (Platform.OS === 'web') {\n      const webMessage = `${title}\\n${message}\\n\\n${isSuccess ? '✅' : '❌'}`;\n      alert(webMessage);\n    } else {\n      Alert.alert(\n        title,\n        message,\n        isSuccess ? [\n          { text: 'OK', onPress: () => {} }\n        ] : null\n      );\n    }\n  };\n\n  // Cargar categorías al montar el componente\n  useEffect(() => {\n    const fetchCategorias = async () => {\n      try {\n        const { data, error } = await supabase\n          .from('categoriasequipos')\n          .select('idcategoria, nombrecategoria')\n          .order('nombrecategoria', { ascending: true });\n        \n        if (error) throw error;\n        setCategorias(data);\n      } catch (error) {\n        console.error('Error al cargar categorías:', error);\n        showMessage('Error', 'No se pudieron cargar las categorías. Por favor, intente nuevamente.');\n      }\n    };\n    \n    fetchCategorias();\n  }, []);\n\n  const handleChange = (name, value) => {\n    setFormData({\n      ...formData,\n      [name]: String(value)\n    });\n  };\n\n  const handleSubmit = async () => {\n    // Validación de campos\n    if (!formData.nombreequipo.trim()) {\n      showMessage('Campo requerido', 'Por favor ingrese el nombre del equipo');\n      return;\n    }\n\n    if (!formData.idcategoria) {\n      showMessage('Campo requerido', 'Por favor seleccione una categoría');\n      return;\n    }\n\n    setLoading(true);\n    \n    try {\n      const equipoData = {\n        nombreequipo: formData.nombreequipo.trim(),\n        idcategoria: Number(formData.idcategoria),\n        estado: 'disponible',\n        descripcion: formData.descripcion.trim()\n      };\n\n      const { data, error } = await supabase\n        .from('equipos')\n        .insert([equipoData])\n        .select();\n      \n      if (error) throw error;\n\n      // Generar datos para el QR\n      const qrContent = `equipos://${data[0].idequipo}`;\n      setQrData(qrContent);\n      setEquipoId(data[0].idequipo);\n      setShowQR(true);\n      \n      showMessage('¡Éxito!', 'El equipo se ha registrado exitosamente. Puede escanear el código QR para ver los detalles.');\n      \n    } catch (error) {\n      console.error('Error al guardar equipo:', error);\n      let errorMessage = 'Ocurrió un error al intentar guardar el equipo.';\n      if (error.message.includes('duplicate key')) {\n        errorMessage = 'Ya existe un equipo con ese nombre. Por favor use un nombre diferente.';\n      } else if (error.message) {\n        errorMessage = `Error: ${error.message}`;\n      }\n      showMessage('Error', errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCloseQR = () => {\n    setShowQR(false);\n    navigation.goBack();\n  };\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <View style={styles.container}>\n        {/* Header con menú */}\n        <View style={styles.header}>\n          <TouchableOpacity \n            onPress={() => navigation.openDrawer()}\n            style={styles.menuButton}\n            hitSlop={{top: 20, bottom: 20, left: 20, right: 20}}\n          >\n            <Icon name=\"menu\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Agregar Nuevo Equipo</Text>\n        </View>\n        \n        {showQR ? (\n          <View style={styles.qrContainer}>\n            <Text style={styles.qrTitle}>Código QR del Equipo</Text>\n            <Text style={styles.qrSubtitle}>Escanea este código para ver los detalles del equipo</Text>\n            \n            <View style={styles.qrCodeContainer}>\n              <QRCode\n                value={qrData}\n                size={isMobile ? 250 : 300}\n                color=\"#2c3e50\"\n                backgroundColor=\"white\"\n              />\n            </View>\n            \n            <Text style={styles.qrInfo}>Equipo: {formData.nombreequipo}</Text>\n            \n            <TouchableOpacity \n              style={styles.closeButton}\n              onPress={() => navigation.navigate('DetallesEquipo', { equipoId })}\n            >\n              <Text style={styles.closeButtonText}>Ver Detalles</Text>\n            </TouchableOpacity>\n            \n            <TouchableOpacity \n              style={[styles.closeButton, { backgroundColor: '#6c757d', marginTop: 10 }]}\n              onPress={handleCloseQR}\n            >\n              <Text style={styles.closeButtonText}>Cerrar</Text>\n            </TouchableOpacity>\n          </View>\n        ) : (\n          <ScrollView \n            contentContainerStyle={styles.scrollContent}\n            showsVerticalScrollIndicator={false}\n          >\n            <View style={styles.content}>\n              <View style={styles.formContainer}>\n                {/* Nombre del equipo */}\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>Nombre del equipo*</Text>\n                  <TextInput\n                    style={styles.input}\n                    placeholder=\"Ej. Laptop Dell XPS 15\"\n                    value={formData.nombreequipo}\n                    onChangeText={(text) => handleChange('nombreequipo', text)}\n                    maxLength={50}\n                  />\n                </View>\n                \n                {/* Categoría */}\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>Categoría*</Text>\n                  <View style={styles.pickerContainer}>\n                    <Picker\n                      selectedValue={formData.idcategoria}\n                      onValueChange={(value) => handleChange('idcategoria', value)}\n                    >\n                      <Picker.Item label=\"Seleccione una categoría\" value=\"\" />\n                      {categorias.map((cat) => (\n                        <Picker.Item \n                          key={String(cat.idcategoria)}\n                          label={cat.nombrecategoria} \n                          value={String(cat.idcategoria)}\n                        />\n                      ))}\n                    </Picker>\n                  </View>\n                </View>\n                \n                {/* Descripción */}\n                <View style={styles.formGroup}>\n                  <Text style={styles.label}>Descripción</Text>\n                  <TextInput\n                    style={[styles.input, styles.multilineInput]}\n                    placeholder=\"Detalles adicionales sobre el equipo\"\n                    value={formData.descripcion}\n                    onChangeText={(text) => handleChange('descripcion', text)}\n                    multiline\n                    numberOfLines={4}\n                    maxLength={200}\n                  />\n                </View>\n                \n                <TouchableOpacity \n                  style={[styles.submitButton, loading && styles.disabledButton]}\n                  onPress={handleSubmit}\n                  disabled={loading}\n                >\n                  {loading ? (\n                    <ActivityIndicator color=\"#ffffff\" />\n                  ) : (\n                    <>\n                      <Icon name=\"save\" size={20} color=\"#ffffff\" style={styles.buttonIcon} />\n                      <Text style={styles.submitButtonText}>Guardar Equipo</Text>\n                    </>\n                  )}\n                </TouchableOpacity>\n              </View>\n            </View>\n          </ScrollView>\n        )}\n      </View>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#ffffff',\n    paddingVertical: 16,\n    paddingHorizontal: isMobile ? 16 : 24,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  menuButton: {\n    marginRight: 16,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 18 : 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n  },\n  scrollContent: {\n    flexGrow: 1,\n    paddingBottom: 24,\n  },\n  content: {\n    width: '100%',\n    maxWidth: MAX_CONTENT_WIDTH,\n    alignSelf: 'center',\n    paddingHorizontal: isMobile ? 16 : 24,\n  },\n  formContainer: {\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    padding: isMobile ? 16 : 24,\n    marginTop: 24,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n  },\n  formGroup: {\n    marginBottom: 20,\n  },\n  label: {\n    fontSize: 14,\n    color: '#495057',\n    marginBottom: 8,\n    fontWeight: '500',\n  },\n  input: {\n    backgroundColor: '#f8f9fa',\n    borderWidth: 1,\n    borderColor: '#ced4da',\n    borderRadius: 8,\n    padding: isMobile ? 12 : 14,\n    fontSize: 16,\n    color: '#495057',\n  },\n  multilineInput: {\n    minHeight: 100,\n    textAlignVertical: 'top',\n  },\n  pickerContainer: {\n    backgroundColor: '#f8f9fa',\n    borderWidth: 1,\n    borderColor: '#ced4da',\n    borderRadius: 8,\n    overflow: 'hidden',\n  },\n  picker: {\n    width: '100%',\n    color: '#495057',\n  },\n  submitButton: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#4a6da7',\n    borderRadius: 8,\n    padding: 16,\n    marginTop: 16,\n  },\n  submitButtonText: {\n    color: '#ffffff',\n    fontSize: 16,\n    fontWeight: '600',\n    marginLeft: 8,\n  },\n  buttonIcon: {\n    marginRight: 8,\n  },\n\n  qrContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  qrTitle: {\n    fontSize: 22,\n    fontWeight: 'bold',\n    color: '#2c3e50',\n    marginBottom: 8,\n  },\n  qrSubtitle: {\n    fontSize: 16,\n    color: '#7f8c8d',\n    marginBottom: 24,\n    textAlign: 'center',\n  },\n  qrCodeContainer: {\n    padding: 20,\n    backgroundColor: 'white',\n    borderRadius: 12,\n    marginBottom: 24,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 6,\n    elevation: 3,\n  },\n  qrInfo: {\n    fontSize: 16,\n    color: '#34495e',\n    marginBottom: 24,\n    textAlign: 'center',\n  },\n  closeButton: {\n    backgroundColor: '#4a6da7',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n  },\n  closeButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n});\n\nexport default AgregarEquiposScreen;","import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  Text, \n  StyleSheet, \n  ScrollView, \n  TouchableOpacity, \n  TextInput,\n  ActivityIndicator,\n  Dimensions,\n  SafeAreaView,\n  RefreshControl,\n  FlatList,\n  Alert,\n  Modal\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport { Picker } from '@react-native-picker/picker';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../../lib/supabase';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst MAX_CONTENT_WIDTH = 1200;\n\nconst ModificarEquiposScreen = () => {\n  const navigation = useNavigation();\n  const [equipos, setEquipos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filterEstado, setFilterEstado] = useState('todos');\n  \n  // Estados para edición\n  const [modalVisible, setModalVisible] = useState(false);\n  const [currentEquipo, setCurrentEquipo] = useState(null);\n  const [formData, setFormData] = useState({\n    nombreequipo: '',\n    idcategoria: '',\n    estado: 'disponible',\n    descripcion: ''\n  });\n  const [categorias, setCategorias] = useState([]);\n\n  // Estados para eliminación\n  const [deleteModalVisible, setDeleteModalVisible] = useState(false);\n  const [equipoToDelete, setEquipoToDelete] = useState(null);\n\n  // Cargar equipos y categorías\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        \n        // Obtener categorías\n        const { data: categoriasData, error: categoriasError } = await supabase\n          .from('categoriasequipos')\n          .select('idcategoria, nombrecategoria')\n          .order('nombrecategoria', { ascending: true });\n        \n        if (categoriasError) throw categoriasError;\n        setCategorias(categoriasData || []);\n\n        // Obtener equipos (excluyendo los en mantenimiento)\n        await fetchEquipos();\n        \n      } catch (error) {\n        console.error('Error al cargar datos:', error);\n        Alert.alert('Error', 'No se pudieron cargar los datos');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchData();\n  }, []);\n\n  const fetchEquipos = async () => {\n    try {\n      setLoading(true);\n      \n      const { data, error } = await supabase\n        .from('equipos')\n        .select(`\n          idequipo,\n          nombreequipo,\n          idcategoria,\n          estado,\n          descripcion,\n          fechacreacion,\n          categoriasequipos: idcategoria (nombrecategoria)\n        `)\n        .neq('estado', 'en mantenimiento')\n        .order('nombreequipo', { ascending: true });\n  \n      if (error) throw error;\n      \n      setEquipos(data || []);\n      \n    } catch (error) {\n      console.error('Error al cargar equipos:', error);\n      Alert.alert('Error', error.message || 'Error al cargar equipos');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Manejar edición de equipo\n  const handleEdit = (equipo) => {\n    setCurrentEquipo(equipo);\n    setFormData({\n      nombreequipo: equipo.nombreequipo,\n      idcategoria: String(equipo.idcategoria),\n      estado: equipo.estado,\n      descripcion: equipo.descripcion || ''\n    });\n    setModalVisible(true);\n  };\n\n  const handleFormChange = (name, value) => {\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n\n  const handleUpdate = async () => {\n    if (!formData.nombreequipo || !formData.idcategoria) {\n      Alert.alert('Error', 'Por favor complete todos los campos obligatorios');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      \n      const { error } = await supabase\n    .from('equipos')\n    .update({\n      nombreequipo: formData.nombreequipo,\n      idcategoria: Number(formData.idcategoria),\n      estado: formData.estado,\n      descripcion: formData.descripcion\n      // Elimina fechaactualizacion si no existe\n    })\n    .eq('idequipo', currentEquipo.idequipo);\n\n      if (error) throw error;\n      \n      Alert.alert('Éxito', 'Equipo actualizado correctamente');\n      setModalVisible(false);\n      fetchEquipos();\n      \n    } catch (error) {\n      console.error('Error al actualizar equipo:', error);\n      Alert.alert('Error', 'No se pudo actualizar el equipo');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Manejar eliminación de equipo (marcar como no disponible)\n  const handleDelete = (equipo) => {\n    setEquipoToDelete(equipo);\n    setDeleteModalVisible(true);\n  };\n\n  const confirmDelete = async () => {\n    try {\n      setLoading(true);\n      \n      const { error } = await supabase\n        .from('equipos')\n        .update({ \n          estado: 'no disponible',\n          fechaactualizacion: new Date().toISOString()\n        })\n        .eq('idequipo', equipoToDelete.idequipo);\n\n      if (error) throw error;\n      \n      Alert.alert('Éxito', 'Equipo marcado como no disponible');\n      setDeleteModalVisible(false);\n      fetchEquipos();\n      \n    } catch (error) {\n      console.error('Error al eliminar equipo:', error);\n      Alert.alert('Error', 'No se pudo actualizar el estado del equipo');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Color según estado (sin la opción de mantenimiento)\n  const getStatusColor = (estado) => {\n    switch(estado) {\n      case 'disponible': return '#2ecc71';\n      case 'prestado': return '#3498db';\n      case 'reservado': return '#f39c12';\n      case 'no disponible': return '#e74c3c';\n      default: return '#95a5a6';\n    }\n  };\n\n  // Renderizar cada item de equipo\n  const renderItem = ({ item }) => (\n    <View style={styles.itemContainer}>\n      <View style={styles.itemHeader}>\n        <Text style={styles.itemName}>{item.nombreequipo}</Text>\n        <View style={[styles.statusBadge, { backgroundColor: getStatusColor(item.estado) }]}>\n          <Text style={styles.statusText}>{item.estado.toUpperCase()}</Text>\n        </View>\n      </View>\n      \n      <View style={styles.itemDetails}>\n        <Text style={styles.detailText}>\n          <Icon name=\"category\" size={16} color=\"#7f8c8d\" /> {item.categoriasequipos?.nombrecategoria || 'Sin categoría'}\n        </Text>\n        <Text style={styles.detailText}>\n          <Icon name=\"calendar-today\" size={16} color=\"#7f8c8d\" /> {new Date(item.fechacreacion).toLocaleDateString()}\n        </Text>\n        {item.fechacreacion && (\n  <Text style={styles.detailText}>\n    <Icon name=\"update\" size={16} color=\"#7f8c8d\" /> Creado: {new Date(item.fechacreacion).toLocaleDateString()}\n  </Text>\n)}\n      </View>\n      \n      {item.descripcion && (\n        <Text style={styles.itemDescription} numberOfLines={2}>\n          {item.descripcion}\n        </Text>\n      )}\n      \n      <View style={styles.itemActions}>\n        <TouchableOpacity \n          style={[styles.actionButton, styles.editButton]}\n          onPress={() => handleEdit(item)}\n        >\n          <Icon name=\"edit\" size={18} color=\"white\" />\n          <Text style={styles.actionButtonText}>Editar</Text>\n        </TouchableOpacity>\n        \n        <TouchableOpacity \n          style={[styles.actionButton, styles.deleteButton]}\n          onPress={() => handleDelete(item)}\n          disabled={item.estado === 'no disponible'}\n        >\n          <Icon name=\"delete\" size={18} color=\"white\" />\n          <Text style={styles.actionButtonText}>Eliminar</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <View style={styles.container}>\n        {/* Header con menú */}\n        <View style={styles.header}>\n          <TouchableOpacity \n            onPress={() => navigation.openDrawer()}\n            style={styles.menuButton}\n          >\n            <Icon name=\"menu\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Administrar Equipos</Text>\n          <TouchableOpacity \n            onPress={fetchEquipos}\n            style={styles.refreshButton}\n          >\n            <Icon name=\"refresh\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n        </View>\n\n        {/* Controles de búsqueda y filtro */}\n        <View style={styles.controlsContainer}>\n          <View style={styles.searchContainer}>\n            <TextInput\n              style={styles.searchInput}\n              placeholder=\"Buscar equipos...\"\n              value={searchQuery}\n              onChangeText={setSearchQuery}\n              placeholderTextColor=\"#999\"\n            />\n            <TouchableOpacity \n              style={styles.searchButton}\n              onPress={fetchEquipos}\n            >\n              <Icon name=\"search\" size={20} color=\"white\" />\n            </TouchableOpacity>\n          </View>\n\n          <View style={styles.filterContainer}>\n            <Text style={styles.filterLabel}>Filtrar por estado:</Text>\n            <View style={styles.pickerContainer}>\n              <Picker\n                selectedValue={filterEstado}\n                onValueChange={(value) => {\n                  setFilterEstado(value);\n                  fetchEquipos();\n                }}\n                style={styles.picker}\n              >\n                <Picker.Item label=\"Todos\" value=\"todos\" />\n                <Picker.Item label=\"Disponible\" value=\"disponible\" />\n                <Picker.Item label=\"Prestado\" value=\"prestado\" />\n                <Picker.Item label=\"Reservado\" value=\"reservado\" />\n                <Picker.Item label=\"No disponible\" value=\"no disponible\" />\n              </Picker>\n            </View>\n          </View>\n        </View>\n\n        {/* Lista de equipos */}\n        {loading && !refreshing ? (\n          <View style={styles.loadingContainer}>\n            <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\n            <Text style={styles.loadingText}>Cargando equipos...</Text>\n          </View>\n        ) : equipos.length === 0 ? (\n          <View style={styles.emptyContainer}>\n            <Icon name=\"info-outline\" size={48} color=\"#95a5a6\" />\n            <Text style={styles.emptyText}>No se encontraron equipos</Text>\n            <TouchableOpacity \n              style={styles.refreshButtonLarge}\n              onPress={fetchEquipos}\n            >\n              <Text style={styles.refreshButtonText}>Recargar</Text>\n            </TouchableOpacity>\n          </View>\n        ) : (\n          <FlatList\n            data={equipos}\n            renderItem={renderItem}\n            keyExtractor={item => item.idequipo.toString()}\n            contentContainerStyle={styles.listContent}\n            refreshControl={\n              <RefreshControl\n                refreshing={refreshing}\n                onRefresh={fetchEquipos}\n                colors={['#4a6da7']}\n              />\n            }\n          />\n        )}\n\n        {/* Modal de Edición */}\n        <Modal\n          animationType=\"slide\"\n          transparent={true}\n          visible={modalVisible}\n          onRequestClose={() => setModalVisible(false)}\n        >\n          <View style={styles.modalContainer}>\n            <View style={styles.modalContent}>\n              <Text style={styles.modalTitle}>Editar Equipo</Text>\n              \n              <View style={styles.formGroup}>\n                <Text style={styles.label}>Nombre*</Text>\n                <TextInput\n                  style={styles.input}\n                  value={formData.nombreequipo}\n                  onChangeText={(text) => handleFormChange('nombreequipo', text)}\n                  placeholder=\"Nombre del equipo\"\n                />\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>Categoría*</Text>\n                <View style={styles.pickerContainer}>\n                  <Picker\n                    selectedValue={formData.idcategoria}\n                    onValueChange={(value) => handleFormChange('idcategoria', value)}\n                    style={styles.picker}\n                  >\n                    <Picker.Item label=\"Seleccione categoría\" value=\"\" />\n                    {categorias.map(cat => (\n                      <Picker.Item \n                        key={cat.idcategoria} \n                        label={cat.nombrecategoria} \n                        value={String(cat.idcategoria)} \n                      />\n                    ))}\n                  </Picker>\n                </View>\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>Estado*</Text>\n                <View style={styles.pickerContainer}>\n                  <Picker\n                    selectedValue={formData.estado}\n                    onValueChange={(value) => handleFormChange('estado', value)}\n                    style={styles.picker}\n                  >\n                    <Picker.Item label=\"Disponible\" value=\"disponible\" />\n                    <Picker.Item label=\"Prestado\" value=\"prestado\" />\n                    <Picker.Item label=\"Reservado\" value=\"reservado\" />\n                    <Picker.Item label=\"No disponible\" value=\"no disponible\" />\n                  </Picker>\n                </View>\n              </View>\n\n              <View style={styles.formGroup}>\n                <Text style={styles.label}>Descripción</Text>\n                <TextInput\n                  style={[styles.input, styles.textArea]}\n                  value={formData.descripcion}\n                  onChangeText={(text) => handleFormChange('descripcion', text)}\n                  placeholder=\"Descripción del equipo\"\n                  multiline\n                  numberOfLines={4}\n                />\n              </View>\n\n              <View style={styles.modalButtons}>\n                <TouchableOpacity \n                  style={[styles.modalButton, styles.cancelButton]}\n                  onPress={() => setModalVisible(false)}\n                  disabled={loading}\n                >\n                  <Text style={styles.modalButtonText}>Cancelar</Text>\n                </TouchableOpacity>\n                <TouchableOpacity \n                  style={[styles.modalButton, styles.saveButton]}\n                  onPress={handleUpdate}\n                  disabled={loading}\n                >\n                  {loading ? (\n                    <ActivityIndicator color=\"white\" />\n                  ) : (\n                    <Text style={styles.modalButtonText}>Guardar</Text>\n                  )}\n                </TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </Modal>\n\n        {/* Modal de Eliminación */}\n        <Modal\n          animationType=\"fade\"\n          transparent={true}\n          visible={deleteModalVisible}\n          onRequestClose={() => setDeleteModalVisible(false)}\n        >\n          <View style={styles.modalContainer}>\n            <View style={styles.modalContent}>\n              <Text style={styles.modalTitle}>Confirmar Eliminación</Text>\n              <Text style={styles.deleteMessage}>\n                ¿Está seguro que desea marcar el equipo \"{equipoToDelete?.nombreequipo}\" como no disponible?\n              </Text>\n              \n              <View style={styles.modalButtons}>\n                <TouchableOpacity \n                  style={[styles.modalButton, styles.cancelButton]}\n                  onPress={() => setDeleteModalVisible(false)}\n                  disabled={loading}\n                >\n                  <Text style={styles.modalButtonText}>Cancelar</Text>\n                </TouchableOpacity>\n                <TouchableOpacity \n                  style={[styles.modalButton, styles.deleteButton]}\n                  onPress={confirmDelete}\n                  disabled={loading}\n                >\n                  {loading ? (\n                    <ActivityIndicator color=\"white\" />\n                  ) : (\n                    <Text style={styles.modalButtonText}>Confirmar</Text>\n                  )}\n                </TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </Modal>\n      </View>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n    maxWidth: MAX_CONTENT_WIDTH,\n    width: '100%',\n    alignSelf: 'center',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: '#ffffff',\n    paddingVertical: 16,\n    paddingHorizontal: isMobile ? 16 : 24,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  menuButton: {\n    marginRight: 16,\n  },\n  refreshButton: {\n    marginLeft: 16,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 18 : 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n    flex: 1,\n    textAlign: 'center',\n  },\n  controlsContainer: {\n    padding: isMobile ? 16 : 20,\n    backgroundColor: '#ffffff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  searchInput: {\n    flex: 1,\n    height: 40,\n    backgroundColor: '#f8f9fa',\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    fontSize: 16,\n    color: '#2c3e50',\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n  },\n  searchButton: {\n    backgroundColor: '#4a6da7',\n    width: 40,\n    height: 40,\n    borderRadius: 8,\n    marginLeft: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  filterContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  filterLabel: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginRight: 8,\n  },\n  pickerContainer: {\n    flex: 1,\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 8,\n    overflow: 'hidden',\n  },\n  picker: {\n    height: 40,\n    width: '100%',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#6c757d',\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 40,\n  },\n  emptyText: {\n    fontSize: 18,\n    color: '#495057',\n    marginTop: 16,\n  },\n  refreshButtonLarge: {\n    marginTop: 16,\n    backgroundColor: '#4a6da7',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n  },\n  refreshButtonText: {\n    color: 'white',\n    fontWeight: '500',\n    fontSize: 16,\n  },\n  listContent: {\n    padding: isMobile ? 8 : 16,\n  },\n  itemContainer: {\n    backgroundColor: '#ffffff',\n    borderRadius: 8,\n    padding: 16,\n    marginBottom: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 1,\n  },\n  itemHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  itemName: {\n    fontSize: 18,\n    fontWeight: '500',\n    color: '#2c3e50',\n    flex: 1,\n  },\n  statusBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n    marginLeft: 8,\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '600',\n    color: '#ffffff',\n  },\n  itemDetails: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    marginBottom: 8,\n  },\n  detailText: {\n    fontSize: 14,\n    color: '#7f8c8d',\n    marginBottom: 4,\n    width: '48%',\n  },\n  itemDescription: {\n    fontSize: 14,\n    color: '#34495e',\n    lineHeight: 20,\n    marginBottom: 12,\n  },\n  itemActions: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    marginTop: 8,\n  },\n  actionButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    borderRadius: 6,\n    marginLeft: 8,\n  },\n  editButton: {\n    backgroundColor: '#4a6da7',\n  },\n  deleteButton: {\n    backgroundColor: '#e74c3c',\n  },\n  actionButtonText: {\n    color: 'white',\n    marginLeft: 6,\n    fontWeight: '500',\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.5)',\n  },\n  modalContent: {\n    width: isMobile ? '90%' : '70%',\n    backgroundColor: 'white',\n    borderRadius: 10,\n    padding: 20,\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  deleteMessage: {\n    fontSize: 16,\n    color: '#7f8c8d',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  formGroup: {\n    marginBottom: 16,\n  },\n  label: {\n    fontSize: 14,\n    color: '#7f8c8d',\n    marginBottom: 6,\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 6,\n    padding: 10,\n    fontSize: 16,\n  },\n  textArea: {\n    height: 100,\n    textAlignVertical: 'top',\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 20,\n  },\n  modalButton: {\n    flex: 1,\n    padding: 12,\n    borderRadius: 6,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  cancelButton: {\n    backgroundColor: '#95a5a6',\n    marginRight: 8,\n  },\n  saveButton: {\n    backgroundColor: '#4a6da7',\n  },\n  modalButtonText: {\n    color: 'white',\n    fontWeight: '500',\n  },\n});\n\nexport default ModificarEquiposScreen;","// screens/Equipment/VerEquiposScreen.js\nimport React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  FlatList,\n  TouchableOpacity,\n  ActivityIndicator,\n  Dimensions,\n  SafeAreaView,\n  RefreshControl,\n  TextInput,\n  Alert,\n  Modal\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../../lib/supabase';\nimport QRCode from 'react-native-qrcode-svg';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst MAX_CONTENT_WIDTH = 1200;\n\nconst VerEquiposScreen = () => {\n  const navigation = useNavigation();\n  const [equipos, setEquipos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedEquipo, setSelectedEquipo] = useState(null);\n  const [showQRModal, setShowQRModal] = useState(false);\n  const [qrContent, setQrContent] = useState('');\n\n  useEffect(() => {\n    fetchEquipos();\n  }, []);\n\n  const fetchEquipos = async () => {\n    try {\n      setRefreshing(true);\n      setLoading(true);\n      \n      let query = supabase\n        .from('equipos')\n        .select(`\n          idequipo,\n          nombreequipo,\n          idcategoria,\n          estado,\n          descripcion,\n          fechacreacion,\n          categoriasequipos: categoriasequipos!inner(nombrecategoria)\n        `);\n\n      if (searchQuery) {\n        query = query.ilike('nombreequipo', `%${searchQuery}%`);\n      }\n\n      query = query.order('nombreequipo', { ascending: true });\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n\n      setEquipos(data || []);\n      \n    } catch (error) {\n      console.error('Error al cargar equipos:', error);\n      Alert.alert('Error', 'No se pudieron cargar los equipos');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  const handleSearch = () => {\n    fetchEquipos();\n  };\n\n  const handleShowQR = (equipo) => {\n    const content = `equipos://detalles/${equipo.idequipo}`;\n    setQrContent(content);\n    setSelectedEquipo(equipo);\n    setShowQRModal(true);\n  };\n\n  const handleNavigateToDetails = () => {\n    setShowQRModal(false);\n    navigation.navigate('DetallesEquipo', { equipoId: selectedEquipo.idequipo });\n  };\n\n  const getStatusColor = (estado) => {\n    switch(estado) {\n      case 'disponible': return '#2ecc71';\n      case 'prestado': return '#3498db';\n      case 'reservado': return '#f39c12';\n      case 'no disponible': return '#e74c3c';\n      case 'en mantenimiento': return '#9b59b6';\n      default: return '#95a5a6';\n    }\n  };\n\n  const renderItem = ({ item }) => (\n    <View style={styles.itemContainer}>\n      <View style={styles.itemHeader}>\n        <Text style={styles.itemName}>{item.nombreequipo}</Text>\n        <View style={[styles.statusBadge, { backgroundColor: getStatusColor(item.estado) }]}>\n          <Text style={styles.statusText}>{item.estado.toUpperCase()}</Text>\n        </View>\n      </View>\n      \n      <View style={styles.itemDetails}>\n        <Text style={styles.detailText}>\n          <Icon name=\"category\" size={16} color=\"#7f8c8d\" /> {item.categoriasequipos?.nombrecategoria || 'Sin categoría'}\n        </Text>\n        <Text style={styles.detailText}>\n          <Icon name=\"calendar-today\" size={16} color=\"#7f8c8d\" /> {new Date(item.fechacreacion).toLocaleDateString()}\n        </Text>\n      </View>\n      \n      {item.descripcion && (\n        <Text style={styles.itemDescription} numberOfLines={2}>\n          {item.descripcion}\n        </Text>\n      )}\n      \n      <View style={styles.itemActions}>\n        <TouchableOpacity \n          style={[styles.actionButton, styles.detailsButton]}\n          onPress={() => navigation.navigate('DetallesEquipo', { equipoId: item.idequipo })}\n        >\n          <Icon name=\"info\" size={18} color=\"white\" />\n          <Text style={styles.actionButtonText}>Detalles</Text>\n        </TouchableOpacity>\n        \n        <TouchableOpacity \n          style={[styles.actionButton, styles.qrButton]}\n          onPress={() => handleShowQR(item)}\n        >\n          <Icon name=\"qr-code\" size={18} color=\"white\" />\n          <Text style={styles.actionButtonText}>Ver QR</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <View style={styles.container}>\n        {/* Header con menú de administración */}\n        <View style={styles.header}>\n          <TouchableOpacity \n            onPress={() => navigation.openDrawer()}\n            style={styles.menuButton}\n            hitSlop={{top: 20, bottom: 20, left: 20, right: 20}}\n          >\n            <Icon name=\"menu\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Listado de Equipos</Text>\n          <Text style={styles.headerSubtitle}>Total: {equipos.length} equipos</Text>\n        </View>\n\n        <View style={styles.searchContainer}>\n          <TextInput\n            style={styles.searchInput}\n            placeholder=\"Buscar equipos...\"\n            value={searchQuery}\n            onChangeText={setSearchQuery}\n            onSubmitEditing={handleSearch}\n            placeholderTextColor=\"#999\"\n          />\n          <TouchableOpacity \n            style={styles.searchButton}\n            onPress={handleSearch}\n          >\n            <Icon name=\"search\" size={20} color=\"white\" />\n          </TouchableOpacity>\n        </View>\n\n        {loading && !refreshing ? (\n          <View style={styles.loadingContainer}>\n            <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\n            <Text style={styles.loadingText}>Cargando equipos...</Text>\n          </View>\n        ) : equipos.length === 0 ? (\n          <View style={styles.emptyContainer}>\n            <Icon name=\"inventory\" size={48} color=\"#95a5a6\" />\n            <Text style={styles.emptyText}>No se encontraron equipos</Text>\n            <Text style={styles.emptySubtext}>\n              {searchQuery \n                ? 'Prueba con otros términos de búsqueda' \n                : 'No hay equipos registrados en el sistema'}\n            </Text>\n            <TouchableOpacity \n              style={styles.refreshButton}\n              onPress={fetchEquipos}\n            >\n              <Text style={styles.refreshButtonText}>Recargar</Text>\n            </TouchableOpacity>\n          </View>\n        ) : (\n          <FlatList\n            data={equipos}\n            renderItem={renderItem}\n            keyExtractor={item => item.idequipo.toString()}\n            contentContainerStyle={styles.listContent}\n            refreshControl={\n              <RefreshControl\n                refreshing={refreshing}\n                onRefresh={fetchEquipos}\n                colors={['#4a6da7']}\n                tintColor=\"#4a6da7\"\n              />\n            }\n            ListEmptyComponent={\n              <View style={styles.emptyContainer}>\n                <Text style={styles.emptyText}>No hay equipos que coincidan con tu búsqueda</Text>\n              </View>\n            }\n          />\n        )}\n\n        <Modal\n          animationType=\"slide\"\n          transparent={true}\n          visible={showQRModal}\n          onRequestClose={() => setShowQRModal(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <View style={styles.modalContent}>\n              <Text style={styles.modalTitle}>Código QR del Equipo</Text>\n              \n              <View style={styles.qrContainer}>\n                <QRCode\n                  value={qrContent}\n                  size={isMobile ? 250 : 300}\n                  color=\"#2c3e50\"\n                  backgroundColor=\"white\"\n                />\n              </View>\n              \n              <Text style={styles.equipoName}>{selectedEquipo?.nombreequipo}</Text>\n              <Text style={styles.equipoCategory}>\n                {selectedEquipo?.categoriasequipos?.nombrecategoria || 'Sin categoría'}\n              </Text>\n              \n              <View style={styles.modalButtons}>\n                <TouchableOpacity \n                  style={[styles.modalButton, styles.detailsButton]}\n                  onPress={handleNavigateToDetails}\n                >\n                  <Icon name=\"info\" size={18} color=\"white\" />\n                  <Text style={styles.modalButtonText}>Ver Detalles</Text>\n                </TouchableOpacity>\n                \n                <TouchableOpacity \n                  style={[styles.modalButton, styles.closeButton]}\n                  onPress={() => setShowQRModal(false)}\n                >\n                  <Icon name=\"close\" size={18} color=\"white\" />\n                  <Text style={styles.modalButtonText}>Cerrar</Text>\n                </TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </Modal>\n      </View>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n    maxWidth: MAX_CONTENT_WIDTH,\n    width: '100%',\n    alignSelf: 'center',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: isMobile ? 16 : 24,\n    backgroundColor: '#ffffff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.05,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  menuButton: {\n    marginRight: 16,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 22 : 24,\n    fontWeight: '600',\n    color: '#2c3e50',\n    flex: 1,\n  },\n  headerSubtitle: {\n    fontSize: 14,\n    color: '#7f8c8d',\n    marginTop: 4,\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    padding: isMobile ? 16 : 20,\n    backgroundColor: '#ffffff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  searchInput: {\n    flex: 1,\n    height: 40,\n    backgroundColor: '#f8f9fa',\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    fontSize: 16,\n    color: '#2c3e50',\n  },\n  searchButton: {\n    backgroundColor: '#4a6da7',\n    width: 40,\n    height: 40,\n    borderRadius: 8,\n    marginLeft: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: 16,\n    color: '#6c757d',\n    fontSize: 16,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 40,\n  },\n  emptyText: {\n    fontSize: 18,\n    color: '#495057',\n    marginTop: 16,\n    textAlign: 'center',\n  },\n  emptySubtext: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginTop: 8,\n    textAlign: 'center',\n  },\n  refreshButton: {\n    marginTop: 16,\n    backgroundColor: '#4a6da7',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  refreshButtonText: {\n    color: 'white',\n    fontWeight: '500',\n    fontSize: 16,\n  },\n  listContent: {\n    padding: isMobile ? 8 : 16,\n    paddingBottom: 24,\n  },\n  itemContainer: {\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n  },\n  itemHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  itemName: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#2c3e50',\n    flex: 1,\n  },\n  statusBadge: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 16,\n    marginLeft: 8,\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '600',\n    color: '#ffffff',\n  },\n  itemDetails: {\n    marginBottom: 12,\n  },\n  detailText: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginBottom: 6,\n  },\n  itemDescription: {\n    fontSize: 14,\n    color: '#495057',\n    lineHeight: 20,\n    marginBottom: 12,\n  },\n  itemActions: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 12,\n  },\n  actionButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 10,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    marginHorizontal: 4,\n    flex: 1,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  detailsButton: {\n    backgroundColor: '#4a6da7',\n  },\n  qrButton: {\n    backgroundColor: '#2c3e50',\n  },\n  actionButtonText: {\n    color: 'white',\n    marginLeft: 8,\n    fontWeight: '500',\n    fontSize: 14,\n  },\n  modalOverlay: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.5)',\n  },\n  modalContent: {\n    backgroundColor: 'white',\n    borderRadius: 16,\n    padding: 24,\n    width: isMobile ? '90%' : '80%',\n    maxWidth: 400,\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.2,\n    shadowRadius: 10,\n    elevation: 5,\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  qrContainer: {\n    padding: 16,\n    backgroundColor: 'white',\n    borderRadius: 12,\n    marginBottom: 20,\n    borderWidth: 1,\n    borderColor: '#e9ecef',\n  },\n  equipoName: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginBottom: 4,\n    textAlign: 'center',\n  },\n  equipoCategory: {\n    fontSize: 16,\n    color: '#6c757d',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    width: '100%',\n  },\n  modalButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    flex: 1,\n    justifyContent: 'center',\n    marginHorizontal: 8,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  closeButton: {\n    backgroundColor: '#6c757d',\n  },\n  modalButtonText: {\n    color: 'white',\n    marginLeft: 8,\n    fontWeight: '500',\n    fontSize: 16,\n  },\n});\n\nexport default VerEquiposScreen;","import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  FlatList,\n  TouchableOpacity,\n  ActivityIndicator,\n  Dimensions,\n  SafeAreaView,\n  RefreshControl,\n  TextInput,\n  Alert,\n  Modal,\n  ScrollView,\n  Platform\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../../lib/supabase';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst isWeb = Platform.OS === 'web';\nconst MAX_CONTENT_WIDTH = 1200;\n\nconst CategoriasScreen = () => {\n  const navigation = useNavigation();\n  const [categorias, setCategorias] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [showFormModal, setShowFormModal] = useState(false);\n  const [showActionModal, setShowActionModal] = useState(false);\n  const [selectedCategoria, setSelectedCategoria] = useState(null);\n  const [formData, setFormData] = useState({\n    nombrecategoria: '',\n    descripcion: ''\n  });\n  const [formMode, setFormMode] = useState('create');\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n  const [showErrorMessage, setShowErrorMessage] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n\n  useEffect(() => {\n    fetchCategorias();\n  }, []);\n\n  const fetchCategorias = async () => {\n    try {\n      setRefreshing(true);\n      setLoading(true);\n      \n      let query = supabase\n        .from('categoriasequipos')\n        .select('*');\n\n      if (searchQuery) {\n        query = query.ilike('nombrecategoria', `%${searchQuery}%`);\n      }\n\n      query = query.order('nombrecategoria', { ascending: true });\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n\n      setCategorias(data || []);\n      \n    } catch (error) {\n      console.error('Error al cargar categorías:', error);\n      showError('No se pudieron cargar las categorías');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  const showSuccess = (message) => {\n    setSuccessMessage(message);\n    setShowSuccessMessage(true);\n    setTimeout(() => setShowSuccessMessage(false), 3000);\n  };\n\n  const showError = (message) => {\n    setErrorMessage(message);\n    setShowErrorMessage(true);\n    setTimeout(() => setShowErrorMessage(false), 3000);\n    \n    if (isWeb) {\n      console.error(message);\n    }\n  };\n\n  const handleSearch = () => {\n    fetchCategorias();\n  };\n\n  const openEditModal = (categoria) => {\n    setSelectedCategoria(categoria);\n    setFormData({\n      nombrecategoria: categoria.nombrecategoria,\n      descripcion: categoria.descripcion || ''\n    });\n    setFormMode('edit');\n    setShowFormModal(true);\n    setShowActionModal(false);\n  };\n\n  const openCreateModal = () => {\n    setSelectedCategoria(null);\n    setFormData({\n      nombrecategoria: '',\n      descripcion: ''\n    });\n    setFormMode('create');\n    setShowFormModal(true);\n  };\n\n  const handleFormChange = (name, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleFormSubmit = async () => {\n    if (!formData.nombrecategoria.trim()) {\n      showError('El nombre de la categoría es requerido');\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      const categoriaData = {\n        nombrecategoria: formData.nombrecategoria.trim(),\n        descripcion: formData.descripcion.trim(),\n        estado: 'activo'\n      };\n\n      if (formMode === 'edit' && selectedCategoria?.idcategoria) {\n        const { data, error } = await supabase\n          .from('categoriasequipos')\n          .update(categoriaData)\n          .eq('idcategoria', selectedCategoria.idcategoria)\n          .select();\n\n        if (error) throw error;\n        console.log('Categoría actualizada:', data);\n      } else {\n        const { data, error } = await supabase\n          .from('categoriasequipos')\n          .insert(categoriaData)\n          .select();\n\n        if (error) throw error;\n        console.log('Categoría creada:', data);\n      }\n\n      showSuccess(`Categoría ${formMode === 'edit' ? 'actualizada' : 'creada'} correctamente`);\n      setShowFormModal(false);\n      fetchCategorias();\n      \n    } catch (error) {\n      console.error('Error al guardar:', error);\n      showError(error.message || 'Error en la operación');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    try {\n      const { count, error: countError } = await supabase\n        .from('equipos')\n        .select('*', { count: 'exact' })\n        .eq('idcategoria', selectedCategoria.idcategoria);\n\n      if (countError) throw countError;\n\n      if (count > 0) {\n        showError('No se puede eliminar la categoría porque tiene equipos asociados');\n        setShowDeleteModal(false);\n        setShowActionModal(false);\n        return;\n      }\n\n      const { error } = await supabase\n        .from('categoriasequipos')\n        .delete()\n        .eq('idcategoria', selectedCategoria.idcategoria);\n\n      if (error) throw error;\n\n      setShowDeleteModal(false);\n      setShowActionModal(false);\n      fetchCategorias();\n      showSuccess('Categoría eliminada correctamente');\n    } catch (error) {\n      console.error('Error al eliminar categoría:', error);\n      showError('No se pudo eliminar la categoría');\n    }\n  };\n\n  const getStatusColor = (estado) => {\n    switch(estado) {\n      case 'activo': return '#2ecc71';\n      case 'inactivo': return '#e74c3c';\n      default: return '#95a5a6';\n    }\n  };\n\n  const handleCategoriaPress = (categoria) => {\n    setSelectedCategoria(categoria);\n    setShowActionModal(true);\n  };\n\n  const renderItem = ({ item }) => (\n    <TouchableOpacity onPress={() => handleCategoriaPress(item)}>\n      <View style={styles.itemContainer}>\n        <View style={styles.itemContent}>\n          <View style={styles.itemHeader}>\n            <Text style={styles.itemName}>{item.nombrecategoria}</Text>\n            <View style={[styles.statusBadge, { backgroundColor: getStatusColor(item.estado || 'activo') }]}>\n              <Text style={styles.statusText}>{(item.estado || 'activo').toUpperCase()}</Text>\n            </View>\n          </View>\n          \n          <View style={styles.itemDetails}>\n            {item.descripcion && (\n              <Text style={styles.detailText} numberOfLines={2}>\n                <Icon name=\"description\" size={16} color=\"#7f8c8d\" /> {item.descripcion}\n              </Text>\n            )}\n            <Text style={styles.detailText}>\n              <Icon name=\"calendar-today\" size={16} color=\"#7f8c8d\" /> {new Date(item.fechacreacion || new Date()).toLocaleDateString()}\n            </Text>\n          </View>\n        </View>\n      </View>\n    </TouchableOpacity>\n  );\n\n  if (loading && !refreshing) {\n    return (\n      <SafeAreaView style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\n        <Text style={styles.loadingText}>Cargando categorías...</Text>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <View style={styles.container}>\n        {/* Header */}\n        <View style={styles.header}>\n          <TouchableOpacity \n            onPress={() => navigation.openDrawer()}\n            style={styles.menuButton}\n          >\n            <Icon name=\"menu\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Gestión de Categorías</Text>\n          <TouchableOpacity \n            onPress={fetchCategorias}\n            style={styles.refreshButton}\n          >\n            <Icon name=\"refresh\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n        </View>\n\n        {/* Mensajes flotantes (web) */}\n        {isWeb && showSuccessMessage && (\n          <View style={styles.webSuccessMessage}>\n            <Icon name=\"check-circle\" size={20} color=\"#10B981\" />\n            <Text style={styles.webSuccessText}>{successMessage}</Text>\n          </View>\n        )}\n\n        {isWeb && showErrorMessage && (\n          <View style={styles.webErrorMessage}>\n            <Icon name=\"error\" size={20} color=\"#EF4444\" />\n            <Text style={styles.webErrorText}>{errorMessage}</Text>\n          </View>\n        )}\n\n        {/* Search and Add */}\n        <View style={styles.searchContainer}>\n          <TextInput\n            style={styles.searchInput}\n            placeholder=\"Buscar categorías...\"\n            value={searchQuery}\n            onChangeText={setSearchQuery}\n            onSubmitEditing={handleSearch}\n            placeholderTextColor=\"#999\"\n          />\n          <TouchableOpacity \n            style={styles.searchButton}\n            onPress={handleSearch}\n          >\n            <Icon name=\"search\" size={20} color=\"white\" />\n          </TouchableOpacity>\n          <TouchableOpacity \n            style={styles.addButton}\n            onPress={openCreateModal}\n          >\n            <Icon name=\"add\" size={24} color=\"white\" />\n          </TouchableOpacity>\n        </View>\n\n        {/* Content */}\n        {categorias.length === 0 ? (\n          <View style={styles.emptyContainer}>\n            <MaterialCommunityIcons name=\"shape-outline\" size={48} color=\"#95a5a6\" />\n            <Text style={styles.emptyText}>No se encontraron categorías</Text>\n            <Text style={styles.emptySubtext}>\n              {searchQuery \n                ? 'Prueba con otros términos de búsqueda' \n                : 'No hay categorías registradas en el sistema'}\n            </Text>\n            <TouchableOpacity \n              style={styles.refreshButtonLarge}\n              onPress={fetchCategorias}\n            >\n              <Text style={styles.refreshButtonText}>Recargar</Text>\n            </TouchableOpacity>\n          </View>\n        ) : (\n          <FlatList\n            data={categorias}\n            renderItem={renderItem}\n            keyExtractor={item => item.idcategoria.toString()}\n            contentContainerStyle={styles.listContent}\n            refreshControl={\n              <RefreshControl\n                refreshing={refreshing}\n                onRefresh={fetchCategorias}\n                colors={['#4a6da7']}\n                tintColor=\"#4a6da7\"\n              />\n            }\n          />\n        )}\n\n        {/* Action Modal */}\n        <Modal\n          animationType=\"slide\"\n          transparent={true}\n          visible={showActionModal}\n          onRequestClose={() => setShowActionModal(false)}\n        >\n          <View style={styles.actionModalOverlay}>\n            <View style={styles.actionModalContent}>\n              <Text style={styles.actionModalTitle}>{selectedCategoria?.nombrecategoria}</Text>\n              \n              <TouchableOpacity \n                style={[styles.actionModalButton, styles.editButton]}\n                onPress={() => openEditModal(selectedCategoria)}\n              >\n                <Icon name=\"edit\" size={20} color=\"white\" />\n                <Text style={styles.actionModalButtonText}>Editar Categoría</Text>\n              </TouchableOpacity>\n              \n              <TouchableOpacity \n                style={[styles.actionModalButton, styles.deleteButton]}\n                onPress={() => {\n                  setShowActionModal(false);\n                  setShowDeleteModal(true);\n                }}\n              >\n                <Icon name=\"delete\" size={20} color=\"white\" />\n                <Text style={styles.actionModalButtonText}>Eliminar Categoría</Text>\n              </TouchableOpacity>\n              \n              <TouchableOpacity \n                style={[styles.actionModalButton, styles.cancelButton]}\n                onPress={() => setShowActionModal(false)}\n              >\n                <Text style={styles.actionModalButtonText}>Cancelar</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </Modal>\n\n        {/* Delete Confirmation Modal */}\n        <Modal\n          animationType=\"fade\"\n          transparent={true}\n          visible={showDeleteModal}\n          onRequestClose={() => setShowDeleteModal(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <View style={styles.modalContent}>\n              <MaterialCommunityIcons name=\"alert-circle-outline\" size={48} color=\"#e74c3c\" />\n              <Text style={styles.modalTitle}>¿Eliminar categoría?</Text>\n              <Text style={styles.modalText}>\n                Estás a punto de eliminar la categoría \"{selectedCategoria?.nombrecategoria}\". \n                Esta acción no se puede deshacer.\n              </Text>\n              \n              <View style={styles.modalButtons}>\n                <TouchableOpacity \n                  style={[styles.modalButton, styles.cancelButton]}\n                  onPress={() => setShowDeleteModal(false)}\n                >\n                  <Text style={styles.modalButtonText}>Cancelar</Text>\n                </TouchableOpacity>\n                \n                <TouchableOpacity \n                  style={[styles.modalButton, styles.confirmButton]}\n                  onPress={handleDelete}\n                >\n                  <Text style={styles.modalButtonText}>Eliminar</Text>\n                </TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </Modal>\n\n        {/* Form Modal */}\n        <Modal\n          animationType=\"slide\"\n          transparent={true}\n          visible={showFormModal}\n          onRequestClose={() => setShowFormModal(false)}\n        >\n          <View style={styles.formModalOverlay}>\n            <ScrollView style={styles.formModalContent}>\n              <Text style={styles.formModalTitle}>\n                {formMode === 'edit' ? 'Editar Categoría' : 'Crear Nueva Categoría'}\n              </Text>\n\n              <Text style={styles.label}>Nombre de la categoría *</Text>\n              <TextInput\n                style={styles.input}\n                placeholder=\"Ej: Laptops, Monitores, etc.\"\n                value={formData.nombrecategoria}\n                onChangeText={(text) => handleFormChange('nombrecategoria', text)}\n                placeholderTextColor=\"#999\"\n              />\n\n              <Text style={styles.label}>Descripción</Text>\n              <TextInput\n                style={[styles.input, styles.textArea]}\n                placeholder=\"Descripción opcional\"\n                value={formData.descripcion}\n                onChangeText={(text) => handleFormChange('descripcion', text)}\n                multiline\n                numberOfLines={4}\n                placeholderTextColor=\"#999\"\n              />\n\n              <View style={styles.formModalButtons}>\n                <TouchableOpacity \n                  style={[styles.formModalButton, styles.cancelButton]}\n                  onPress={() => setShowFormModal(false)}\n                >\n                  <Text style={styles.formModalButtonText}>Cancelar</Text>\n                </TouchableOpacity>\n                \n                <TouchableOpacity \n                  style={[styles.formModalButton, styles.submitButton]}\n                  onPress={handleFormSubmit}\n                  disabled={loading}\n                >\n                  {loading ? (\n                    <ActivityIndicator color=\"white\" />\n                  ) : (\n                    <Text style={styles.formModalButtonText}>\n                      {formMode === 'edit' ? 'Guardar Cambios' : 'Crear Categoría'}\n                    </Text>\n                  )}\n                </TouchableOpacity>\n              </View>\n            </ScrollView>\n          </View>\n        </Modal>\n\n        {/* Alertas para móvil */}\n        {!isWeb && showSuccessMessage && (\n          <View style={styles.mobileSuccessMessage}>\n            <Icon name=\"check-circle\" size={20} color=\"#10B981\" />\n            <Text style={styles.mobileMessageText}>{successMessage}</Text>\n          </View>\n        )}\n\n        {!isWeb && showErrorMessage && (\n          <View style={styles.mobileErrorMessage}>\n            <Icon name=\"error\" size={20} color=\"#EF4444\" />\n            <Text style={styles.mobileMessageText}>{errorMessage}</Text>\n          </View>\n        )}\n      </View>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n    maxWidth: MAX_CONTENT_WIDTH,\n    width: '100%',\n    alignSelf: 'center',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: '#ffffff',\n    paddingVertical: 16,\n    paddingHorizontal: isMobile ? 16 : 24,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  menuButton: {\n    marginRight: 16,\n  },\n  refreshButton: {\n    marginLeft: 16,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 18 : 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n    flex: 1,\n    textAlign: 'center',\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    padding: isMobile ? 16 : 20,\n    backgroundColor: '#ffffff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  searchInput: {\n    flex: 1,\n    height: 40,\n    backgroundColor: '#f8f9fa',\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    fontSize: 16,\n    color: '#2c3e50',\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n  },\n  searchButton: {\n    backgroundColor: '#4a6da7',\n    width: 40,\n    height: 40,\n    borderRadius: 8,\n    marginLeft: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  addButton: {\n    backgroundColor: '#2ecc71',\n    width: 40,\n    height: 40,\n    borderRadius: 8,\n    marginLeft: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#6c757d',\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 40,\n  },\n  emptyText: {\n    fontSize: 18,\n    color: '#495057',\n    marginTop: 16,\n    textAlign: 'center',\n  },\n  emptySubtext: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginTop: 8,\n    textAlign: 'center',\n  },\n  refreshButtonLarge: {\n    marginTop: 16,\n    backgroundColor: '#4a6da7',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  refreshButtonText: {\n    color: 'white',\n    fontWeight: '500',\n    fontSize: 16,\n  },\n  listContent: {\n    padding: isMobile ? 8 : 16,\n    paddingBottom: 24,\n  },\n  itemContainer: {\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    marginBottom: 12,\n    marginHorizontal: isMobile ? 8 : 16,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n    overflow: 'hidden',\n  },\n  itemContent: {\n    padding: 16,\n  },\n  itemHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  itemName: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#2c3e50',\n    flex: 1,\n  },\n  statusBadge: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 16,\n    marginLeft: 8,\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '600',\n    color: '#ffffff',\n  },\n  itemDetails: {\n    marginBottom: 12,\n  },\n  detailText: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginBottom: 6,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  actionModalOverlay: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.5)',\n  },\n  actionModalContent: {\n    backgroundColor: 'white',\n    borderRadius: 16,\n    padding: 24,\n    width: isMobile ? '90%' : '60%',\n    maxWidth: 400,\n  },\n  actionModalTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  actionModalButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 14,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    marginBottom: 12,\n  },\n  actionModalButtonText: {\n    color: 'white',\n    marginLeft: 10,\n    fontWeight: '500',\n    fontSize: 16,\n  },\n  modalOverlay: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.5)',\n  },\n  modalContent: {\n    backgroundColor: 'white',\n    borderRadius: 16,\n    padding: 24,\n    width: isMobile ? '90%' : '80%',\n    maxWidth: 400,\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.2,\n    shadowRadius: 10,\n    elevation: 5,\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginTop: 16,\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  modalText: {\n    fontSize: 16,\n    color: '#6c757d',\n    marginBottom: 24,\n    textAlign: 'center',\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    width: '100%',\n  },\n  modalButton: {\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    flex: 1,\n    justifyContent: 'center',\n    marginHorizontal: 8,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  cancelButton: {\n    backgroundColor: '#6c757d',\n  },\n  confirmButton: {\n    backgroundColor: '#e74c3c',\n  },\n  modalButtonText: {\n    color: 'white',\n    fontWeight: '500',\n    fontSize: 16,\n    textAlign: 'center',\n  },\n  formModalOverlay: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.5)',\n  },\n  formModalContent: {\n    backgroundColor: 'white',\n    borderRadius: 16,\n    padding: 24,\n    width: isMobile ? '90%' : '60%',\n    maxWidth: 500,\n    maxHeight: '90%',\n  },\n  formModalTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  label: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginBottom: 8,\n    fontWeight: '500',\n  },\n  input: {\n    backgroundColor: '#f8f9fa',\n    borderRadius: 8,\n    padding: 12,\n    marginBottom: 16,\n    fontSize: 16,\n    color: '#2c3e50',\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n  },\n  textArea: {\n    minHeight: 100,\n    textAlignVertical: 'top',\n  },\n  formModalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 20,\n  },\n  formModalButton: {\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    flex: 1,\n    justifyContent: 'center',\n    marginHorizontal: 8,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  submitButton: {\n    backgroundColor: '#4a6da7',\n  },\n  formModalButtonText: {\n    color: 'white',\n    fontWeight: '500',\n    fontSize: 16,\n    textAlign: 'center',\n  },\n  editButton: {\n    backgroundColor: '#f39c12',\n  },\n  deleteButton: {\n    backgroundColor: '#e74c3c',\n  },\n  // Estilos para mensajes web\n  webSuccessMessage: {\n    position: 'fixed',\n    top: 20,\n    left: '50%',\n    transform: [{ translateX: -180 }],\n    width: 360,\n    backgroundColor: '#D1FAE5',\n    padding: 16,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    zIndex: 1000,\n  },\n  webSuccessText: {\n    color: '#065F46',\n    marginLeft: 10,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  webErrorMessage: {\n    position: 'fixed',\n    top: 20,\n    left: '50%',\n    transform: [{ translateX: -180 }],\n    width: 360,\n    backgroundColor: '#FEE2E2',\n    padding: 16,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    zIndex: 1000,\n  },\n  webErrorText: {\n    color: '#B91C1C',\n    marginLeft: 10,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  // Estilos para mensajes móviles\n  mobileSuccessMessage: {\n    position: 'absolute',\n    bottom: 20,\n    left: 20,\n    right: 20,\n    backgroundColor: '#D1FAE5',\n    padding: 16,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    zIndex: 1000,\n  },\n  mobileErrorMessage: {\n    position: 'absolute',\n    bottom: 20,\n    left: 20,\n    right: 20,\n    backgroundColor: '#FEE2E2',\n    padding: 16,\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    zIndex: 1000,\n  },\n  mobileMessageText: {\n    marginLeft: 10,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n});\n\nexport default CategoriasScreen;","import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  Text, \n  StyleSheet, \n  TouchableOpacity, \n  ActivityIndicator,\n  Dimensions,\n  SafeAreaView,\n  FlatList,\n  RefreshControl,\n  Alert\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport MaterialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons';\nimport { useNavigation } from '@react-navigation/native';\nimport { supabase } from '../../lib/supabase';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst MAX_CONTENT_WIDTH = 1200;\n\nconst VerCategoriasScreen = () => {\n  const navigation = useNavigation();\n  const [categorias, setCategorias] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n\n  const fetchCategorias = async () => {\n    try {\n      setRefreshing(true);\n      const { data, error } = await supabase\n        .from('categoriasequipos')\n        .select('idcategoria, nombrecategoria, descripcion, estado, fechacreacion')\n        .order('nombrecategoria', { ascending: true });\n\n      if (error) throw error;\n      setCategorias(data || []);\n    } catch (error) {\n      console.error('Error fetching categories:', error);\n      Alert.alert('Error', 'No se pudieron cargar las categorías');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchCategorias();\n  }, []);\n\n  const getStatusColor = (estado) => {\n    switch(estado.toLowerCase()) {\n      case 'activo': return '#2ecc71';\n      case 'inactivo': return '#e74c3c';\n      case 'mantenimiento': return '#f39c12';\n      default: return '#95a5a6';\n    }\n  };\n\n  const renderItem = ({ item }) => (\n    <View style={styles.categoryCard}>\n      <View style={styles.categoryIconContainer}>\n        <MaterialCommunityIcons name=\"shape-outline\" size={24} color=\"#4a6da7\" />\n      </View>\n      <View style={styles.categoryInfo}>\n        <Text style={styles.categoryName}>{item.nombrecategoria}</Text>\n        {item.descripcion && (\n          <Text style={styles.categoryDescription} numberOfLines={2}>\n            {item.descripcion}\n          </Text>\n        )}\n        <View style={styles.categoryDetails}>\n          <View style={[styles.statusBadge, { backgroundColor: getStatusColor(item.estado) }]}>\n            <Text style={styles.statusText}>{item.estado.toUpperCase()}</Text>\n          </View>\n          <Text style={styles.categoryDate}>\n            <Icon name=\"calendar-today\" size={14} color=\"#7f8c8d\" />{' '}\n            {new Date(item.fechacreacion).toLocaleDateString('es-ES')}\n          </Text>\n        </View>\n      </View>\n    </View>\n  );\n\n  if (loading) {\n    return (\n      <SafeAreaView style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color=\"#4a6da7\" />\n        <Text style={styles.loadingText}>Cargando categorías...</Text>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <View style={[styles.container, !isMobile && { maxWidth: MAX_CONTENT_WIDTH, alignSelf: 'center' }]}>\n        {/* Header con menú */}\n        <View style={styles.header}>\n          <TouchableOpacity \n            onPress={() => navigation.openDrawer()}\n            style={styles.menuButton}\n            hitSlop={{top: 20, bottom: 20, left: 20, right: 20}}\n          >\n            <Icon name=\"menu\" size={24} color=\"#2c3e50\" />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>Lista de Categorías</Text>\n        </View>\n        \n        {/* Contenido principal */}\n        <View style={styles.content}>\n          {/* Estadísticas */}\n          <View style={styles.statsContainer}>\n            <View style={styles.statCard}>\n              <View style={[styles.statIconContainer, {backgroundColor: '#e3f2fd'}]}>\n                <MaterialCommunityIcons name=\"shape-outline\" size={24} color=\"#1976d2\" />\n              </View>\n              <Text style={styles.statTitle}>Total de Categorías  </Text>\n              <Text style={styles.statValue}>{categorias.length}</Text>\n            </View>\n          </View>\n          \n          {/* Lista de categorías */}\n          <View style={styles.section}>\n            <Text style={styles.sectionTitle}>Categorías Registradas</Text>\n            \n            <FlatList\n              data={categorias}\n              renderItem={renderItem}\n              keyExtractor={(item) => item.idcategoria}\n              refreshControl={\n                <RefreshControl\n                  refreshing={refreshing}\n                  onRefresh={fetchCategorias}\n                  colors={['#4a6da7']}\n                />\n              }\n              ListEmptyComponent={\n                <View style={styles.emptyContainer}>\n                  <MaterialCommunityIcons name=\"shape-outline\" size={48} color=\"#95a5a6\" />\n                  <Text style={styles.emptyText}>No hay categorías registradas</Text>\n                </View>\n              }\n              contentContainerStyle={categorias.length === 0 ? styles.emptyListContent : styles.listContent}\n            />\n          </View>\n        </View>\n      </View>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f9fa',\n    width: '100%',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa',\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#6c757d',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#ffffff',\n    paddingVertical: 16,\n    paddingHorizontal: isMobile ? 16 : 24,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  menuButton: {\n    marginRight: 16,\n  },\n  headerTitle: {\n    fontSize: isMobile ? 18 : 20,\n    fontWeight: '600',\n    color: '#2c3e50',\n  },\n  content: {\n    flex: 1,\n    padding: isMobile ? 16 : 24,\n  },\n  statsContainer: {\n    marginBottom: 16,\n  },\n  statCard: {\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    padding: 20,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  statIconContainer: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 16,\n  },\n  statTitle: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginBottom: 4,\n    fontWeight: '500',\n  },\n  statValue: {\n    fontSize: 28,\n    fontWeight: '700',\n    color: '#2c3e50',\n  },\n  section: {\n    flex: 1,\n    backgroundColor: '#ffffff',\n    borderRadius: 12,\n    padding: isMobile ? 16 : 20,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 2,\n  },\n  sectionTitle: {\n    fontSize: isMobile ? 16 : 18,\n    fontWeight: '600',\n    color: '#2c3e50',\n    marginBottom: 16,\n  },\n  categoryCard: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa',\n    borderRadius: 8,\n    padding: 16,\n    marginBottom: 12,\n    borderWidth: 1,\n    borderColor: '#e0e0e0',\n  },\n  categoryIconContainer: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: '#e3f2fd',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 16,\n  },\n  categoryInfo: {\n    flex: 1,\n  },\n  categoryName: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: '#2c3e50',\n    marginBottom: 4,\n  },\n  categoryDescription: {\n    fontSize: 14,\n    color: '#6c757d',\n    marginBottom: 8,\n  },\n  categoryDetails: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  statusBadge: {\n    borderRadius: 10,\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n  },\n  statusText: {\n    fontSize: 12,\n    color: '#ffffff',\n    fontWeight: '600',\n  },\n  categoryDate: {\n    fontSize: 12,\n    color: '#7f8c8d',\n  },\n  emptyContainer: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 40,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: '#95a5a6',\n    marginTop: 16,\n  },\n  listContent: {\n    paddingBottom: 20,\n  },\n  emptyListContent: {\n    flex: 1,\n    justifyContent: 'center',\n  },\n});\n\nexport default VerCategoriasScreen;","// screens/Extras/SancionesScreen.js\nimport React from 'react';\nimport { View, Text } from 'react-native';\n\nconst SancionesScreen = () => {\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <Text>Pantalla de Sanciones</Text>\n    </View>\n  );\n};\n\nexport default SancionesScreen;","// screens/Extras/ManualScreen.js\nimport React from 'react';\nimport { View, Text } from 'react-native';\n\nconst ManualScreen = () => {\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <Text>Pantalla de Manual Administrador</Text>\n    </View>\n  );\n};\n\nexport default ManualScreen;","// DEBE SER LA PRIMERA LÍNEA DEL ARCHIVO\nimport 'react-native-gesture-handler';\nimport React from 'react';\nimport { Platform } from 'react-native';\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\nimport { createDrawerNavigator } from '@react-navigation/drawer';\nimport DetallesEquipoScreen from '../screens/DetallesEquipoScreen';\n\n// Pantallas Principales\nimport PrincipalAdminScreen from '../screens/PrincipalAdmin';\nimport SolicitarPrestamoScreen from '../screens/PrincipalPrestamoUsuario';\n\n// Componentes\nimport CustomDrawerContent from '../components/MenuAdmin';\nimport CustomDrawerContentUser from '../components/MenuUsuario';\n\n// Pantallas de Operaciones\nimport PrestamosScreen from '../screens/Operations/PrestamosScreen';\nimport HistorialPrestamosScreen from '../screens/Reports/HistorialPrestamosScreen';\nimport DevolucionesScreen from '../screens/Operations/DevolucionesScreen';\nimport PrestamosUsuariosScreen from '../screens/Operations/UsuarioPrestamos';\nimport DevolucionesUsuariosScreen from '../screens/Operations/UsuarioDevoluciones';\n\n// Pantallas de Mantenimiento\nimport AgregarMantenimientoScreen from '../screens/Maintenance/AgregarMantenimiento';\nimport DevolverMantenimientoScreen from '../screens/Maintenance/DevolverMantenimiento';\nimport ReporteMantenimientoScreen from '../screens/Reports/ReporteMantenimiento';\n\n// Pantallas de Usuarios\nimport AgregarAdminScreen  from '../screens/Users/AgregarAdmin';\nimport AgregarUsuariosScreen from '../screens/Users/AgregarUsuarios';\nimport ModificarUsuariosScreen from '../screens/Users/ModificarUsuarios';\nimport VerUsuariosScreen from '../screens/Users/VerUsuarios';\nimport PerfilUsuario from '../screens/Users/PerfilUsuario';\n\n// Pantallas de Equipos\nimport AgregarEquiposScreen from '../screens/Equipment/AgregarEquipos';\nimport ModificarEquiposScreen from '../screens/Equipment/ModificarEquipos';\nimport VerEquiposScreen from '../screens/Equipment/VerEquipos';\n\n// Pantallas de Categorías\nimport AgregarCategoriasScreen from '../screens/Categories/AgregarCategorias';\nimport VerCategoriasScreen from '../screens/Categories/VerCategorias';\n\n// Pantallas Extras\nimport SancionesScreen from '../screens/Extras/Sanciones';\nimport ManualScreen from '../screens/Extras/Manual';\n\n// Importación condicional de pantallas de autenticación\nlet AuthScreen, LoginScreen, RegisterScreen;\n\nif (Platform.OS === 'web') {\n  AuthScreen = require('../screens/Auth/AuthScreen').default;\n  LoginScreen = require('../screens/Auth/LoginScreen').default;\n  RegisterScreen = require('../screens/Auth/RegisterScreen').default;\n} else {\n  // Componentes vacíos para móvil\n  AuthScreen = () => null;\n  LoginScreen = () => null;\n  RegisterScreen = () => null;\n}\n\nconst Stack = createNativeStackNavigator();\nconst Drawer = createDrawerNavigator();\n\n// Configuración completa del drawer navigator para el área administrativa\nconst AdminDrawerNavigator = () => {\n  return (\n    <Drawer.Navigator\n      drawerContent={(props) => <CustomDrawerContent {...props} />}\n      screenOptions={{\n        headerShown: false,\n        drawerType: 'front',\n        drawerStyle: {\n          width: 280,\n        },\n        drawerHideStatusBarOnOpen: false,\n        overlayColor: 'transparent',\n        drawerStatusBarAnimation: 'fade',\n      }}\n    >\n      <Drawer.Screen \n        name=\"PrincipalAdmin\" \n        component={PrincipalAdminScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Inicio Administrador'\n        }}\n      />\n      <Drawer.Screen \n        name=\"Prestamos\" \n        component={PrestamosScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Gestión de Préstamos'\n        }}\n      />\n      <Drawer.Screen \n        name=\"HistorialPrestamos\" \n        component={HistorialPrestamosScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Historial de Préstamos'\n        }}\n      />\n      <Drawer.Screen \n        name=\"Devoluciones\" \n        component={DevolucionesScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Devoluciones'\n        }}\n      />\n      <Drawer.Screen \n        name=\"AgregarMantenimiento\" \n        component={AgregarMantenimientoScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Registrar Mantenimiento'\n        }}\n      />\n      <Drawer.Screen \n        name=\"DevolverMantenimiento\" \n        component={DevolverMantenimientoScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Devolver de Mantenimiento'\n        }}\n      />\n      <Drawer.Screen \n        name=\"ReporteMantenimiento\" \n        component={ReporteMantenimientoScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Reportes de Mantenimiento'\n        }}\n      />\n      <Drawer.Screen\n        name=\"AgregarAdmin\" \n        component={AgregarAdminScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Agregar Administrador'\n        }}\n      />\n      <Drawer.Screen \n        name=\"AgregarUsuarios\" \n        component={AgregarUsuariosScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Agregar Usuarios'\n        }}\n      />\n      <Drawer.Screen \n        name=\"ModificarUsuarios\" \n        component={ModificarUsuariosScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Modificar Usuarios'\n        }}\n      />\n      <Drawer.Screen \n        name=\"VerUsuarios\" \n        component={VerUsuariosScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Listado de Usuarios'\n        }}\n      />\n      <Drawer.Screen \n        name=\"AgregarEquipos\" \n        component={AgregarEquiposScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Agregar Equipos'\n        }}\n      />\n      <Drawer.Screen \n        name=\"ModificarEquipos\" \n        component={ModificarEquiposScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Modificar Equipos'\n        }}\n      />\n      <Drawer.Screen \n        name=\"VerEquipos\" \n        component={VerEquiposScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Inventario de Equipos'\n        }}\n      />\n      <Drawer.Screen \n        name=\"AgregarCategorias\" \n        component={AgregarCategoriasScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Agregar Categorías'\n        }}\n      />\n      <Drawer.Screen \n        name=\"VerCategorias\" \n        component={VerCategoriasScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Listado de Categorías'\n        }}\n      />\n      <Drawer.Screen \n        name=\"Sanciones\" \n        component={SancionesScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Gestión de Sanciones'\n        }}\n      />\n      <Drawer.Screen \n        name=\"Manual\" \n        component={ManualScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Manual del Sistema'\n        }}\n      />\n      <Drawer.Screen \n        name=\"PerfilUsuario\" \n        component={PerfilUsuario} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Mi Perfil'\n        }}\n      />\n    </Drawer.Navigator>\n  );\n};\n\n// Configuración completa del drawer navigator para el área de usuario\nconst UserDrawerNavigator = () => {\n  return (\n    <Drawer.Navigator\n      drawerContent={(props) => <CustomDrawerContentUser {...props} />}\n      screenOptions={{\n        headerShown: false,\n        drawerType: 'front',\n        drawerStyle: {\n          width: 280,\n        },\n        drawerHideStatusBarOnOpen: false,\n        overlayColor: 'transparent',\n        drawerStatusBarAnimation: 'fade',\n      }}\n    >\n      <Drawer.Screen \n        name=\"SolicitarPrestamo\" \n        component={SolicitarPrestamoScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Solicitar Préstamo'\n        }}\n      />\n      <Drawer.Screen \n        name=\"PrestamosUsuarios\" \n        component={PrestamosUsuariosScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Mis Préstamos'\n        }}\n      />\n      <Drawer.Screen \n        name=\"DevolucionesUsuarios\" \n        component={DevolucionesUsuariosScreen} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Mis Devoluciones'\n        }}\n      />\n      <Drawer.Screen \n        name=\"PerfilUsuario\" \n        component={PerfilUsuario} \n        options={{ \n          unmountOnBlur: true,\n          title: 'Mi Perfil'\n        }}\n      />\n    </Drawer.Navigator>\n  );\n};\n\n// Configuración completa de deep linking\nconst config = {\n  screens: {\n    Auth: 'auth',\n    Login: 'login',\n    Register: 'register',\n    AdminArea: {\n      path: 'admin',\n      screens: {\n        PrincipalAdmin: 'inicio',\n        VerEquipos: {\n          path: 'equipos',\n          screens: {\n            DetallesEquipo: ':equipoId',\n          },\n        },\n      },\n    },\n    UserArea: {\n      path: 'user',\n      screens: {\n        SolicitarPrestamo: 'prestamos/solicitar',\n        PrestamosUsuarios: 'prestamos/mis-prestamos',\n      },\n    },\n    DetallesEquipo: 'equipos/:equipoId',\n  },\n};\n\nconst linking = {\n  prefixes: ['tuapp://', 'https://tuapp.com'],\n  config,\n};\n\nexport default function App() {\n  // Ruta inicial condicional\n  const initialRouteName = Platform.OS === 'web' ? 'Auth' : 'UserArea';\n\n  return (\n    <GestureHandlerRootView style={{ flex: 1 }}>\n      <NavigationContainer linking={linking}>\n        <Stack.Navigator \n          initialRouteName={initialRouteName}\n          screenOptions={{\n            animation: 'fade',\n            animationDuration: 200,\n          }}\n        >\n          {/* Pantallas de Auth (solo para web) */}\n          {Platform.OS === 'web' && (\n            <>\n              <Stack.Screen \n                name=\"Auth\" \n                component={AuthScreen} \n                options={{ headerShown: false }}\n              />\n              <Stack.Screen \n                name=\"Login\" \n                component={LoginScreen} \n                options={{ \n                  headerShown: false,\n                  animation: 'slide_from_right'\n                }}\n              />\n              <Stack.Screen \n                name=\"Register\" \n                component={RegisterScreen} \n                options={{ \n                  headerShown: false,\n                  animation: 'slide_from_right'\n                }}\n              />\n            </>\n          )}\n          \n          {/* Área administrativa */}\n          <Stack.Screen \n            name=\"AdminArea\" \n            component={AdminDrawerNavigator} \n            options={{ \n              headerShown: false,\n              animation: 'fade'\n            }}\n          />\n          \n          {/* Área de usuario (pantalla principal para móvil) */}\n          <Stack.Screen \n            name=\"UserArea\" \n            component={UserDrawerNavigator} \n            options={{ \n              headerShown: false,\n              animation: 'fade'\n            }}\n          />\n\n          {/* Pantalla de detalles de equipo */}\n          <Stack.Screen \n            name=\"DetallesEquipo\" \n            component={DetallesEquipoScreen} \n            options={{ \n              headerShown: false,\n              animation: 'slide_from_right'\n            }}\n          />\n        </Stack.Navigator>\n      </NavigationContainer>\n    </GestureHandlerRootView>\n  );\n}","import { registerRootComponent } from 'expo';\nimport App from './src/screens/App'; // Debe apuntar a tu componente App principal\n\n// Esto registra el componente principal de tu aplicación\nregisterRootComponent(App);\n\n","import { createClient } from '@supabase/supabase-js';\nimport Constants from 'expo-constants';\n\n// Configuración segura usando variables de entorno\nconst supabaseUrl = Constants.expoConfig?.extra?.supabaseUrl || 'https://dqiynypelfrofpyodrtx.supabase.co';\nconst supabaseAnonKey = Constants.expoConfig?.extra?.supabaseKey || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRxaXlueXBlbGZyb2ZweW9kcnR4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ1NjMyNzgsImV4cCI6MjA2MDEzOTI3OH0.nTYDHWCzZmufRlNJJOcPfxve9TBToj1BUtrFsB33zI4';\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: false\n  }\n});\n\n// Funciones de utilidad\nexport const getCurrentSession = async () => {\n  const { data: { session }, error } = await supabase.auth.getSession();\n  if (error) throw error;\n  return session;\n};\n\nexport const signOut = async () => {\n  const { error } = await supabase.auth.signOut();\n  if (error) throw error;\n};\n","import React, { useState } from 'react';\nimport { \n  View, \n  Text, \n  TextInput, \n  TouchableOpacity, \n  Image, \n  StyleSheet,\n  Alert,\n  ActivityIndicator,\n  Dimensions,\n  KeyboardAvoidingView,\n  Platform,\n  ScrollView\n} from 'react-native';\nimport { supabase } from '../../lib/supabase';\n\nconst { width, height } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst isTablet = width >= 768 && width < 1024;\nconst isWeb = Platform.OS === 'web';\n\nexport default function LoginScreen({ navigation }) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [isFocused, setIsFocused] = useState({\n    email: false,\n    password: false\n  });\n\n  const handleLogin = async () => {\n    setLoading(true);\n    try {\n      const { error } = await supabase.auth.signInWithPassword({ email, password });\n      \n      if (error) throw error;\n\n      const { data: { user } } = await supabase.auth.getUser();\n      const { data: usuario, error: userError } = await supabase\n        .from('usuarios')\n        .select('rol')\n        .eq('idusuario', user.id)\n        .single();\n\n      if (userError) throw userError;\n\n      if (usuario.rol === 'admin') {\n        navigation.replace('AdminArea', { \n          screen: 'PrincipalAdmin',\n          params: { userId: user.id }\n        });\n      } else {\n        navigation.replace('UserArea', {\n          screen: 'SolicitarPrestamo',\n          params: { userId: user.id }\n        });\n      }\n      \n    } catch (error) {\n      Alert.alert(\n        'Error de inicio de sesión', \n        error.message || 'Ocurrió un error al iniciar sesión'\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFocus = (field) => setIsFocused({...isFocused, [field]: true});\n  const handleBlur = (field) => setIsFocused({...isFocused, [field]: false});\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n      style={styles.container}\n    >\n      <ScrollView \n        contentContainerStyle={styles.scrollContainer}\n        keyboardShouldPersistTaps=\"handled\"\n      >\n        <View style={styles.card}>\n          {/* Logo Institucional */}\n          <View style={styles.logoContainer}>\n            <Image\n              source={{ uri: 'https://utregionaldelsur.sidci.mx/img/logo.png' }}\n              style={styles.logo}\n              resizeMode=\"contain\"\n            />\n          </View>\n\n          {/* Título */}\n          <Text style={styles.title}>Sistema de Gestión de Equipos</Text>\n          <Text style={styles.subtitle}>Inicio de sesión</Text>\n\n          {/* Formulario */}\n          <View style={styles.form}>\n            <Text style={styles.label}>Correo electrónico</Text>\n            <TextInput\n              placeholder=\"usuario@gmail.com\"\n              placeholderTextColor=\"#9CA3AF\"\n              value={email}\n              onChangeText={setEmail}\n              autoCapitalize=\"none\"\n              keyboardType=\"email-address\"\n              style={[\n                styles.input,\n                isFocused.email && styles.inputFocused\n              ]}\n              onFocus={() => handleFocus('email')}\n              onBlur={() => handleBlur('email')}\n            />\n\n            <Text style={styles.label}>Contraseña</Text>\n            <TextInput\n              placeholder=\"Min. 6 caracteres\"\n              placeholderTextColor=\"#9CA3AF\"\n              value={password}\n              onChangeText={setPassword}\n              secureTextEntry\n              style={[\n                styles.input,\n                isFocused.password && styles.inputFocused\n              ]}\n              onFocus={() => handleFocus('password')}\n              onBlur={() => handleBlur('password')}\n            />\n\n            <TouchableOpacity\n              style={styles.loginButton}\n              onPress={handleLogin}\n              disabled={loading}\n            >\n              {loading ? (\n                <ActivityIndicator color=\"#FFF\" size=\"small\" />\n              ) : (\n                <Text style={styles.buttonText}>Ingresar</Text>\n              )}\n            </TouchableOpacity>\n\n            <TouchableOpacity\n              style={styles.forgotPassword}\n              onPress={() => {}}\n            >\n              <Text style={styles.forgotText}>¿Olvidaste tu contraseña?</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </ScrollView>\n    </KeyboardAvoidingView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#F3F4F6',\n  },\n  scrollContainer: {\n    flexGrow: 1,\n    justifyContent: 'center',\n    padding: isMobile ? 20 : isTablet ? 40 : 0,\n  },\n  card: {\n    backgroundColor: '#FFFFFF',\n    borderRadius: 12,\n    padding: isMobile ? 24 : 32,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    maxWidth: isWeb ? 480 : '100%',\n    width: isWeb ? '100%' : 'auto',\n    alignSelf: 'center',\n  },\n  logoContainer: {\n    alignItems: 'center',\n    marginBottom: 24,\n  },\n  logo: {\n    width: isMobile ? 200 : 240,\n    height: isMobile ? 80 : 100,\n  },\n  title: {\n    fontSize: isMobile ? 20 : 24,\n    fontWeight: 'bold',\n    color: '#111827',\n    textAlign: 'center',\n    marginBottom: 4,\n  },\n  subtitle: {\n    fontSize: isMobile ? 16 : 18,\n    color: '#6B7280',\n    textAlign: 'center',\n    marginBottom: 32,\n  },\n  form: {\n    marginBottom: 24,\n  },\n  label: {\n    fontSize: 14,\n    color: '#374151',\n    marginBottom: 8,\n    fontWeight: '500',\n  },\n  input: {\n    height: 48,\n    borderWidth: 1,\n    borderColor: '#E5E7EB',\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    marginBottom: 16,\n    fontSize: 16,\n    color: '#111827',\n    backgroundColor: '#F9FAFB',\n  },\n  inputFocused: {\n    borderColor: '#3B82F6',\n    backgroundColor: '#FFFFFF',\n  },\n  loginButton: {\n    height: 48,\n    backgroundColor: '#3B82F6',\n    borderRadius: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 8,\n    shadowColor: '#3B82F6',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.3,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  buttonText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  forgotPassword: {\n    alignSelf: 'flex-end',\n    marginTop: 12,\n  },\n  forgotText: {\n    color: '#3B82F6',\n    fontSize: 14,\n    fontWeight: '500',\n  }\n});","import React, { useState, useEffect } from 'react';\nimport { \n  View, \n  Text, \n  TextInput, \n  TouchableOpacity, \n  Image, \n  StyleSheet,\n  Alert,\n  ActivityIndicator,\n  Dimensions,\n  KeyboardAvoidingView,\n  Platform,\n  ScrollView,\n  Modal,\n  FlatList\n} from 'react-native';\nimport { supabase } from '../../lib/supabase';\n\nconst { width } = Dimensions.get('window');\nconst isMobile = width < 768;\nconst isWeb = Platform.OS === 'web';\n\nconst RegisterScreen = ({ navigation }) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [nombreusuario, setNombreUsuario] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [checkingAuth, setCheckingAuth] = useState(true);\n\n  useEffect(() => {\n    const checkAdminStatus = async () => {\n      const { data: { user } } = await supabase.auth.getUser();\n      \n      if (user) {\n        const { data: profile, error } = await supabase\n          .from('usuarios')\n          .select('rol')\n          .eq('idusuario', user.id)\n          .single();\n        \n        if (!error && profile && profile.rol === 'admin') {\n          setIsAdmin(true);\n        }\n      }\n      setCheckingAuth(false);\n    };\n\n    checkAdminStatus();\n  }, []);\n\n  const handleRegister = async () => {\n    if (!email || !password || !nombreusuario) {\n      Alert.alert('Error', 'Por favor complete todos los campos');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      // Registrar en auth.users\n      const { data: { user }, error: authError } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          data: {\n            username: nombreusuario\n          }\n        }\n      });\n\n      if (authError) throw authError;\n\n      // Crear registro en tabla usuarios (solo admin)\n      const { error: dbError } = await supabase\n        .from('usuarios')\n        .insert({\n          idusuario: user.id,\n          nombreusuario,\n          email,\n          rol: 'admin' // Solo se pueden crear otros admins\n        });\n\n      if (dbError) {\n        await supabase.auth.admin.deleteUser(user.id);\n        throw dbError;\n      }\n\n      Alert.alert(\n        'Registro exitoso', \n        'Nuevo administrador registrado. Verifica el correo electrónico.',\n        [{ text: 'OK', onPress: () => navigation.goBack() }]\n      );\n\n    } catch (error) {\n      Alert.alert('Error', error.message || 'Error al registrar administrador');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (checkingAuth) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" />\n      </View>\n    );\n  }\n\n  if (!isAdmin) {\n    return (\n      <View style={styles.unauthorizedContainer}>\n        <Text style={styles.unauthorizedText}>Acceso restringido</Text>\n        <Text style={styles.unauthorizedSubtext}>Solo administradores pueden registrar nuevos usuarios</Text>\n        <TouchableOpacity\n          style={styles.backButton}\n          onPress={() => navigation.goBack()}\n        >\n          <Text style={styles.backButtonText}>Volver</Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n      style={styles.container}\n    >\n      <ScrollView contentContainerStyle={styles.scrollContainer}>\n        <View style={styles.card}>\n          <View style={styles.logoContainer}>\n            <Image\n              source={{ uri: 'https://utregionaldelsur.sidci.mx/img/logo.png' }}\n              style={styles.logo}\n              resizeMode=\"contain\"\n            />\n          </View>\n\n          <Text style={styles.title}>Registrar Nuevo Administrador</Text>\n          \n          <View style={styles.form}>\n            <Text style={styles.label}>Nombre completo</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"Nombre del administrador\"\n              placeholderTextColor=\"#9CA3AF\"\n              value={nombreusuario}\n              onChangeText={setNombreUsuario}\n            />\n\n            <Text style={styles.label}>Correo electrónico</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"admin@institucion.edu\"\n              placeholderTextColor=\"#9CA3AF\"\n              value={email}\n              onChangeText={setEmail}\n              autoCapitalize=\"none\"\n              keyboardType=\"email-address\"\n            />\n\n            <Text style={styles.label}>Contraseña</Text>\n            <TextInput\n              style={styles.input}\n              placeholder=\"Mínimo 6 caracteres\"\n              placeholderTextColor=\"#9CA3AF\"\n              value={password}\n              onChangeText={setPassword}\n              secureTextEntry\n            />\n\n            <TouchableOpacity\n              style={styles.registerButton}\n              onPress={handleRegister}\n              disabled={loading}\n            >\n              {loading ? (\n                <ActivityIndicator color=\"#FFF\" />\n              ) : (\n                <Text style={styles.buttonText}>Registrar Administrador</Text>\n              )}\n            </TouchableOpacity>\n          </View>\n        </View>\n      </ScrollView>\n    </KeyboardAvoidingView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#F3F4F6',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  unauthorizedContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  unauthorizedText: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#EF4444',\n    marginBottom: 10,\n  },\n  unauthorizedSubtext: {\n    fontSize: 16,\n    color: '#6B7280',\n    textAlign: 'center',\n    marginBottom: 20,\n  },\n  backButton: {\n    backgroundColor: '#3B82F6',\n    padding: 15,\n    borderRadius: 8,\n    width: '80%',\n    alignItems: 'center',\n  },\n  backButtonText: {\n    color: '#FFFFFF',\n    fontWeight: '600',\n  },\n  scrollContainer: {\n    flexGrow: 1,\n    justifyContent: 'center',\n    padding: isMobile ? 20 : 40,\n  },\n  card: {\n    backgroundColor: '#FFFFFF',\n    borderRadius: 12,\n    padding: isMobile ? 24 : 32,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n    maxWidth: isWeb ? 480 : '100%',\n    width: isWeb ? '100%' : 'auto',\n    alignSelf: 'center',\n  },\n  logoContainer: {\n    alignItems: 'center',\n    marginBottom: 24,\n  },\n  logo: {\n    width: isMobile ? 200 : 240,\n    height: isMobile ? 80 : 100,\n  },\n  title: {\n    fontSize: isMobile ? 20 : 24,\n    fontWeight: 'bold',\n    color: '#111827',\n    textAlign: 'center',\n    marginBottom: 16,\n  },\n  form: {\n    marginBottom: 24,\n  },\n  label: {\n    fontSize: 14,\n    color: '#374151',\n    marginBottom: 8,\n    fontWeight: '500',\n  },\n  input: {\n    height: 48,\n    borderWidth: 1,\n    borderColor: '#E5E7EB',\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    marginBottom: 16,\n    fontSize: 16,\n    color: '#111827',\n    backgroundColor: '#F9FAFB',\n  },\n  registerButton: {\n    height: 48,\n    backgroundColor: '#3B82F6',\n    borderRadius: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 16,\n  },\n  buttonText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n});\n\nexport default RegisterScreen;","import { useEffect, useState } from 'react';\nimport { View, ActivityIndicator } from 'react-native';\nimport { supabase } from '../../lib/supabase';\n\nexport default function AuthScreen({ navigation }) {\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const { data: { session }, error } = await supabase.auth.getSession();\n        \n        if (error || !session) {\n          navigation.replace('Login');\n          return;\n        }\n\n        // Verificar si el usuario es admin\n        const { data: user, error: userError } = await supabase\n          .from('usuarios')\n          .select('rol')\n          .eq('idusuario', session.user.id)\n          .single();\n\n        if (userError || !user || user.rol !== 'admin') {\n          await supabase.auth.signOut();\n          navigation.replace('Login');\n          return;\n        }\n\n        // Si es admin, redirigir al área de administración\n        navigation.replace('AdminArea', {\n          screen: 'PrincipalAdmin',\n          params: { userId: session.user.id }\n        });\n\n      } catch (error) {\n        console.error('Error de autenticación:', error);\n        navigation.replace('Login');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    checkAuth();\n  }, [navigation]);\n\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <ActivityIndicator size=\"large\" />\n    </View>\n  );\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"8d176786\" + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"web:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/proyectocanones/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [915], () => (__webpack_require__(2705)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["width","Dimensions","get","isMobile","styles","StyleSheet","create","safeArea","flex","backgroundColor","container","justifyContent","alignItems","padding","loadingContainer","loadingText","marginTop","fontSize","color","errorText","textAlign","marginBottom","backButton","borderRadius","backButtonText","fontWeight","scrollContainer","paddingBottom","card","shadowColor","shadowOffset","height","shadowOpacity","shadowRadius","elevation","cardHeader","flexDirection","flexWrap","equipoIcon","marginRight","cardTitle","flexShrink","detailsContainer","statusBadge","paddingHorizontal","paddingVertical","alignSelf","statusAvailable","statusReserved","statusMaintenance","statusUnavailable","statusText","detailItem","detailText","marginLeft","descriptionContainer","paddingTop","borderTopWidth","borderTopColor","sectionTitle","descriptionText","lineHeight","actionsContainer","button","buttonDisabled","opacity","buttonText","notAvailableText","DetallesEquipoScreen","route","useRoute","navigation","useNavigation","equipo","setEquipo","useState","loading","setLoading","procesando","setProcesando","prestamoActivo","setPrestamoActivo","equipoId","equipoFromParams","params","useEffect","async","isNaN","Error","data","error","supabase","from","select","eq","single","prestamoData","prestamoError","idequipo","console","Alert","alert","message","text","onPress","goBack","cargarDatos","_jsxs","SafeAreaView","style","children","_jsx","ActivityIndicator","size","Text","ScrollView","contentContainerStyle","showsVerticalScrollIndicator","View","MaterialCommunityIcons","name","nombreequipo","estado","toUpperCase","MaterialIcons","categoriasequipos","nombrecategoria","Date","fechacreacion","toLocaleDateString","fechaactualizacion","_Fragment","personal","nombre_completo","fechaprestamo","fechadevolucion_prevista","descripcion","TouchableOpacity","user","auth","getUser","rpc","p_id_usuario","id","p_id_equipo","p_nombre_equipo","p_idprestamo","idprestamo","disabled","header","borderBottomWidth","borderBottomColor","menuButton","headerTitle","scrollContent","flexGrow","content","maxWidth","statsContainer","statCard","statIconContainer","statTitle","statValue","statSubtitle","section","quickActions","quickAction","borderWidth","borderColor","quickActionIcon","quickActionText","quickActionSubtext","PrincipalAdminScreen","stats","setStats","usuarios","equipos","prestamos","mantenimientos","count","or","is","fetchStats","openDrawer","hitSlop","top","bottom","left","right","Icon","navigate","activeOpacity","MENU_WIDTH","Math","min","COLOR_PRIMARIO","COLOR_TEXTO","COLOR_TEXTO_SECUNDARIO","IS_RTL","I18nManager","isRTL","menuItems","title","icon","subItems","overlay","position","zIndex","profileContainer","hairlineWidth","avatarPlaceholder","profileInfo","userName","userRole","menuScroll","menuScrollContent","menuItemContainer","overflow","subMenuItemContainer","borderLeftWidth","borderRightWidth","borderLeftColor","borderRightColor","menuItem","undefined","subMenuItem","paddingLeft","paddingRight","activeMenuItem","menuItemText","subMenuItemText","activeMenuItemText","subItemsContainer","logoutButton","logoutText","MenuUsuario","onClose","insets","useSafeAreaInsets","expandedItem","setExpandedItem","backPressCount","useRef","menuRef","animationValues","values","forEach","item","Animated","Value","backHandler","BackHandler","addEventListener","backAction","isFocused","current","cancelable","setTimeout","exitApp","remove","timing","toValue","duration","useNativeDriver","start","renderMenuItem","level","hasSubItems","length","isExpanded","heightAnim","interpolate","inputRange","outputRange","prev","getState","routeNames","includes","navigateTo","transform","scaleX","map","subItem","ref","onStartShouldSetResponder","numberOfLines","keyboardShouldPersistTaps","handleExitApp","permissionContainer","permissionText","permissionHint","cancelButton","cancelButtonText","frame","cornerTopLeft","cornerTopRight","cornerBottomLeft","cornerBottomRight","scanText","closeButton","flipButton","QRScannerModal","visible","onScan","hasPermission","setHasPermission","scanned","setScanned","cameraReady","setCameraReady","facing","setFacing","isMounted","status","Camera","getCameraPermissionsAsync","newStatus","requestCameraPermissionsAsync","requestCameraPermission","handleOpenSettings","Linking","openSettings","Modal","transparent","onRequestClose","animationType","statusBarTranslucent","CameraView","absoluteFillObject","onBarcodeScanned","handleBarCodeScanned","startsWith","split","pop","test","onCameraReady","barcodeScannerSettings","barcodeTypes","toggleCameraFacing","contentWithMenuOpen","scale","scanButton","listContainer","cardDescription","cardFooter","disponibleText","modalContainer","modalHeader","modalTitle","modalSubtitle","listItem","itemSelected","itemPreselected","itemDisabled","listItemText","selectedText","listItemSubText","listItemTitle","label","equipoInfo","searchInput","marginVertical","confirmationContainer","confirmButton","confirmButtonText","emptyContainer","emptyText","loadingOverlay","Object","assign","SolicitarPrestamoUsuario","categorias","setCategorias","equiposDisponibles","setEquiposDisponibles","personalDisponible","setPersonalDisponible","modalEquiposVisible","setModalEquiposVisible","modalPersonalVisible","setModalPersonalVisible","scannerVisible","setScannerVisible","menuVisible","setMenuVisible","searchTerm","setSearchTerm","categoriaSeleccionada","setCategoriaSeleccionada","equipoSeleccionado","setEquipoSeleccionado","personalSeleccionado","setPersonalSeleccionado","equipoPreseleccionado","setEquipoPreseleccionado","personalPreseleccionado","setPersonalPreseleccionado","addListener","categoriasData","errorCategorias","order","ascending","personalData","errorPersonal","handleEquipoSeleccionado","handlePersonalSeleccionado","persona","confirmarPrestamo","registrarPrestamo","equipoVerificado","errorVerificacion","newPrestamo","errorPrestamo","insert","idpersonal","toISOString","now","errorEquipo","update","errorHistorial","accion","fechaaccion","detalles","resetForm","filteredPersonal","filter","toLowerCase","StatusBar","barStyle","FlatList","renderItem","renderCategoriaCard","equiposData","categoria","idcategoria","handleCategoriaPress","FontAwesome","keyExtractor","toString","scrollEnabled","renderEquipoItem","onLongPress","TextInput","placeholder","placeholderTextColor","value","onChangeText","renderPersonalItem","tipo_persona","qrData","equipoData","avatarImage","androidMenuItem","androidText","androidLogoutButton","MenuAdmin","userData","setUserData","session","sessionError","getSession","reset","index","routes","nombreusuario","email","role","rol","avatar","fotoperfil","fetchUserData","log","animateItem","closeDrawer","Image","source","uri","charAt","slice","signOut","window","location","href","COLORS","letterSpacing","tabsContainer","tabButton","activeTab","tabText","activeTabText","searchContainer","searchIcon","fontFamily","listContent","cardTitleContainer","cardBody","cardRow","cardText","actionButton","marginHorizontal","actionButtonText","reserveButton","deleteButton","disabledButton","badgeAvailable","badgeReserved","badgeUnavailable","badgeActive","badgeReturned","textTransform","emptySubtext","modalOverlay","modalText","modalLabel","dateInput","timeInput","dateInputText","timeInputText","picker","modalButtons","modalButton","minWidth","modalButtonText","PrestamosScreen","setEquipos","setPrestamos","refreshing","setRefreshing","searchQuery","setSearchQuery","modalPrestamoVisible","setModalPrestamoVisible","modalReservaVisible","setModalReservaVisible","modalAccionVisible","setModalAccionVisible","selectedEquipo","setSelectedEquipo","selectedPrestamo","setSelectedPrestamo","action","setAction","setFilter","fechaReserva","setFechaReserva","horaReserva","setHoraReserva","showDatePicker","setShowDatePicker","showTimePicker","setShowTimePicker","setActiveTab","fetchEquipos","query","ilike","Toast","show","type","text1","text2","fetchPrestamos","processedData","fechaCompleta","format","parseISO","locale","es","horaprestamo","fechareserva","horasreserva","handleRefresh","formatHora","date","renderEquipo","modelo","numero_serie","refreshControl","RefreshControl","onRefresh","colors","ListEmptyComponent","renderPrestamo","DateTimePicker","mode","is24Hour","display","onChange","event","selectedTime","idusuario","minimumDate","selectedDate","fechadevolucion","buttonGroup","directorButton","printButton","buttonLabel","filterContainer","filterRow","filterLabel","filterOptions","filterOption","filterOptionActive","filterOptionText","filterOptionTextActive","dateFilterContainer","dateText","dateSeparator","webDateInput","border","outline","modalContent","detalleModalContent","maxHeight","detalleModalTitle","input","saveButton","saveButtonText","cardSubtitle","subtitlePrestamo","subtitleDevolucion","statusActive","statusCompleted","statusOther","detailRow","detalleSection","detalleLabel","detalleValue","detallePrestamo","detalleDevolucion","closeDetalleButton","closeDetalleButtonText","HistorialPrestamosScreen","historial","setHistorial","directorNombre","setDirectorNombre","modalVisible","setModalVisible","nuevoNombre","setNuevoNombre","fechaInicio","setFechaInicio","fechaFin","setFechaFin","showDatePickerInicio","setShowDatePickerInicio","showDatePickerFin","setShowDatePickerFin","filtroAccion","setFiltroAccion","detalleModalVisible","setDetalleModalVisible","detalleSeleccionado","setDetalleSeleccionado","formatDateForInput","getFullYear","String","getMonth","padStart","getDate","handleWebDateChange","dateString","setDateFunction","dateParts","fetchHistorial","savedName","AsyncStorage","getItem","loadDirectorName","gte","lte","historialFormateado","idhistorial","nombreUsuario","emailUsuario","tipoPersona","estadoPrestamo","nombreEquipo","descripcionEquipo","fechaPrestamo","fechaDevolucion","fechadevolucion_real","Button","labelStyle","htmlContent","weekday","year","month","day","toLocaleString","departamento","join","printWindow","open","document","write","close","focus","print","e","target","max","autoFocus","trim","setItem","mostrarDetallesCompletos","ellipsizeMode","toLocaleTimeString","hour","minute","tintColor","margin","infoRow","infoText","retryButton","retryButtonText","modalInput","minHeight","textAlignVertical","DevolucionesScreen","observaciones","setObservaciones","currentPrestamo","setCurrentPrestamo","fetchPrestamosActivos","prestamosFormateados","multiline","fechaActual","horaActual","hour12","second","devolucionError","horadevolucion","historialError","equipoError","visibilityTime","PrestamosUsuariosScreen","solicitudData","solicitudError","tiposolicitud","fechasolicitud","idsolicitud","prestamoInfo","devolverButton","devolverButtonText","DevolucionesUsuariosScreen","prestamosActivos","setPrestamosActivos","cargarPrestamosActivos","confirmarDevolucion","prestamo","procesarDevolucion","toggleMenu","renderPrestamoItem","prestamoId","formGroup","pickerContainer","textInput","infoBox","infoTextContainer","buttonContent","webSuccessMessage","translateX","webSuccessText","webErrorMessage","webErrorText","mobileSuccessMessage","mobileErrorMessage","mobileMessageText","AgregarMantenimientoScreen","loadingEquipos","setLoadingEquipos","filtroCategoria","setFiltroCategoria","formData","setFormData","tipomantenimiento","setUser","showSuccessMessage","setShowSuccessMessage","successMessage","setSuccessMessage","showErrorMessage","setShowErrorMessage","errorMessage","setErrorMessage","showError","fetchUser","fetchCategorias","fetchEquiposDisponibles","handleChange","Picker","selectedValue","onValueChange","dropdownIconColor","Item","fechaFormateada","horaInicioFormateada","toTimeString","substring","historialData","parseInt","idusuario_registro","fechamantenimiento","horamantenimiento","mantenimientoData","mantenimientoError","mensajeError","code","refreshButton","DevolverMantenimientoScreen","loadingMantenimientos","setLoadingMantenimientos","setMantenimientos","idhistorialmantenimiento","fetchMantenimientosActivos","mantenimiento","horaDevolucionFormateada","mantenimientoSeleccionado","find","m","mantenimientoEstadoError","fechafin","tecnicoButton","filterToggle","filterToggleText","filterToggleActive","ReporteMantenimientoScreen","reportes","setReportes","tecnicoNombre","setTecnicoNombre","modalTecnicoVisible","setModalTecnicoVisible","nuevoTecnico","setNuevoTecnico","mostrarCompletados","setMostrarCompletados","fetchReportes","savedDirector","savedTecnico","loadNames","not","toggleMostrarCompletados","form","registerButton","successContainer","successTitle","successText","emailText","successSubtext","successButton","successButtonText","AgregarAdminScreen","setEmail","password","setPassword","setNombreUsuario","registrationSuccess","setRegistrationSuccess","keyboardType","autoCapitalize","secureTextEntry","signUp","options","username","unauthorizedContainer","unauthorizedContent","unauthorizedTitle","unauthorizedText","webMessage","webMessageText","pickerButton","pickerButtonText","pickerOptions","pickerOption","selectedPickerOption","pickerOptionText","selectedPickerOptionText","AgregarUsuariosScreen","nombreCompleto","setNombreCompleto","setTipoPersona","showTipoPersonaPicker","setShowTipoPersonaPicker","isAdmin","setIsAdmin","tiposPersona","profile","checkAdminStatus","showAlert","maxLength","t","tipo","editForm","borderTopLeftRadius","borderBottomLeftRadius","searchButton","borderTopRightRadius","borderBottomRightRadius","personalItem","selectedPersonalItem","personalInfo","personalName","personalDetails","personalType","activeBadge","inactiveBadge","ModificarUsuariosScreen","setEstado","loadingList","setLoadingList","showEstadoPicker","setShowEstadoPicker","personalId","setPersonalId","personalList","setPersonalList","selectedPersonal","setSelectedPersonal","estados","fetchPersonal","actuallyDeletePersonal","delete","onSubmitEditing","handleSelectPersonal","est","confirm","personCard","personAvatar","personInfo","personName","badgeContainer","gap","typeBadge","badgeText","emptyListContent","detailLabel","detailValue","modalFooter","closeModalButton","VerPersonalScreen","setPersonal","selectedPerson","setSelectedPerson","getTipoPersonaColor","getEstadoColor","created_at","editButton","profileSection","avatarContainer","cameraIcon","textValue","roleContainer","roleButton","selectedRoleButton","roleButtonText","selectedRoleButtonText","imagePickerButton","scheduleImage","imagePickerPlaceholder","borderStyle","imagePickerText","changePasswordButton","changePasswordText","PerfilUsuario","contrasena","fotohorario","saving","setSaving","editMode","setEditMode","passwordModal","setPasswordModal","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","selectImage","ImagePicker","requestMediaLibraryPermissionsAsync","result","launchImageLibraryAsync","mediaTypes","Images","allowsEditing","aspect","quality","canceled","assets","uploadImage","pathPrefix","BUCKET_NAME","uniqueId","uuidv4","fileExt","fileName","base64","FileSystem","readAsStringAsync","encoding","Base64","storage","upload","decode","contentType","upsert","cacheControl","publicUrl","getPublicUrl","path","fotoPerfilUrl","fotoHorarioUrl","updateUser","formContainer","multilineInput","submitButton","submitButtonText","buttonIcon","qrContainer","qrTitle","qrSubtitle","qrCodeContainer","qrInfo","closeButtonText","AgregarEquiposScreen","showQR","setShowQR","setQrData","setEquipoId","handleDeepLink","url","replace","routeName","removeEventListener","showMessage","isSuccess","QRCode","handleCloseQR","cat","Number","qrContent","controlsContainer","refreshButtonLarge","refreshButtonText","itemContainer","itemHeader","itemName","itemDetails","itemDescription","itemActions","deleteMessage","textArea","ModificarEquiposScreen","filterEstado","setFilterEstado","currentEquipo","setCurrentEquipo","deleteModalVisible","setDeleteModalVisible","equipoToDelete","setEquipoToDelete","categoriasError","fetchData","neq","handleFormChange","getStatusColor","handleEdit","headerSubtitle","detailsButton","qrButton","equipoName","equipoCategory","VerEquiposScreen","showQRModal","setShowQRModal","setQrContent","handleSearch","handleShowQR","handleNavigateToDetails","addButton","itemContent","actionModalOverlay","actionModalContent","actionModalTitle","actionModalButton","actionModalButtonText","formModalOverlay","formModalContent","formModalTitle","formModalButtons","formModalButton","formModalButtonText","CategoriasScreen","showDeleteModal","setShowDeleteModal","showFormModal","setShowFormModal","showActionModal","setShowActionModal","selectedCategoria","setSelectedCategoria","formMode","setFormMode","showSuccess","openCreateModal","openEditModal","countError","categoriaData","categoryCard","categoryIconContainer","categoryInfo","categoryName","categoryDescription","categoryDetails","categoryDate","VerCategoriasScreen","SancionesScreen","ManualScreen","AuthScreen","LoginScreen","RegisterScreen","require","Stack","createNativeStackNavigator","Drawer","createDrawerNavigator","AdminDrawerNavigator","Navigator","drawerContent","props","CustomDrawerContent","screenOptions","headerShown","drawerType","drawerStyle","drawerHideStatusBarOnOpen","overlayColor","drawerStatusBarAnimation","Screen","component","unmountOnBlur","VerUsuariosScreen","AgregarCategoriasScreen","UserDrawerNavigator","CustomDrawerContentUser","SolicitarPrestamoScreen","linking","prefixes","config","screens","Auth","Login","Register","AdminArea","PrincipalAdmin","VerEquipos","DetallesEquipo","UserArea","SolicitarPrestamo","PrestamosUsuarios","registerRootComponent","GestureHandlerRootView","NavigationContainer","initialRouteName","animation","animationDuration","supabaseUrl","Constants","expoConfig","extra","supabaseAnonKey","supabaseKey","createClient","autoRefreshToken","persistSession","detectSessionInUrl","getCurrentSession","isTablet","setIsFocused","handleFocus","field","handleBlur","KeyboardAvoidingView","behavior","logoContainer","logo","resizeMode","subtitle","inputFocused","onFocus","onBlur","loginButton","signInWithPassword","usuario","userError","screen","userId","forgotPassword","forgotText","unauthorizedSubtext","checkingAuth","setCheckingAuth","authError","dbError","admin","deleteUser","checkAuth","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","keys","every","key","splice","r","n","getter","__esModule","d","a","leafPrototypes","getProto","getPrototypeOf","obj","this","then","ns","def","indexOf","getOwnPropertyNames","definition","o","defineProperty","enumerable","f","chunkId","Promise","all","reduce","promises","u","miniCssF","g","globalThis","Function","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","done","push","script","needAttach","scripts","getElementsByTagName","s","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","bind","head","appendChild","Symbol","toStringTag","p","installedChunks","installedChunkData","promise","resolve","reject","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}